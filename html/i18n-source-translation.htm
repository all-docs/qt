<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Writing Source Code for Translation</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/i18n-source-translation.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./internationalization.htm" translate="no">Internationalization with Qt</a></li>
                            <li><a>Writing Source Code for Translation</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    
<link href="internationalization.html" rel="prev">
<link href="i18n-plural-rules.html" rel="next">
<p class="naviNextPrevious headerNavi">
<a class="" href="./internationalization.htm">Internationalization with Qt</a>
<a class="" href="./i18n-plural-rules.htm">Translation Rules for Plurals</a>
</p><p></p>

<div class="context">
<h1 class="title">Writing Source Code for Translation</h1>
<span class="subtitle"></span>
<!-- $$$i18n-source-translation.html-description -->
<div class="descr"> <a name="details"></a>
<p>Writing cross-platform international software with Qt is a gentle, incremental process. Your software can become internationalized in the stages described in the following sections. For more information about internalizing Qt Quick application, see <a href="./qtquick-internationalization.htm" translate="no">Internationalization and Localization with Qt Quick</a>.</p>
<a name="using-qstring-for-all-user-visible-text"></a>
<h2 id="using-qstring-for-all-user-visible-text">Using QString for All User-Visible Text<a class="plink" href="#using-qstring-for-all-user-visible-text" title="Direct link to this headline"></a></h2>
<p>Since <a href="./qstring.htm" translate="no">QString</a> uses the Unicode encoding internally, every language in the world can be processed transparently using familiar text processing operations. Also, since all Qt functions that present text to the user take a <a href="./qstring.htm" translate="no">QString</a> as a parameter, there is no <code translate="no">char *</code> to <a href="./qstring.htm" translate="no">QString</a> conversion overhead.</p>
<p>Strings that are in "programmer space" (such as <a href="./qobject.htm" translate="no">QObject</a> names and file format texts) need not use <a href="./qstring.htm" translate="no">QString</a>; the traditional <code translate="no">char *</code> or the <a href="./qbytearray.htm" translate="no">QByteArray</a> class will suffice.</p>
<p>You're unlikely to notice that you are using Unicode; <a href="./qstring.htm" translate="no">QString</a>, and <a href="./qchar.htm" translate="no">QChar</a> are just easier versions of the crude <code translate="no">const char *</code> and <code translate="no">char</code> from traditional C.</p>
<p><code translate="no">char *</code> strings in source code are assumed to be <a href="http://www.ietf.org/rfc/rfc2279.txt" translate="no">UTF-8</a> encoded when being implicitly converted to a <a href="./qstring.htm" translate="no">QString</a>. If your C string literal uses a different encoding, use <a href="./qstring.htm#fromLatin1" translate="no">QString::fromLatin1</a>() or <a href="./qtextcodec.htm" translate="no">QTextCodec</a> to convert the literal to a Unicode encoded <a href="./qstring.htm" translate="no">QString</a>.</p>
<a name="using-tr-for-all-literal-text"></a>
<h2 id="using-tr-for-all-literal-text">Using tr() for All Literal Text<a class="plink" href="#using-tr-for-all-literal-text" title="Direct link to this headline"></a></h2>
<p>Wherever your program uses a string literal (quoted text) that will be presented to the user, ensure that it is processed by the <a href="./qcoreapplication.htm#translate" translate="no">QCoreApplication::translate</a>() function. Essentially all that is necessary to achieve this is to use the <a href="./qobject.htm#tr" translate="no">tr()</a> function to obtain translated text for your classes, typically for display purposes. This function is also used to indicate which text strings in an application are translatable.</p>
<p>For example, assuming the <code translate="no">LoginWidget</code> is a subclass of <a href="./qwidget.htm" translate="no">QWidget</a>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">LoginWidget<span class="operator">::</span>LoginWidget()
{
    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(tr(<span class="string">"Password:"</span>));
    <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
}</pre></div>
<p>This accounts for 99% of the user-visible strings you're likely to write.</p>
<p>If the quoted text is not in a member function of a <a href="./qobject.htm" translate="no">QObject</a> subclass, use either the tr() function of an appropriate class, or the <a href="./qcoreapplication.htm#translate" translate="no">QCoreApplication::translate</a>() function directly:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> some_global_function(LoginWidget <span class="operator">*</span>logwid)
{
    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(
                LoginWidget<span class="operator">::</span>tr(<span class="string">"Password:"</span>)<span class="operator">,</span> logwid);
}

<span class="type">void</span> same_global_function(LoginWidget <span class="operator">*</span>logwid)
{
    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(
                <span class="type"><a href="./qcoreapplication.htm" translate="no">QCoreApplication</a></span><span class="operator">::</span>translate(<span class="string">"LoginWidget"</span><span class="operator">,</span> <span class="string">"Password:"</span>)<span class="operator">,</span> logwid);
}</pre></div>
<p>Qt indexes each translatable string by the <i>translation context</i> it is associated with; this is generally the name of the <a href="./qobject.htm" translate="no">QObject</a> subclass it is used in.</p>
<p>Translation contexts are defined for new <a href="./qobject.htm" translate="no">QObject</a>-based classes by the use of the <a href="./qobject.htm#Q_OBJECT" translate="no">Q_OBJECT</a> macro in each new class definition.</p>
<p>When tr() is called, it looks up the translatable string using a <a href="./qtranslator.htm" translate="no">QTranslator</a> object. For translation to work, one or more of these must have been installed on the application object in the way described in <a href="./internationalization.htm#enabling-translation" translate="no">Enabling Translation</a>.</p>
<p>Translating strings in QML works exactly the same way as in C++, with the only difference being that you need to call qsTr() instead of <a href="./qobject.htm#tr" translate="no">tr()</a>. See also the page on <a href="./qtquick-internationalization.htm" translate="no">Internationalization and Localization with Qt Quick</a>.</p>
<a name="defining-a-translation-context"></a>
<h2 id="defining-a-translation-context">Defining a Translation Context<a class="plink" href="#defining-a-translation-context" title="Direct link to this headline"></a></h2>
<p>The translation context for <a href="./qobject.htm" translate="no">QObject</a> and each <a href="./qobject.htm" translate="no">QObject</a> subclass is the class name itself. Developers subclassing <a href="./qobject.htm" translate="no">QObject</a> must use the <a href="./qobject.htm#Q_OBJECT" translate="no">Q_OBJECT</a> macro in their class definition to override the translation context. This macro sets the context to the name of the subclass.</p>
<p>For example, the following class definition includes the <a href="./qobject.htm#Q_OBJECT" translate="no">Q_OBJECT</a> macro, implementing a new tr() that uses the <code translate="no">MainWindow</code> context:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> MainWindow : <span class="keyword">public</span> <span class="type"><a href="./qmainwindow.htm" translate="no">QMainWindow</a></span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    MainWindow();
    ...</pre></div>
<p>If <a href="./qobject.htm#Q_OBJECT" translate="no">Q_OBJECT</a> is not used in a class definition, the context will be inherited from the base class. For example, since all <a href="./qobject.htm" translate="no">QObject</a>-based classes in Qt provide a context, a new <a href="./qwidget.htm" translate="no">QWidget</a> subclass defined without a <a href="./qobject.htm#Q_OBJECT" translate="no">Q_OBJECT</a> macro will use the <code translate="no">QWidget</code> context if its tr() function is invoked.</p>
<a name="using-tr-to-obtain-a-translation"></a>
<h2 id="using-tr-to-obtain-a-translation">Using tr() to Obtain a Translation<a class="plink" href="#using-tr-to-obtain-a-translation" title="Direct link to this headline"></a></h2>
<p>The following example shows how a translation is obtained for the class shown in the previous section:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MainWindow<span class="operator">::</span>createMenus()
{
    fileMenu <span class="operator">=</span> menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addMenu(tr(<span class="string">"&amp;File"</span>));
    ...</pre></div>
<p>Here, the translation context is <code translate="no">MainWindow</code> because it is the <code translate="no">MainWindow::tr()</code> function that is invoked. The text returned by the tr() function is a translation of "&amp;File" obtained from the <code translate="no">MainWindow</code> context.</p>
<p>When Qt's translation tool, <a href="./linguist-manager.htm#using-lupdate" translate="no">lupdate</a>, is used to process a set of source files, the text wrapped in tr() calls is stored in a section of the translation file that corresponds to its translation context.</p>
<p>In some situations, it is useful to give a translation context explicitly by fully qualifying the call to tr(); for example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qstring.htm" translate="no">QString</a></span> text <span class="operator">=</span> <span class="type"><a href="./qscrollbar.htm" translate="no">QScrollBar</a></span><span class="operator">::</span>tr(<span class="string">"Page up"</span>);</pre></div>
<p>This call obtains the translated text for "Page up" from the <code translate="no">QScrollBar</code> context. Developers can also use the <a href="./qcoreapplication.htm#translate" translate="no">QCoreApplication::translate</a>() function to obtain a translation for a particular translation context.</p>
<a name="using-tr-to-localize-numbers"></a>
<h2 id="using-tr-to-localize-numbers">Using tr() to Localize Numbers<a class="plink" href="#using-tr-to-localize-numbers" title="Direct link to this headline"></a></h2>
<p>You can localize numbers by using appropriate tr() strings:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> Clock<span class="operator">::</span>setTime(<span class="keyword">const</span> <span class="type"><a href="./qtime.htm" translate="no">QTime</a></span> <span class="operator">&amp;</span>time)
{
    <span class="keyword">if</span> (tr(<span class="string">"AMPM"</span>) <span class="operator">=</span><span class="operator">=</span> <span class="string">"AMPM"</span>) {
        <span class="comment">// 12-hour clock</span>
    } <span class="keyword">else</span> {
        <span class="comment">// 24-hour clock</span>
    }
}</pre></div>
<p>In the example, for the US we would leave the translation of "AMPM" as it is and thereby use the 12-hour clock branch; but in Europe we would translate it as something else to make the code use the 24-hour clock branch.</p>
<a name="translating-non-qt-classes"></a>
<h2 id="translating-non-qt-classes">Translating Non-Qt Classes<a class="plink" href="#translating-non-qt-classes" title="Direct link to this headline"></a></h2>
<p>It is sometimes necessary to provide internationalization support for strings used in classes that do not inherit <a href="./qobject.htm" translate="no">QObject</a> or use the <a href="./qobject.htm#Q_OBJECT" translate="no">Q_OBJECT</a> macro to enable translation features. Since Qt translates strings at run-time based on the class they are associated with and <code translate="no">lupdate</code> looks for translatable strings in the source code, non-Qt classes must use mechanisms that also provide this information.</p>
<p>One way to do this is to add translation support to a non-Qt class using the <a href="./qcoreapplication.htm#Q_DECLARE_TR_FUNCTIONS" translate="no">Q_DECLARE_TR_FUNCTIONS</a>() macro; for example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> MyClass
{
    Q_DECLARE_TR_FUNCTIONS(MyClass)

<span class="keyword">public</span>:
    MyClass();
    ...
};</pre></div>
<p>This provides the class with <a href="./qobject.htm#tr" translate="no">tr()</a> functions that can be used to translate strings associated with the class, and makes it possible for <code translate="no">lupdate</code> to find translatable strings in the source code.</p>
<p>Alternatively, the <a href="./qcoreapplication.htm#translate" translate="no">QCoreApplication::translate</a>() function can be called with a specific context, and this will be recognized by <code translate="no">lupdate</code> and Qt Linguist.</p>
<a name="translator-comments"></a>
<h2 id="translator-comments">Translator Comments<a class="plink" href="#translator-comments" title="Direct link to this headline"></a></h2>
<p>Developers can include information about each translatable string to help translators with the translation process. These are extracted when <code translate="no">lupdate</code> is used to process the source files. The recommended way to add comments is to annotate the tr() calls in your code with comments of the form:</p>
<p><code translate="no">//: ...</code></p>
<p>or</p>
<p><code translate="no"><code translate="no">/*</code>: ... <code translate="no">*/</code></code></p>
<p>Examples:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="comment">//: This name refers to a host name.</span>
hostNameLabel<span class="operator">-</span><span class="operator">&gt;</span>setText(tr(<span class="string">"Name:"</span>));

<span class="comment">/*: This text refers to a C++ code example. */</span>
<span class="type"><a href="./qstring.htm" translate="no">QString</a></span> example <span class="operator">=</span> tr(<span class="string">"Example"</span>);</pre></div>
<p>In these examples, the comments will be associated with the strings passed to tr() in the context of each call.</p>
<a name="adding-meta-data-to-strings"></a>
<h2 id="adding-meta-data-to-strings">Adding Meta-Data to Strings<a class="plink" href="#adding-meta-data-to-strings" title="Direct link to this headline"></a></h2>
<p>Additional data can be attached to each translatable message. These are extracted when <code translate="no">lupdate</code> is used to process the source files. The recommended way to add meta-data is to annotate the tr() calls in your code with comments of the form:</p>
<p><code translate="no">//= &lt;id&gt;</code></p>
<p>This can be used to give the message a unique identifier to support tools which need it.</p>
<p>An alternative way to attach meta-data is to use the following syntax:</p>
<p><code translate="no">//~ &lt;field name&gt; &lt;field contents&gt;</code></p>
<p>This can be used to attach meta-data to the message. The field name should consist of a domain prefix (possibly the conventional file extension of the file format the field is inspired by), a hyphen and the actual field name in underscore-delimited notation. For storage in TS files, the field name together with the prefix "extra-" will form an XML element name. The field contents will be XML-escaped, but otherwise appear verbatim as the element's contents. Any number of unique fields can be added to each message.</p>
<p>Example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="comment">//: This is a comment for the translator.</span>
<span class="comment">//= qtn_foo_bar</span>
<span class="comment">//~ loc-layout_id foo_dialog</span>
<span class="comment">//~ loc-blank False</span>
<span class="comment">//~ magic-stuff This might mean something magic.</span>
<span class="type"><a href="./qstring.htm" translate="no">QString</a></span> text <span class="operator">=</span> MyMagicClass<span class="operator">::</span>tr(<span class="string">"Sim sala bim."</span>);</pre></div>
<p>You can use the keyword <i>TRANSLATOR</i> for translator comments. Meta-data appearing right in front of the TRANSLATOR keyword applies to the whole TS file.</p>
<a name="disambiguation"></a>
<h2 id="disambiguation">Disambiguation<a class="plink" href="#disambiguation" title="Direct link to this headline"></a></h2>
<p>If the same translatable string is used in different roles within the same translation context, an additional identifying string may be passed in the call to <a href="./qobject.htm#tr" translate="no">tr()</a>. This optional disambiguation argument is used to distinguish between otherwise identical strings.</p>
<p>Example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">MyWindow<span class="operator">::</span>MyWindow()
{
    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>senderLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(tr(<span class="string">"Name:"</span>));
    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>recipientLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(tr(<span class="string">"Name:"</span><span class="operator">,</span> <span class="string">"recipient"</span>));
    ...</pre></div>
<p>In Qt 4.4 and earlier, this disambiguation parameter was the preferred way to specify comments to translators.</p>
<a name="handling-plurals"></a>
<h2 id="handling-plurals">Handling Plurals<a class="plink" href="#handling-plurals" title="Direct link to this headline"></a></h2>
<p>Some translatable strings contain placeholders for integer values and need to be translated differently depending on the values in use.</p>
<p>To help with this problem, developers pass an additional integer argument to the <a href="./qobject.htm#tr" translate="no">tr()</a> function, and typically use a special notation for plurals in each translatable string.</p>
<p>If this argument is equal or greater than zero, all occurrences of <code translate="no">%n</code> in the resulting string are replaced with a decimal representation of the value supplied. In addition, the translation used will adapt to the value according to the rules for each language.</p>
<p>Example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">int</span> n <span class="operator">=</span> messages<span class="operator">.</span>count();
showMessage(tr(<span class="string">"%n message(s) saved"</span><span class="operator">,</span> <span class="string">""</span><span class="operator">,</span> n));</pre></div>
<p>The table below shows what string is returned depending on the active translation:</p>
<div class="table"><table class="generic">
<thead><tr class="qt-style"><th></th><th colspan="3">Active Translation</th></tr>
<tr class="qt-style"><th><i translate="no">n</i></th><th>No Translation</th><th>French</th><th>English</th></tr></thead>
<tbody><tr class="odd" valign="top"><td>0</td><td>"0 message(s) saved"</td><td>"0 message sauvegardé"</td><td>"0 message<b>s</b> saved"</td></tr>
<tr class="even" valign="top"><td>1</td><td>"1 message(s) saved"</td><td>"1 message sauvegardé"</td><td>"1 message saved"</td></tr>
<tr class="odd" valign="top"><td>2</td><td>"2 message(s) saved"</td><td>"2 message<b>s</b> sauvegardé<b>s</b>"</td><td>"2 message<b>s</b> saved"</td></tr>
<tr class="even" valign="top"><td>37</td><td>"37 message(s) saved"</td><td>"37 message<b>s</b> sauvegardé<b>s</b>"</td><td>"37 message<b>s</b> saved"</td></tr>
</tbody></table></div>
<p>This idiom is more flexible than the traditional approach; e.g.,</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">n <span class="operator">=</span><span class="operator">=</span> <span class="number">1</span> <span class="operator">?</span> tr(<span class="string">"%n message saved"</span>) : tr(<span class="string">"%n messages saved"</span>)</pre></div>
<p>because it also works with target languages that have several plural forms (e.g., Irish has a special "dual" form that should be used when <code translate="no">n</code> is 2), and it handles the <i>n</i> == 0 case correctly for languages such as French that require the singular.</p>
<p>To handle plural forms in the native language, you need to load a translation file for this language, too. The lupdate tool has the <code translate="no">-pluralonly</code> command line option, which allows the creation of TS files containing only entries with plural forms.</p>
<p>See the <a href="http://doc.qt.io/archives/qq/" translate="no">Qt Quarterly</a> Article <a href="http://doc.qt.io/archives/qq/qq19-plurals.html" translate="no">Plural Forms in Translations</a> for further details on this issue.</p>
<p>Instead of <code translate="no">%n</code>, you can use <code translate="no">%Ln</code> to produce a localized representation of <i translate="no">n</i>. The conversion uses the default locale, set using <a href="./qlocale.htm#setDefault" translate="no">QLocale::setDefault</a>(). (If no default locale was specified, the system wide locale is used.)</p>
<p>A summary of the rules used to translate strings containing plurals can be found in the <a href="./i18n-plural-rules.htm" translate="no">Translation Rules for Plurals</a> document.</p>
<a name="translating-text-that-is-outside-of-a-qobject-subclass"></a>
<h2 id="translating-text-that-is-outside-of-a-qobject-subclass">Translating Text That is Outside of a QObject Subclass<a class="plink" href="#translating-text-that-is-outside-of-a-qobject-subclass" title="Direct link to this headline"></a></h2>
<a name="using-qcoreapplication-translate"></a>
<h3 id="using-qcoreapplication-translate">Using QCoreApplication::translate()<a class="plink" href="#using-qcoreapplication-translate" title="Direct link to this headline"></a></h3>
<p>If the quoted text is not in a member function of a <a href="./qobject.htm" translate="no">QObject</a> subclass, use either the tr() function of an appropriate class, or the <a href="./qcoreapplication.htm#translate" translate="no">QCoreApplication::translate</a>() function directly:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> some_global_function(LoginWidget <span class="operator">*</span>logwid)
{
    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(
            LoginWidget<span class="operator">::</span>tr(<span class="string">"Password:"</span>)<span class="operator">,</span> logwid);
}

<span class="type">void</span> same_global_function(LoginWidget <span class="operator">*</span>logwid)
{
    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(
            <span class="type"><a href="./qcoreapplication.htm" translate="no">QCoreApplication</a></span><span class="operator">::</span>translate(<span class="string">"LoginWidget"</span><span class="operator">,</span> <span class="string">"Password:"</span>)<span class="operator">,</span>
            logwid);
}</pre></div>
<a name="using-qt-tr-noop-and-qt-translate-noop-in-c"></a>
<h3 id="using-qt-tr-noop-and-qt-translate-noop-in-c">Using QT_TR_NOOP() and QT_TRANSLATE_NOOP() in C++<a class="plink" href="#using-qt-tr-noop-and-qt-translate-noop-in-c" title="Direct link to this headline"></a></h3>
<p>If you need to have translatable text completely outside a function, there are two macros to help: <a href="./qtglobal.htm#QT_TR_NOOP" translate="no">QT_TR_NOOP</a>() and <a href="./qtglobal.htm#QT_TRANSLATE_NOOP" translate="no">QT_TRANSLATE_NOOP</a>(). They merely mark the text for extraction by the <code translate="no">lupdate</code> tool. The macros expand to just the text (without the context).</p>
<p>Example of <a href="./qtglobal.htm#QT_TR_NOOP" translate="no">QT_TR_NOOP</a>():</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qstring.htm" translate="no">QString</a></span> FriendlyConversation<span class="operator">::</span>greeting(<span class="type">int</span> type)
{
    <span class="keyword">static</span> <span class="keyword">const</span> <span class="type">char</span> <span class="operator">*</span>greeting_strings<span class="operator">[</span><span class="operator">]</span> <span class="operator">=</span> {
        QT_TR_NOOP(<span class="string">"Hello"</span>)<span class="operator">,</span>
        QT_TR_NOOP(<span class="string">"Goodbye"</span>)
    };
    <span class="keyword">return</span> tr(greeting_strings<span class="operator">[</span>type<span class="operator">]</span>);
}</pre></div>
<p>Example of <a href="./qtglobal.htm#QT_TRANSLATE_NOOP" translate="no">QT_TRANSLATE_NOOP</a>():</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">static</span> <span class="keyword">const</span> <span class="type">char</span> <span class="operator">*</span>greeting_strings<span class="operator">[</span><span class="operator">]</span> <span class="operator">=</span> {
    QT_TRANSLATE_NOOP(<span class="string">"FriendlyConversation"</span><span class="operator">,</span> <span class="string">"Hello"</span>)<span class="operator">,</span>
    QT_TRANSLATE_NOOP(<span class="string">"FriendlyConversation"</span><span class="operator">,</span> <span class="string">"Goodbye"</span>)
};

<span class="type"><a href="./qstring.htm" translate="no">QString</a></span> FriendlyConversation<span class="operator">::</span>greeting(<span class="type">int</span> type)
{
    <span class="keyword">return</span> tr(greeting_strings<span class="operator">[</span>type<span class="operator">]</span>);
}

<span class="type"><a href="./qstring.htm" translate="no">QString</a></span> global_greeting(<span class="type">int</span> type)
{
    <span class="keyword">return</span> <span class="type"><a href="./qcoreapplication.htm" translate="no">QCoreApplication</a></span><span class="operator">::</span>translate(<span class="string">"FriendlyConversation"</span><span class="operator">,</span>
                                       greeting_strings<span class="operator">[</span>type<span class="operator">]</span>);
}</pre></div>
<p>If you disable the <code translate="no">const char *</code> to <a href="./qstring.htm" translate="no">QString</a> automatic conversion by compiling your software with the macro <code translate="no">QT_NO_CAST_FROM_ASCII</code> defined, you'll be very likely to catch any strings you are missing. See <a href="./qstring.htm#fromUtf8" translate="no">QString::fromUtf8</a>() and <a href="./qstring.htm#fromLatin1" translate="no">QString::fromLatin1</a>() for more information.</p>
<a name="using-qkeysequence-for-accelerator-values"></a>
<h2 id="using-qkeysequence-for-accelerator-values">Using QKeySequence() for Accelerator Values<a class="plink" href="#using-qkeysequence-for-accelerator-values" title="Direct link to this headline"></a></h2>
<p>Accelerator values such as Ctrl+Q or Alt+F need to be translated too. If you hardcode <code translate="no">Qt::CTRL + Qt::Key_Q</code> for "quit" in your application, translators won't be able to override it. The correct idiom is:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">exitAct <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qaction.htm" translate="no">QAction</a></span>(tr(<span class="string">"E&amp;xit"</span>)<span class="operator">,</span> <span class="keyword">this</span>);
exitAct<span class="operator">-</span><span class="operator">&gt;</span>setShortcuts(<span class="type"><a href="./qkeysequence.htm" translate="no">QKeySequence</a></span><span class="operator">::</span>Quit);</pre></div>
<a name="using-numbered-arguments"></a>
<h2 id="using-numbered-arguments">Using Numbered Arguments<a class="plink" href="#using-numbered-arguments" title="Direct link to this headline"></a></h2>
<p>The <a href="./qstring.htm#arg" translate="no">QString::arg</a>() functions offer a simple means for substituting arguments:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> FileCopier<span class="operator">::</span>showProgress(<span class="type">int</span> done<span class="operator">,</span> <span class="type">int</span> total<span class="operator">,</span>
                              <span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> <span class="operator">&amp;</span>currentFile)
{
    label<span class="operator">.</span>setText(tr(<span class="string">"%1 of %2 files copied.\nCopying: %3"</span>)
                  <span class="operator">.</span>arg(done)
                  <span class="operator">.</span>arg(total)
                  <span class="operator">.</span>arg(currentFile));
}</pre></div>
<p>In some languages the order of arguments may need to change, and this can easily be achieved by changing the order of the % arguments. For example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qstring.htm" translate="no">QString</a></span> s1 <span class="operator">=</span> <span class="string">"%1 of %2 files copied. Copying: %3"</span>;
<span class="type"><a href="./qstring.htm" translate="no">QString</a></span> s2 <span class="operator">=</span> <span class="string">"Kopierer nu %3. Av totalt %2 filer er %1 kopiert."</span>;

<a href="./qtglobal.htm#qDebug" translate="no">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> s1<span class="operator">.</span>arg(<span class="number">5</span>)<span class="operator">.</span>arg(<span class="number">10</span>)<span class="operator">.</span>arg(<span class="string">"somefile.txt"</span>);
<a href="./qtglobal.htm#qDebug" translate="no">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> s2<span class="operator">.</span>arg(<span class="number">5</span>)<span class="operator">.</span>arg(<span class="number">10</span>)<span class="operator">.</span>arg(<span class="string">"somefile.txt"</span>);</pre></div>
<p>produces the correct output in English and Norwegian:</p>
<div class="pre"><pre class="cpp" translate="no"><span class="number">5</span> of <span class="number">10</span> files copied<span class="operator">.</span> Copying: somefile<span class="operator">.</span>txt
Kopierer nu somefile<span class="operator">.</span>txt<span class="operator">.</span> Av totalt <span class="number">10</span> filer er <span class="number">5</span> kopiert<span class="operator">.</span></pre></div>
<a name="further-reading"></a>
<h2 id="further-reading">Further Reading<a class="plink" href="#further-reading" title="Direct link to this headline"></a></h2>
<p><a href="./qtlinguist-index.htm" translate="no">Qt Linguist Manual</a>, <a href="./qtlinguist-hellotr-example.htm" translate="no">Hello tr</a>() Example, <a href="./i18n-plural-rules.htm" translate="no">Translation Rules for Plurals</a></p>
</div>
<!-- @@@i18n-source-translation.html -->
<p class="naviNextPrevious footerNavi">
<a class="prevPage" href="./internationalization.htm">Internationalization with Qt</a>
<a class="nextPage" href="./i18n-plural-rules.htm">Translation Rules for Plurals</a>
</p>
</div>
<p class="copy-notice">
<acronym title="Copyright">©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>