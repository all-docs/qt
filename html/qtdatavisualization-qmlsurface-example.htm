<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Qt Quick 2 Surface Example | Qt Data Visualization</title>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtdatavisualization-index.htm" translate="no">Qt Data Visualization</a></li>
                            <li class="last"><a>Qt Quick 2 Surface Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">Qt Quick 2 Surface Example</h1>
<span class="subtitle"></span>
<!-- $$$qmlsurface-brief -->
<p>Using <a href="./qml-qtdatavisualization-surface3d.htm" translate="no">Surface3D</a> in a QML application.</p>
<!-- @@@qmlsurface -->
<!-- $$$qmlsurface-description -->
<div class="descr"> <a name="details"></a>
<p>The Qt Quick 2 surface example shows how to make a simple 3D surface plot using <a href="./qml-qtdatavisualization-surface3d.htm" translate="no">Surface3D</a> with Qt Quick 2.</p>
<p class="centerAlign"><img alt="" src="./images/qmlsurface-example.png"></p><p>The focus in this example is on generating a surface graph from height data, so in this section we skip explaining the application creation. For more detailed QML example documentation, see <a href="./qtdatavisualization-qmlscatter-example.htm" translate="no">Qt Quick 2 Scatter Example</a>.</p>
<a name="running-the-example"></a>
<h4 id="running-the-example">Running the Example<a class="plink" href="#running-the-example" title="Direct link to this headline"></a></h4>
<p>To run the example from <a href="http://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b>Welcome</b> mode and select the example from <b>Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<a name="adding-data-to-the-graph"></a>
<h4 id="adding-data-to-the-graph">Adding Data to the Graph<a class="plink" href="#adding-data-to-the-graph" title="Direct link to this headline"></a></h4>
<p>This example shows two methods to set data to surface graph, using the <a href="./qml-qtdatavisualization-heightmapsurfacedataproxy.htm" translate="no">HeightMapSurfaceDataProxy</a> and <a href="./qml-qtdatavisualization-itemmodelsurfacedataproxy.htm" translate="no">ItemModelSurfaceDataProxy</a>. First we go through setting the data using the height map specific data proxy. It is done with the code snippet below. The proxy itself is contained in a <a href="./qml-qtdatavisualization-surface3dseries.htm" translate="no">Surface3DSeries</a>. Inside the <a href="./qml-qtdatavisualization-heightmapsurfacedataproxy.htm" translate="no">HeightMapSurfaceDataProxy</a> the <code translate="no">heightMapFile</code> specifies the image file containing the height data. The value properties in the proxy define the minimum and maximum values for surface area width and depth. This example shows the terrain around Tycho crater at imaginary position from 67 to 97 and from 30 to 60. Note that on the graph the scale on the Y dimension exaggerates the height.</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtdatavisualization-surface3dseries.htm" translate="no">Surface3DSeries</a></span> {
    <span class="name">id</span>: <span class="name">heightSeries</span>
    <span class="name">flatShadingEnabled</span>: <span class="number">false</span>
    <span class="name">drawMode</span>: <span class="name">Surface3DSeries</span>.<span class="name">DrawSurface</span>
    <span class="name">visible</span>: <span class="number">false</span>

    <span class="type"><a href="./qml-qtdatavisualization-heightmapsurfacedataproxy.htm" translate="no">HeightMapSurfaceDataProxy</a></span> {
        <span class="name">heightMapFile</span>: <span class="string">":/heightmaps/image"</span>
        <span class="comment">// We don't want the default data values set by heightmap proxy.</span>
        <span class="name">minZValue</span>: <span class="number">30</span>
        <span class="name">maxZValue</span>: <span class="number">60</span>
        <span class="name">minXValue</span>: <span class="number">67</span>
        <span class="name">maxXValue</span>: <span class="number">97</span>
    }

    <span class="name">onDrawModeChanged</span>: <span class="name">checkState</span>()
}</pre></div>
<p>The other method to set surface data used in this example is with model mapping. We do that by first defining a <code translate="no">ListModel</code> containing the data for the surface:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type">ListModel</span> {
    <span class="name">id</span>: <span class="name">dataModel</span>
    <span class="type">ListElement</span>{ <span class="name">longitude</span>: <span class="string">"0"</span>; <span class="name">latitude</span>: <span class="string">"0"</span>; <span class="name">height</span>: <span class="string">"124"</span>; }
    <span class="type">ListElement</span>{ <span class="name">longitude</span>: <span class="string">"0"</span>; <span class="name">latitude</span>: <span class="string">"1"</span>; <span class="name">height</span>: <span class="string">"125"</span>; }
    <span class="type">ListElement</span>{ <span class="name">longitude</span>: <span class="string">"0"</span>; <span class="name">latitude</span>: <span class="string">"2"</span>; <span class="name">height</span>: <span class="string">"124"</span>; }
    ...</pre></div>
<p>Then we set up a <a href="./qml-qtdatavisualization-surface3dseries.htm" translate="no">Surface3DSeries</a> with a <a href="./qml-qtdatavisualization-itemmodelsurfacedataproxy.htm" translate="no">ItemModelSurfaceDataProxy</a>:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtdatavisualization-surface3dseries.htm" translate="no">Surface3DSeries</a></span> {
    <span class="name">id</span>: <span class="name">surfaceSeries</span>
    <span class="name">flatShadingEnabled</span>: <span class="number">false</span>
    <span class="name">drawMode</span>: <span class="name">Surface3DSeries</span>.<span class="name">DrawSurface</span>

    <span class="type"><a href="./qml-qtdatavisualization-itemmodelsurfacedataproxy.htm" translate="no">ItemModelSurfaceDataProxy</a></span> {
    ...</pre></div>
<p>We add the actual data to the <code translate="no">itemModel</code> of the <a href="./qml-qtdatavisualization-itemmodelsurfacedataproxy.htm" translate="no">ItemModelSurfaceDataProxy</a>. We also define the roles for columns, rows and values. In this example the row holds values for longitude, column for latitude and the value is for height.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">...
<span class="name">itemModel</span>: <span class="name">surfaceData</span>.<span class="name">model</span>
<span class="name">rowRole</span>: <span class="string">"longitude"</span>
<span class="name">columnRole</span>: <span class="string">"latitude"</span>
<span class="name">yPosRole</span>: <span class="string">"height"</span>
}</pre></div>
<a name="showing-data"></a>
<h4 id="showing-data">Showing Data<a class="plink" href="#showing-data" title="Direct link to this headline"></a></h4>
<p>In the <code translate="no">main.qml</code>, we set up the <a href="./qml-qtdatavisualization-surface3d.htm" translate="no">Surface3D</a> element to show the data and various UI elements to illustrate few interesting features.</p>
<p>First is the gradient to be used for the surface, which can be defined as seen in the following snippet. With the <a href="./qml-qtdatavisualization-colorgradient.htm" translate="no">ColorGradient</a> we set example colors from position 0.0 to 1.0.</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtdatavisualization-colorgradient.htm" translate="no">ColorGradient</a></span> {
    <span class="name">id</span>: <span class="name">surfaceGradient</span>
    <span class="type"><a href="./qml-qtdatavisualization-colorgradientstop.htm" translate="no">ColorGradientStop</a></span> { <span class="name">position</span>: <span class="number">0.0</span>; <span class="name">color</span>: <span class="string">"darkslategray"</span> }
    <span class="type"><a href="./qml-qtdatavisualization-colorgradientstop.htm" translate="no">ColorGradientStop</a></span> { <span class="name">id</span>: <span class="name">middleGradient</span>; <span class="name">position</span>: <span class="number">0.25</span>; <span class="name">color</span>: <span class="string">"peru"</span> }
    <span class="type"><a href="./qml-qtdatavisualization-colorgradientstop.htm" translate="no">ColorGradientStop</a></span> { <span class="name">position</span>: <span class="number">1.0</span>; <span class="name">color</span>: <span class="string">"red"</span> }
}</pre></div>
<p>This element is set into the <code translate="no">baseGradients</code> property in the <code translate="no">theme</code> used in <a href="./qml-qtdatavisualization-surface3d.htm" translate="no">Surface3D</a>:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="name">theme</span>: <span class="name">Theme3D</span> {
    <span class="name">type</span>: <span class="name">Theme3D</span>.<span class="name">ThemeStoneMoss</span>
    <span class="name">font</span>.family: <span class="string">"STCaiyun"</span>
    <span class="name">font</span>.pointSize: <span class="number">35</span>
    <span class="name">colorStyle</span>: <span class="name">Theme3D</span>.<span class="name">ColorStyleRangeGradient</span>
    <span class="name">baseGradients</span>: [<span class="name">surfaceGradient</span>]
}</pre></div>
<p>Other interesting features can be controlled with buttons.</p>
<p>The first button is to toggle on and off the surface grid, for which we use the following code:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="name">onClicked</span>: {
    <span class="keyword">if</span> (<span class="name">surfaceSeries</span>.<span class="name">drawMode</span> <span class="operator">&amp;</span> <span class="name">Surface3DSeries</span>.<span class="name">DrawWireframe</span>) {
        <span class="name">surfaceSeries</span>.<span class="name">drawMode</span> <span class="operator">&amp;=</span> ~<span class="name">Surface3DSeries</span>.<span class="name">DrawWireframe</span>;
        <span class="name">heightSeries</span>.<span class="name">drawMode</span> <span class="operator">&amp;=</span> ~<span class="name">Surface3DSeries</span>.<span class="name">DrawWireframe</span>;
    } <span class="keyword">else</span> {
        <span class="name">surfaceSeries</span>.<span class="name">drawMode</span> <span class="operator">|=</span> <span class="name">Surface3DSeries</span>.<span class="name">DrawWireframe</span>;
        <span class="name">heightSeries</span>.<span class="name">drawMode</span> <span class="operator">|=</span> <span class="name">Surface3DSeries</span>.<span class="name">DrawWireframe</span>;
    }
}</pre></div>
<p>Second button is for surface shading mode, which is controlled with this code:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="name">onClicked</span>: {
    <span class="keyword">if</span> (<span class="name">surfaceSeries</span>.<span class="name">flatShadingEnabled</span> <span class="operator">===</span> <span class="number">true</span>) {
        <span class="name">surfaceSeries</span>.<span class="name">flatShadingEnabled</span> <span class="operator">=</span> <span class="number">false</span>;
        <span class="name">heightSeries</span>.<span class="name">flatShadingEnabled</span> <span class="operator">=</span> <span class="number">false</span>;
        <span class="name">text</span> <span class="operator">=</span> <span class="string">"Show Flat"</span>
    } <span class="keyword">else</span> {
        <span class="name">surfaceSeries</span>.<span class="name">flatShadingEnabled</span> <span class="operator">=</span> <span class="number">true</span>;
        <span class="name">heightSeries</span>.<span class="name">flatShadingEnabled</span> <span class="operator">=</span> <span class="number">true</span>;
        <span class="name">text</span> <span class="operator">=</span> <span class="string">"Show Smooth"</span>
    }
}</pre></div>
<p>Third button is for series visibility, which is controlled with this code:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="name">onClicked</span>: {
    <span class="keyword">if</span> (<span class="name">surfaceSeries</span>.<span class="name">drawMode</span> <span class="operator">&amp;</span> <span class="name">Surface3DSeries</span>.<span class="name">DrawSurface</span>) {
        <span class="name">surfaceSeries</span>.<span class="name">drawMode</span> <span class="operator">&amp;=</span> ~<span class="name">Surface3DSeries</span>.<span class="name">DrawSurface</span>;
        <span class="name">heightSeries</span>.<span class="name">drawMode</span> <span class="operator">&amp;=</span> ~<span class="name">Surface3DSeries</span>.<span class="name">DrawSurface</span>;
    } <span class="keyword">else</span> {
        <span class="name">surfaceSeries</span>.<span class="name">drawMode</span> <span class="operator">|=</span> <span class="name">Surface3DSeries</span>.<span class="name">DrawSurface</span>;
        <span class="name">heightSeries</span>.<span class="name">drawMode</span> <span class="operator">|=</span> <span class="name">Surface3DSeries</span>.<span class="name">DrawSurface</span>;
    }
}</pre></div>
<p>Notice that the <code translate="no">drawMode</code> and <code translate="no">flatShadingEnable</code> properties are set for both series.</p>
<p>Fourth and fifth buttons are for controlling background features.</p>
<p>The last button is for switching between the two series, one of which uses <a href="./qml-qtdatavisualization-heightmapsurfacedataproxy.htm" translate="no">HeightMapSurfaceDataProxy</a> and the other one <a href="./qml-qtdatavisualization-itemmodelsurfacedataproxy.htm" translate="no">ItemModelSurfaceDataProxy</a>. For this we use the following code:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="name">onClicked</span>: {
    <span class="keyword">if</span> (<span class="name">surfaceSeries</span>.<span class="name">visible</span> <span class="operator">===</span> <span class="number">false</span>) {
        <span class="name">surfacePlot</span>.<span class="name">axisY</span>.<span class="name">max</span> <span class="operator">=</span> <span class="number">500.0</span>
        <span class="name">surfaceSeries</span>.<span class="name">visible</span> <span class="operator">=</span> <span class="number">true</span>
        <span class="name">heightSeries</span>.<span class="name">visible</span> <span class="operator">=</span> <span class="number">false</span>
        <span class="name">middleGradient</span>.<span class="name">position</span> <span class="operator">=</span> <span class="number">0.25</span>
        <span class="name">text</span> <span class="operator">=</span> <span class="string">"Switch to Height Map Series"</span>
    } <span class="keyword">else</span> {
        <span class="name">surfacePlot</span>.<span class="name">axisY</span>.<span class="name">max</span> <span class="operator">=</span> <span class="number">250.0</span>
        <span class="name">surfaceSeries</span>.<span class="name">visible</span> <span class="operator">=</span> <span class="number">false</span>
        <span class="name">heightSeries</span>.<span class="name">visible</span> <span class="operator">=</span> <span class="number">true</span>
        <span class="name">middleGradient</span>.<span class="name">position</span> <span class="operator">=</span> <span class="number">0.50</span>
        <span class="name">text</span> <span class="operator">=</span> <span class="string">"Switch to Item Model Series"</span>
    }
}</pre></div>
<p>We also set the maximum value to 500 in model proxy to make the surface flatter and 250 on height map proxy to show exaggerated height. At the same time the middle color position on the gradient is modified to match the value range change.</p>
<a name="example-contents"></a>
<h4 id="example-contents">Example Contents<a class="plink" href="#example-contents" title="Direct link to this headline"></a></h4>
<p><a href="https://code.qt.io/cgit/qt/qtdatavis3d.git/tree/examples/datavisualization/qmlsurface?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@qmlsurface -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>