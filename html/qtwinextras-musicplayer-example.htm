<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Music Player | Qt Windows Extras</title>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtwinextras-index.htm" translate="no">Qt Windows Extras</a></li>
                            <li><a href="./examples-qtwinextras.htm" translate="no">Qt Windows Extras Examples</a></li>
                            <li><a>Music Player</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">Music Player</h1>
<span class="subtitle"></span>
<!-- $$$musicplayer-brief -->
<p>Demonstrates managing Windows DWM features, jump lists, taskbar button overlay, and thumbnail toolbar.</p>
<!-- @@@musicplayer -->
<!-- $$$musicplayer-description -->
<div class="descr"> <a name="details"></a>
<p class="centerAlign"><img alt="Screenshot of the Music Player example" src="./images/qtwinextras-musicplayer-composited.png"></p><p>The Music Player example demonstrates how to use the various features provided by the <a href="./qtwinextras-module.htm" translate="no">QtWinExtras</a> module.</p>
<div class="admonition note">
<p><b>Note: </b>The example uses QMediaPlayer from the QtMultimedia module to play the music, but this article focuses on the parts where <a href="./qtwinextras-module.htm" translate="no">QtWinExtras</a> features are used.</p>
</div>
<a name="dwm-features"></a>
<h4 id="dwm-features">DWM Features<a class="plink" href="#dwm-features" title="Direct link to this headline"></a></h4>
<p>The example uses Windows DWM (Desktop Window Manager) features to visually integrate the window content to the window frame and to make the main window and the volume popup translucent and blurred.</p>
<p>The example applies a different look based on whether composition is enabled or not. When composition is enabled, the main window is made translucent and the window frame is extended to the client area to make the window content integrate seamlessly to the window frame as shown above. When composition is disabled, the colorization color is used as a background color. The following screenshot illustrates how the Music Player example looks when composition is disabled.</p>
<p class="centerAlign"><img alt="Screenshot of the Music Player example" src="./images/qtwinextras-musicplayer-non-composited.png"></p><p>The respective code is a combination of extending or resetting the system frame, adjusting the necessary <a href="./qwidget.htm" translate="no">QWidget</a> attributes, and setting an appropriate style sheet to achieve the desired look.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MusicPlayer<span class="operator">::</span>stylize()
{
    <span class="keyword">if</span> (<span class="type"><a href="./qoperatingsystemversion.htm" translate="no">QOperatingSystemVersion</a></span><span class="operator">::</span>current() <span class="operator">&lt;</span> <span class="type"><a href="./qoperatingsystemversion.htm" translate="no">QOperatingSystemVersion</a></span><span class="operator">::</span>Windows8) {
        <span class="comment">// Set styling options relevant only to Windows 7.</span>
        <span class="keyword">if</span> (<span class="type"><a href="./qtwin.htm" translate="no">QtWin</a></span><span class="operator">::</span>isCompositionEnabled()) {
            <span class="type"><a href="./qtwin.htm" translate="no">QtWin</a></span><span class="operator">::</span>extendFrameIntoClientArea(<span class="keyword">this</span><span class="operator">,</span> <span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="operator">-</span><span class="number">1</span>);
            setAttribute(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>WA_TranslucentBackground<span class="operator">,</span> <span class="keyword">true</span>);
            setAttribute(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>WA_NoSystemBackground<span class="operator">,</span> <span class="keyword">false</span>);
            setStyleSheet(<span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"MusicPlayer { background: transparent; }"</span>));
        } <span class="keyword">else</span> {
            <span class="type"><a href="./qtwin.htm" translate="no">QtWin</a></span><span class="operator">::</span>resetExtendedFrame(<span class="keyword">this</span>);
            setAttribute(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>WA_TranslucentBackground<span class="operator">,</span> <span class="keyword">false</span>);
            setStyleSheet(<span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"MusicPlayer { background: %1; }"</span>)<span class="operator">.</span>arg(<span class="type"><a href="./qtwin.htm" translate="no">QtWin</a></span><span class="operator">::</span>realColorizationColor()<span class="operator">.</span>name()));
        }
        volumeButton<span class="operator">-</span><span class="operator">&gt;</span>stylize();
    }
}</pre></div>
<p>The volume popup does not have a window frame so it is enough to make the popup blurred when composition is enabled. Additionally, a style sheet is applied to get a border that follows the colorization color. Just like for the main window, when composition is disabled, the colorization color is used as a background color.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> VolumeButton<span class="operator">::</span>stylize()
{
    <span class="keyword">if</span> (<span class="type"><a href="./qoperatingsystemversion.htm" translate="no">QOperatingSystemVersion</a></span><span class="operator">::</span>current() <span class="operator">&lt;</span> <span class="type"><a href="./qoperatingsystemversion.htm" translate="no">QOperatingSystemVersion</a></span><span class="operator">::</span>Windows8) {
        <span class="comment">// Set styling options relevant only to Windows 7.</span>
        <span class="keyword">if</span> (<span class="type"><a href="./qtwin.htm" translate="no">QtWin</a></span><span class="operator">::</span>isCompositionEnabled()) {
            <span class="type"><a href="./qtwin.htm" translate="no">QtWin</a></span><span class="operator">::</span>enableBlurBehindWindow(menu);
            <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> css(<span class="string">"QMenu { border: 1px solid %1; border-radius: 2px; background: transparent; }"</span>);
            menu<span class="operator">-</span><span class="operator">&gt;</span>setStyleSheet(css<span class="operator">.</span>arg(<span class="type"><a href="./qtwin.htm" translate="no">QtWin</a></span><span class="operator">::</span>realColorizationColor()<span class="operator">.</span>name()));
        } <span class="keyword">else</span> {
            <span class="type"><a href="./qtwin.htm" translate="no">QtWin</a></span><span class="operator">::</span>disableBlurBehindWindow(menu);
            <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> css(<span class="string">"QMenu { border: 1px solid black; background: %1; }"</span>);
            menu<span class="operator">-</span><span class="operator">&gt;</span>setStyleSheet(css<span class="operator">.</span>arg(<span class="type"><a href="./qtwin.htm" translate="no">QtWin</a></span><span class="operator">::</span>realColorizationColor()<span class="operator">.</span>name()));
        }
    }
}</pre></div>
<p>The example application respects the user's composition settings, reacts to dynamic composition changes, and looks solid regardless of whether composition is enabled or not. It accomplishes this by catching QWinEvent::CompositionChange and QWinEvent::ColorizationChange events and adjusting its looks accordingly.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">bool MusicPlayer<span class="operator">::</span>event(<span class="type"><a href="./qevent.htm" translate="no">QEvent</a></span> <span class="operator">*</span>event)
{
    <span class="keyword">if</span> (event<span class="operator">-</span><span class="operator">&gt;</span>type() <span class="operator">=</span><span class="operator">=</span> <span class="type">QWinEvent</span><span class="operator">::</span>CompositionChange <span class="operator">|</span><span class="operator">|</span> event<span class="operator">-</span><span class="operator">&gt;</span>type() <span class="operator">=</span><span class="operator">=</span> <span class="type">QWinEvent</span><span class="operator">::</span>ColorizationChange)
        stylize();
    <span class="keyword">return</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span><span class="operator">::</span>event(event);
}</pre></div>
<a name="jump-list"></a>
<h4 id="jump-list">Jump List<a class="plink" href="#jump-list" title="Direct link to this headline"></a></h4>
<p>The example creates a custom jump list to provide the user with fast access to recently played music files.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MusicPlayer<span class="operator">::</span>createJumpList()
{
    <span class="type"><a href="./qwinjumplist.htm" translate="no">QWinJumpList</a></span> jumplist;
    jumplist<span class="operator">.</span>recent()<span class="operator">-</span><span class="operator">&gt;</span>setVisible(<span class="keyword">true</span>);
}</pre></div>
<p>To enable the application jump list to show the desired recent files, the corresponding file types are registered using the following helper function.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">static</span> bool associateFileTypes()
{
    <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> displayName <span class="operator">=</span> <span class="type"><a href="./qguiapplication.htm" translate="no">QGuiApplication</a></span><span class="operator">::</span>applicationDisplayName();
    <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> filePath <span class="operator">=</span> <span class="type"><a href="./qcoreapplication.htm" translate="no">QCoreApplication</a></span><span class="operator">::</span>applicationFilePath();
    <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> fileName <span class="operator">=</span> <span class="type"><a href="./qfileinfo.htm" translate="no">QFileInfo</a></span>(filePath)<span class="operator">.</span>fileName();

    <span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> key <span class="operator">=</span> <span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"HKEY_CURRENT_USER\\Software\\Classes\\Applications\\"</span>) <span class="operator">+</span> fileName;
    <span class="type"><a href="./qsettings.htm" translate="no">QSettings</a></span> settings(key<span class="operator">,</span> <span class="type"><a href="./qsettings.htm" translate="no">QSettings</a></span><span class="operator">::</span>NativeFormat);
    <span class="keyword">if</span> (settings<span class="operator">.</span>status() <span class="operator">!</span><span class="operator">=</span> <span class="type"><a href="./qsettings.htm" translate="no">QSettings</a></span><span class="operator">::</span>NoError) {
        <a href="./qtglobal.htm#qWarning" translate="no">qWarning</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"Cannot access registry key"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> key;
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }
    settings<span class="operator">.</span>setValue(<span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"FriendlyAppName"</span>)<span class="operator">,</span> displayName);

    settings<span class="operator">.</span>beginGroup(<span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"SupportedTypes"</span>));
    <span class="type"><a href="./qmimedatabase.htm" translate="no">QMimeDatabase</a></span> mimeDatabase;
    <span class="keyword">const</span> <span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> supportedMimeTypes <span class="operator">=</span> MusicPlayer<span class="operator">::</span>supportedMimeTypes();
    <span class="keyword">for</span> (<span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> <span class="operator">&amp;</span>fileType : supportedMimeTypes) {
        <span class="keyword">const</span> <span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> suffixes <span class="operator">=</span> mimeDatabase<span class="operator">.</span>mimeTypeForName(fileType)<span class="operator">.</span>suffixes();
        <span class="keyword">for</span> (<span class="type"><a href="./qstring.htm" translate="no">QString</a></span> suffix : suffixes) {
            suffix<span class="operator">.</span>prepend(<span class="char">'.'</span>);
            settings<span class="operator">.</span>setValue(suffix<span class="operator">,</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span>());
        }
    }
    settings<span class="operator">.</span>endGroup();

    settings<span class="operator">.</span>beginGroup(<span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"shell"</span>));
    settings<span class="operator">.</span>beginGroup(<span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"open"</span>));
    settings<span class="operator">.</span>setValue(<span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"FriendlyAppName"</span>)<span class="operator">,</span> displayName);
    settings<span class="operator">.</span>beginGroup(<span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"Command"</span>));
    settings<span class="operator">.</span>setValue(<span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"."</span>)<span class="operator">,</span>
                      u<span class="char">'"'</span> <span class="operator">+</span> <span class="type"><a href="./qdir.htm" translate="no">QDir</a></span><span class="operator">::</span>toNativeSeparators(filePath) <span class="operator">+</span> <span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">"\" \"%1\""</span>));

    <span class="keyword">return</span> <span class="keyword">true</span>;
}</pre></div>
<a name="taskbar-overlay-and-progress"></a>
<h4 id="taskbar-overlay-and-progress">Taskbar Overlay and Progress<a class="plink" href="#taskbar-overlay-and-progress" title="Direct link to this headline"></a></h4>
<p>The example uses Windows Taskbar for two things; it sets an overlay icon that represents the current music playback state, and it indicates the playback progress in the taskbar button.</p>
<p class="centerAlign"><img alt="Screenshot of the Music Player taskbar" src="./images/qtwinextras-musicplayer-taskbar.png"></p><p>The following snippets show how the taskbar button is prepared.</p>
<p>For the taskbar and the thumbnail toolbar to work, a native window handle must be set by passing an instance of <code translate="no">QWindow</code> to <code translate="no">QWinTaskbarButton::setWindow()</code> or <code translate="no">QWinThumbnailToolBar::setWindow()</code>, respectively. This instance is created in the process of <code translate="no">QWidget::show()</code> and can be retrieved by calling <code translate="no">QWidget::windowHandle()</code> afterwards. We override <code translate="no">QWidget::showEvent()</code> for this purpose:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MusicPlayer<span class="operator">::</span>showEvent(<span class="type"><a href="./qshowevent.htm" translate="no">QShowEvent</a></span> <span class="operator">*</span>event)
{
    <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span><span class="operator">::</span>showEvent(event);
    <span class="keyword">if</span> (<span class="operator">!</span>taskbarButton<span class="operator">-</span><span class="operator">&gt;</span>window()) {
        <span class="keyword">auto</span> window <span class="operator">=</span> windowHandle();
        taskbarButton<span class="operator">-</span><span class="operator">&gt;</span>setWindow(window);
        thumbnailToolBar<span class="operator">-</span><span class="operator">&gt;</span>setWindow(window);
    }
}</pre></div>
<p>The playback progress is wired directly to the taskbar progress indicator by using signals and slots.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MusicPlayer<span class="operator">::</span>createTaskbar()
{
    taskbarButton <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qwintaskbarbutton.htm" translate="no">QWinTaskbarButton</a></span>(<span class="keyword">this</span>);

    taskbarProgress <span class="operator">=</span> taskbarButton<span class="operator">-</span><span class="operator">&gt;</span>progress();
    connect(positionSlider<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qabstractslider.htm" translate="no">QAbstractSlider</a></span><span class="operator">::</span>valueChanged<span class="operator">,</span> taskbarProgress<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwintaskbarprogress.htm" translate="no">QWinTaskbarProgress</a></span><span class="operator">::</span>setValue);
    connect(positionSlider<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qabstractslider.htm" translate="no">QAbstractSlider</a></span><span class="operator">::</span>rangeChanged<span class="operator">,</span> taskbarProgress<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwintaskbarprogress.htm" translate="no">QWinTaskbarProgress</a></span><span class="operator">::</span>setRange);

    connect(<span class="operator">&amp;</span>mediaPlayer<span class="operator">,</span> <span class="operator">&amp;</span><span class="type">QMediaPlayer</span><span class="operator">::</span>stateChanged<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MusicPlayer<span class="operator">::</span>updateTaskbar);
}</pre></div>
<p>The overlay icon and the progress indicator are updated whenever the state of the music playback changes.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MusicPlayer<span class="operator">::</span>updateTaskbar()
{
    <span class="keyword">switch</span> (mediaPlayer<span class="operator">.</span>state()) {
    <span class="keyword">case</span> <span class="type">QMediaPlayer</span><span class="operator">::</span>PlayingState:
        taskbarButton<span class="operator">-</span><span class="operator">&gt;</span>setOverlayIcon(style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="./qstyle.htm" translate="no">QStyle</a></span><span class="operator">::</span>SP_MediaPlay));
        taskbarProgress<span class="operator">-</span><span class="operator">&gt;</span>show();
        taskbarProgress<span class="operator">-</span><span class="operator">&gt;</span>resume();
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="type">QMediaPlayer</span><span class="operator">::</span>PausedState:
        taskbarButton<span class="operator">-</span><span class="operator">&gt;</span>setOverlayIcon(style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="./qstyle.htm" translate="no">QStyle</a></span><span class="operator">::</span>SP_MediaPause));
        taskbarProgress<span class="operator">-</span><span class="operator">&gt;</span>show();
        taskbarProgress<span class="operator">-</span><span class="operator">&gt;</span>pause();
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="type">QMediaPlayer</span><span class="operator">::</span>StoppedState:
        taskbarButton<span class="operator">-</span><span class="operator">&gt;</span>setOverlayIcon(style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="./qstyle.htm" translate="no">QStyle</a></span><span class="operator">::</span>SP_MediaStop));
        taskbarProgress<span class="operator">-</span><span class="operator">&gt;</span>hide();
        <span class="keyword">break</span>;
    }
}</pre></div>
<a name="thumbnail-toolbar"></a>
<h4 id="thumbnail-toolbar">Thumbnail Toolbar<a class="plink" href="#thumbnail-toolbar" title="Direct link to this headline"></a></h4>
<p class="centerAlign"><img alt="Screenshot of the Music Player thumbnail" src="./images/qtwinextras-musicplayer-thumbnail.png"></p><p>The Windows Thumbnail Toolbar is used for providing basic music playback controls. These controls can be used to control the application without having to activate the application.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MusicPlayer<span class="operator">::</span>createThumbnailToolBar()
{
    thumbnailToolBar <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qwinthumbnailtoolbar.htm" translate="no">QWinThumbnailToolBar</a></span>(<span class="keyword">this</span>);

    playToolButton <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qwinthumbnailtoolbutton.htm" translate="no">QWinThumbnailToolButton</a></span>(thumbnailToolBar);
    playToolButton<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(<span class="keyword">false</span>);
    playToolButton<span class="operator">-</span><span class="operator">&gt;</span>setToolTip(tr(<span class="string">"Play"</span>));
    playToolButton<span class="operator">-</span><span class="operator">&gt;</span>setIcon(style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="./qstyle.htm" translate="no">QStyle</a></span><span class="operator">::</span>SP_MediaPlay));
    connect(playToolButton<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwinthumbnailtoolbutton.htm" translate="no">QWinThumbnailToolButton</a></span><span class="operator">::</span>clicked<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MusicPlayer<span class="operator">::</span>togglePlayback);

    forwardToolButton <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qwinthumbnailtoolbutton.htm" translate="no">QWinThumbnailToolButton</a></span>(thumbnailToolBar);
    forwardToolButton<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(<span class="keyword">false</span>);
    forwardToolButton<span class="operator">-</span><span class="operator">&gt;</span>setToolTip(tr(<span class="string">"Fast forward"</span>));
    forwardToolButton<span class="operator">-</span><span class="operator">&gt;</span>setIcon(style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="./qstyle.htm" translate="no">QStyle</a></span><span class="operator">::</span>SP_MediaSeekForward));
    connect(forwardToolButton<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwinthumbnailtoolbutton.htm" translate="no">QWinThumbnailToolButton</a></span><span class="operator">::</span>clicked<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MusicPlayer<span class="operator">::</span>seekForward);

    backwardToolButton <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qwinthumbnailtoolbutton.htm" translate="no">QWinThumbnailToolButton</a></span>(thumbnailToolBar);
    backwardToolButton<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(<span class="keyword">false</span>);
    backwardToolButton<span class="operator">-</span><span class="operator">&gt;</span>setToolTip(tr(<span class="string">"Rewind"</span>));
    backwardToolButton<span class="operator">-</span><span class="operator">&gt;</span>setIcon(style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="./qstyle.htm" translate="no">QStyle</a></span><span class="operator">::</span>SP_MediaSeekBackward));
    connect(backwardToolButton<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwinthumbnailtoolbutton.htm" translate="no">QWinThumbnailToolButton</a></span><span class="operator">::</span>clicked<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MusicPlayer<span class="operator">::</span>seekBackward);

    thumbnailToolBar<span class="operator">-</span><span class="operator">&gt;</span>addButton(backwardToolButton);
    thumbnailToolBar<span class="operator">-</span><span class="operator">&gt;</span>addButton(playToolButton);
    thumbnailToolBar<span class="operator">-</span><span class="operator">&gt;</span>addButton(forwardToolButton);

    connect(<span class="operator">&amp;</span>mediaPlayer<span class="operator">,</span> <span class="operator">&amp;</span><span class="type">QMediaPlayer</span><span class="operator">::</span>positionChanged<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MusicPlayer<span class="operator">::</span>updateThumbnailToolBar);
    connect(<span class="operator">&amp;</span>mediaPlayer<span class="operator">,</span> <span class="operator">&amp;</span><span class="type">QMediaPlayer</span><span class="operator">::</span>durationChanged<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MusicPlayer<span class="operator">::</span>updateThumbnailToolBar);
    connect(<span class="operator">&amp;</span>mediaPlayer<span class="operator">,</span> <span class="operator">&amp;</span><span class="type">QMediaPlayer</span><span class="operator">::</span>stateChanged<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MusicPlayer<span class="operator">::</span>updateThumbnailToolBar);
}</pre></div>
<p>The buttons in the thumbnail toolbar are updated accordingly whenever the state of the music playback changes.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MusicPlayer<span class="operator">::</span>updateThumbnailToolBar()
{
    playToolButton<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(mediaPlayer<span class="operator">.</span>duration() <span class="operator">&gt;</span> <span class="number">0</span>);
    backwardToolButton<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(mediaPlayer<span class="operator">.</span>position() <span class="operator">&gt;</span> <span class="number">0</span>);
    forwardToolButton<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(mediaPlayer<span class="operator">.</span>position() <span class="operator">&lt;</span> mediaPlayer<span class="operator">.</span>duration());

    <span class="keyword">if</span> (mediaPlayer<span class="operator">.</span>state() <span class="operator">=</span><span class="operator">=</span> <span class="type">QMediaPlayer</span><span class="operator">::</span>PlayingState) {
        playToolButton<span class="operator">-</span><span class="operator">&gt;</span>setToolTip(tr(<span class="string">"Pause"</span>));
        playToolButton<span class="operator">-</span><span class="operator">&gt;</span>setIcon(style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="./qstyle.htm" translate="no">QStyle</a></span><span class="operator">::</span>SP_MediaPause));
    } <span class="keyword">else</span> {
        playToolButton<span class="operator">-</span><span class="operator">&gt;</span>setToolTip(tr(<span class="string">"Play"</span>));
        playToolButton<span class="operator">-</span><span class="operator">&gt;</span>setIcon(style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="./qstyle.htm" translate="no">QStyle</a></span><span class="operator">::</span>SP_MediaPlay));
    }
}</pre></div>
<p><a href="https://code.qt.io/cgit/qt/qtwinextras.git/tree/examples/winextras/musicplayer?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@musicplayer -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>