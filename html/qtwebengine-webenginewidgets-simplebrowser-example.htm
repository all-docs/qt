<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WebEngine Widgets Simple Browser Example | Qt WebEngine</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtwebengine-webenginewidgets-simplebrowser-example.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtwebengine-index.htm" translate="no">Qt WebEngine</a></li>
                            <li><a href="./webengine-widgetexamples.htm" translate="no">Qt WebEngine Widgets Examples</a></li>
                            <li><a>WebEngine Widgets Simple Browser Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">WebEngine Widgets Simple Browser Example</h1>
<span class="subtitle"></span>
<!-- $$$webenginewidgets/simplebrowser-brief -->
<p>A simple browser based on Qt WebEngine Widgets.</p>
<!-- @@@webenginewidgets/simplebrowser -->
<!-- $$$webenginewidgets/simplebrowser-description -->
<div class="descr"> <a name="details"></a>
<p class="centerAlign"><img alt="" src="./images/simplebrowser.png"></p><p><i>Simple Browser</i> demonstrates how to use the <a href="./qtwebenginewidgets-module.htm" translate="no">Qt WebEngine C++ classes</a> to develop a small Web browser application that contains the following elements:</p>
<ul>
<li>Menu bar for opening stored pages and managing windows and tabs.</li>
<li>Navigation bar for entering a URL and for moving backward and forward in the web page browsing history.</li>
<li>Multi-tab area for displaying web content within tabs.</li>
<li>Status bar for displaying hovered links.</li>
<li>A simple download manager.</li>
</ul>
<p>The web content can be opened in new tabs or separate windows. HTTP and proxy authentication can be used for accessing web pages.</p>
<a name="running-the-example"></a>
<h4 id="running-the-example">Running the Example<a class="plink" href="#running-the-example" title="Direct link to this headline"></a></h4>
<p>To run the example from <a href="http://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b>Welcome</b> mode and select the example from <b>Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<a name="class-hierarchy"></a>
<h4 id="class-hierarchy">Class Hierarchy<a class="plink" href="#class-hierarchy" title="Direct link to this headline"></a></h4>
<p>We start with sketching a diagram of the main classes that we are going to implement:</p>
<p class="centerAlign"><img alt="" src="./images/simplebrowser-model.png"></p><ul>
<li><code translate="no">Browser</code> is a class managing the application windows.</li>
<li><code translate="no">BrowserWindow</code> is a <a href="./qmainwindow.htm" translate="no">QMainWindow</a> showing the menu, a navigation bar, <code translate="no">TabWidget</code>, and a status bar.</li>
<li><code translate="no">TabWidget</code> is a <a href="./qtabwidget.htm" translate="no">QTabWidget</a> and contains one or multiple browser tabs.</li>
<li><code translate="no">WebView</code> is a <a href="./qwebengineview.htm" translate="no">QWebEngineView</a>, provides a view for <code translate="no">WebPage</code>, and is added as a tab in <code translate="no">TabWidget</code>.</li>
<li><code translate="no">WebPage</code> is a <a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a> that represents website content.</li>
</ul>
<p>Additionally, we will implement some auxiliary classes:</p>
<ul>
<li><code translate="no">WebPopupWindow</code> is a <a href="./qwidget.htm" translate="no">QWidget</a> for showing popup windows.</li>
<li><code translate="no">DownloadManagerWidget</code> is a <a href="./qwidget.htm" translate="no">QWidget</a> implementing the downloads list.</li>
</ul>
<a name="creating-the-browser-main-window"></a>
<h4 id="creating-the-browser-main-window">Creating the Browser Main Window<a class="plink" href="#creating-the-browser-main-window" title="Direct link to this headline"></a></h4>
<p>This example supports multiple main windows that are owned by a <code translate="no">Browser</code> object. This class also owns the <code translate="no">DownloadManagerWidget</code> and could be used for further functionality, such as bookmarks and history managers.</p>
<p>In <code translate="no">main.cpp</code>, we create the first <code translate="no">BrowserWindow</code> instance and add it to the <code translate="no">Browser</code> object. If no arguments are passed on the command line, we open the <a href="http://qt.io/" translate="no">Qt Homepage</a>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">int</span> main(<span class="type">int</span> argc<span class="operator">,</span> <span class="type">char</span> <span class="operator">*</span><span class="operator">*</span>argv)
{
    <span class="type"><a href="./qcoreapplication.htm" translate="no">QCoreApplication</a></span><span class="operator">::</span>setOrganizationName(<span class="string">"QtExamples"</span>);
    <span class="type"><a href="./qcoreapplication.htm" translate="no">QCoreApplication</a></span><span class="operator">::</span>setAttribute(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>AA_EnableHighDpiScaling);
    <span class="type"><a href="./qcoreapplication.htm" translate="no">QCoreApplication</a></span><span class="operator">::</span>setAttribute(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>AA_UseHighDpiPixmaps);

    <span class="type"><a href="./qapplication.htm" translate="no">QApplication</a></span> app(argc<span class="operator">,</span> argv);
    app<span class="operator">.</span>setWindowIcon(<span class="type"><a href="./qicon.htm" translate="no">QIcon</a></span>(<span class="type"><a href="./qstring.htm#QStringLiteral" translate="no">QStringLiteral</a></span>(<span class="string">":AppLogoColor.png"</span>)));

    <span class="type"><a href="./qwebenginesettings.htm" translate="no">QWebEngineSettings</a></span><span class="operator">::</span>defaultSettings()<span class="operator">-</span><span class="operator">&gt;</span>setAttribute(<span class="type"><a href="./qwebenginesettings.htm" translate="no">QWebEngineSettings</a></span><span class="operator">::</span>PluginsEnabled<span class="operator">,</span> <span class="keyword">true</span>);
<span class="preprocessor">#if QT_VERSION &gt;= QT_VERSION_CHECK(5, 13, 0)</span>
    <span class="type"><a href="./qwebenginesettings.htm" translate="no">QWebEngineSettings</a></span><span class="operator">::</span>defaultSettings()<span class="operator">-</span><span class="operator">&gt;</span>setAttribute(<span class="type"><a href="./qwebenginesettings.htm" translate="no">QWebEngineSettings</a></span><span class="operator">::</span>DnsPrefetchEnabled<span class="operator">,</span> <span class="keyword">true</span>);
    <span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>defaultProfile()<span class="operator">-</span><span class="operator">&gt;</span>setUseForGlobalCertificateVerification();
<span class="preprocessor">#endif</span>

    <span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span> url <span class="operator">=</span> commandLineUrlArgument();

    Browser browser;
    BrowserWindow <span class="operator">*</span>window <span class="operator">=</span> browser<span class="operator">.</span>createWindow();
    window<span class="operator">-</span><span class="operator">&gt;</span>tabWidget()<span class="operator">-</span><span class="operator">&gt;</span>setUrl(url);

    <span class="keyword">return</span> app<span class="operator">.</span>exec();
}</pre></div>
<a name="creating-tabs"></a>
<h4 id="creating-tabs">Creating Tabs<a class="plink" href="#creating-tabs" title="Direct link to this headline"></a></h4>
<p>The <code translate="no">BrowserWindow</code> constructor initializes all the necessary user interface related objects. The <code translate="no">centralWidget</code> of <code translate="no">BrowserWindow</code> contains an instance of <code translate="no">TabWidget</code>. The <code translate="no">TabWidget</code> contains one or several <code translate="no">WebView</code> instances as tabs, and delegates it's signals and slots to the currently selected one:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> TabWidget : <span class="keyword">public</span> <span class="type"><a href="./qtabwidget.htm" translate="no">QTabWidget</a></span>
{
    ...
<span class="keyword">signals</span>:
    <span class="comment">// current tab/page signals</span>
    <span class="type">void</span> linkHovered(<span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> <span class="operator">&amp;</span>link);
    <span class="type">void</span> loadProgress(<span class="type">int</span> progress);
    <span class="type">void</span> titleChanged(<span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> <span class="operator">&amp;</span>title);
    <span class="type">void</span> urlChanged(<span class="keyword">const</span> <span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span> <span class="operator">&amp;</span>url);
    <span class="type">void</span> favIconChanged(<span class="keyword">const</span> <span class="type"><a href="./qicon.htm" translate="no">QIcon</a></span> <span class="operator">&amp;</span>icon);
    <span class="type">void</span> webActionEnabledChanged(<span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction action<span class="operator">,</span> bool enabled);
    <span class="type">void</span> devToolsRequested(<span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span> <span class="operator">*</span>source);
<span class="preprocessor">#if QT_VERSION &gt;= QT_VERSION_CHECK(5, 14, 0)</span>
    <span class="type">void</span> findTextFinished(<span class="keyword">const</span> <span class="type"><a href="./qwebenginefindtextresult.htm" translate="no">QWebEngineFindTextResult</a></span> <span class="operator">&amp;</span>result);
<span class="preprocessor">#endif</span>

<span class="keyword">public</span> <span class="keyword">slots</span>:
    <span class="comment">// current tab/page slots</span>
    <span class="type">void</span> setUrl(<span class="keyword">const</span> <span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span> <span class="operator">&amp;</span>url);
    <span class="type">void</span> triggerWebPageAction(<span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction action);
    ...
};</pre></div>
<p>Each tab contains an instance of <code translate="no">WebView</code>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">WebView <span class="operator">*</span>TabWidget<span class="operator">::</span>createTab()
{
    WebView <span class="operator">*</span>webView <span class="operator">=</span> createBackgroundTab();
    setCurrentWidget(webView);
    <span class="keyword">return</span> webView;
}

WebView <span class="operator">*</span>TabWidget<span class="operator">::</span>createBackgroundTab()
{
    WebView <span class="operator">*</span>webView <span class="operator">=</span> <span class="keyword">new</span> WebView;
    WebPage <span class="operator">*</span>webPage <span class="operator">=</span> <span class="keyword">new</span> WebPage(m_profile<span class="operator">,</span> webView);
    webView<span class="operator">-</span><span class="operator">&gt;</span>setPage(webPage);
    setupView(webView);
    <span class="type">int</span> index <span class="operator">=</span> addTab(webView<span class="operator">,</span> tr(<span class="string">"(Untitled)"</span>));
    setTabIcon(index<span class="operator">,</span> webView<span class="operator">-</span><span class="operator">&gt;</span>favIcon());
    <span class="comment">// Workaround for QTBUG-61770</span>
    webView<span class="operator">-</span><span class="operator">&gt;</span>resize(currentWidget()<span class="operator">-</span><span class="operator">&gt;</span>size());
    webView<span class="operator">-</span><span class="operator">&gt;</span>show();
    <span class="keyword">return</span> webView;
}</pre></div>
<p>In <code translate="no">TabWidget::setupView()</code>, we make sure that the <code translate="no">TabWidget</code> always forwards the signals of the currently selected <code translate="no">WebView</code>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> TabWidget<span class="operator">::</span>setupView(WebView <span class="operator">*</span>webView)
{
    <span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span> <span class="operator">*</span>webPage <span class="operator">=</span> webView<span class="operator">-</span><span class="operator">&gt;</span>page();

    connect(webView<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebengineview.htm" translate="no">QWebEngineView</a></span><span class="operator">::</span>titleChanged<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> <span class="operator">&amp;</span>title) {
        <span class="type">int</span> index <span class="operator">=</span> indexOf(webView);
        <span class="keyword">if</span> (index <span class="operator">!</span><span class="operator">=</span> <span class="operator">-</span><span class="number">1</span>) {
            setTabText(index<span class="operator">,</span> title);
            setTabToolTip(index<span class="operator">,</span> title);
        }
        <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> index)
            <span class="keyword">emit</span> titleChanged(title);
    });
    connect(webView<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebengineview.htm" translate="no">QWebEngineView</a></span><span class="operator">::</span>urlChanged<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span> <span class="operator">&amp;</span>url) {
        <span class="type">int</span> index <span class="operator">=</span> indexOf(webView);
        <span class="keyword">if</span> (index <span class="operator">!</span><span class="operator">=</span> <span class="operator">-</span><span class="number">1</span>)
            tabBar()<span class="operator">-</span><span class="operator">&gt;</span>setTabData(index<span class="operator">,</span> url);
        <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> index)
            <span class="keyword">emit</span> urlChanged(url);
    });
    connect(webView<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebengineview.htm" translate="no">QWebEngineView</a></span><span class="operator">::</span>loadProgress<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="type">int</span> progress) {
        <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> indexOf(webView))
            <span class="keyword">emit</span> loadProgress(progress);
    });
    connect(webPage<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>linkHovered<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> <span class="operator">&amp;</span>url) {
        <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> indexOf(webView))
            <span class="keyword">emit</span> linkHovered(url);
    });
    connect(webView<span class="operator">,</span> <span class="operator">&amp;</span>WebView<span class="operator">::</span>favIconChanged<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="./qicon.htm" translate="no">QIcon</a></span> <span class="operator">&amp;</span>icon) {
        <span class="type">int</span> index <span class="operator">=</span> indexOf(webView);
        <span class="keyword">if</span> (index <span class="operator">!</span><span class="operator">=</span> <span class="operator">-</span><span class="number">1</span>)
            setTabIcon(index<span class="operator">,</span> icon);
        <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> index)
            <span class="keyword">emit</span> favIconChanged(icon);
    });
    connect(webView<span class="operator">,</span> <span class="operator">&amp;</span>WebView<span class="operator">::</span>webActionEnabledChanged<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction action<span class="operator">,</span> bool enabled) {
        <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span>  indexOf(webView))
            <span class="keyword">emit</span> webActionEnabledChanged(action<span class="operator">,</span>enabled);
    });
    connect(webPage<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>windowCloseRequested<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>() {
        <span class="type">int</span> index <span class="operator">=</span> indexOf(webView);
        <span class="keyword">if</span> (webView<span class="operator">-</span><span class="operator">&gt;</span>page()<span class="operator">-</span><span class="operator">&gt;</span>inspectedPage())
            window()<span class="operator">-</span><span class="operator">&gt;</span>close();
        <span class="keyword">else</span> <span class="keyword">if</span> (index <span class="operator">&gt;</span><span class="operator">=</span> <span class="number">0</span>)
            closeTab(index);
    });
    connect(webView<span class="operator">,</span> <span class="operator">&amp;</span>WebView<span class="operator">::</span>devToolsRequested<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>TabWidget<span class="operator">::</span>devToolsRequested);
<span class="preprocessor">#if QT_VERSION &gt;= QT_VERSION_CHECK(5, 14, 0)</span>
    connect(webPage<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>findTextFinished<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="./qwebenginefindtextresult.htm" translate="no">QWebEngineFindTextResult</a></span> <span class="operator">&amp;</span>result) {
        <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> indexOf(webView))
            <span class="keyword">emit</span> findTextFinished(result);
    });
<span class="preprocessor">#endif</span>
}</pre></div>
<a name="implementing-webview-functionality"></a>
<h4 id="implementing-webview-functionality">Implementing WebView Functionality<a class="plink" href="#implementing-webview-functionality" title="Direct link to this headline"></a></h4>
<p>The <code translate="no">WebView</code> is derived from <a href="./qwebengineview.htm" translate="no">QWebEngineView</a> to support the following functionality:</p>
<ul>
<li>Displaying error messages in case <code translate="no">renderProcess</code> dies</li>
<li>Handling <code translate="no">createWindow</code> requests</li>
<li>Adding custom menu items to context menus</li>
</ul>
<p>First, we create the <a href="./qml-qtwebview-webview.htm" translate="no">WebView</a> with the necessary methods and signals:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> WebView : <span class="keyword">public</span> <span class="type"><a href="./qwebengineview.htm" translate="no">QWebEngineView</a></span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    WebView(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);
    ...
<span class="keyword">protected</span>:
    <span class="type">void</span> contextMenuEvent(<span class="type"><a href="./qcontextmenuevent.htm" translate="no">QContextMenuEvent</a></span> <span class="operator">*</span>event) override;
    <span class="type"><a href="./qwebengineview.htm" translate="no">QWebEngineView</a></span> <span class="operator">*</span>createWindow(<span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebWindowType type) override;

<span class="keyword">signals</span>:
    <span class="type">void</span> webActionEnabledChanged(<span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction webAction<span class="operator">,</span> bool enabled);
    ...
};</pre></div>
<a name="displaying-error-messages"></a>
<h5 id="displaying-error-messages">Displaying Error Messages<a class="plink" href="#displaying-error-messages" title="Direct link to this headline"></a></h5>
<p>If the render process is terminated, we display a <a href="./qmessagebox.htm" translate="no">QMessageBox</a> with an error code, and then we reload the page:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">WebView<span class="operator">::</span>WebView(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>parent)
    : <span class="type"><a href="./qwebengineview.htm" translate="no">QWebEngineView</a></span>(parent)
    <span class="operator">,</span> m_loadProgress(<span class="number">100</span>)
{
    ...
    connect(<span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebengineview.htm" translate="no">QWebEngineView</a></span><span class="operator">::</span>renderProcessTerminated<span class="operator">,</span>
            <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span>(<span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>RenderProcessTerminationStatus termStatus<span class="operator">,</span> <span class="type">int</span> statusCode) {
        <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> status;
        <span class="keyword">switch</span> (termStatus) {
        <span class="keyword">case</span> <span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>NormalTerminationStatus:
            status <span class="operator">=</span> tr(<span class="string">"Render process normal exit"</span>);
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>AbnormalTerminationStatus:
            status <span class="operator">=</span> tr(<span class="string">"Render process abnormal exit"</span>);
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>CrashedTerminationStatus:
            status <span class="operator">=</span> tr(<span class="string">"Render process crashed"</span>);
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>KilledTerminationStatus:
            status <span class="operator">=</span> tr(<span class="string">"Render process killed"</span>);
            <span class="keyword">break</span>;
        }
        <span class="type"><a href="./qmessagebox.htm" translate="no">QMessageBox</a></span><span class="operator">::</span>StandardButton btn <span class="operator">=</span> <span class="type"><a href="./qmessagebox.htm" translate="no">QMessageBox</a></span><span class="operator">::</span>question(window()<span class="operator">,</span> status<span class="operator">,</span>
                                                   tr(<span class="string">"Render process exited with code: %1\n"</span>
                                                      <span class="string">"Do you want to reload the page ?"</span>)<span class="operator">.</span>arg(statusCode));
        <span class="keyword">if</span> (btn <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="./qmessagebox.htm" translate="no">QMessageBox</a></span><span class="operator">::</span>Yes)
            <span class="type"><a href="./qtimer.htm" translate="no">QTimer</a></span><span class="operator">::</span>singleShot(<span class="number">0</span><span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span> { reload(); });
    });
}</pre></div>
<a name="managing-webwindows"></a>
<h5 id="managing-webwindows">Managing WebWindows<a class="plink" href="#managing-webwindows" title="Direct link to this headline"></a></h5>
<p>The loaded page might want to create windows of the type <a href="./qwebenginepage.htm#WebWindowType-enum" translate="no">QWebEnginePage::WebWindowType</a>, for example, when a JavaScript program requests to open a document in a new window or dialog. This is handled by overriding <code translate="no">QWebView::createWindow()</code>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qwebengineview.htm" translate="no">QWebEngineView</a></span> <span class="operator">*</span>WebView<span class="operator">::</span>createWindow(<span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebWindowType type)
{
    BrowserWindow <span class="operator">*</span>mainWindow <span class="operator">=</span> qobject_cast<span class="operator">&lt;</span>BrowserWindow<span class="operator">*</span><span class="operator">&gt;</span>(window());
    <span class="keyword">if</span> (<span class="operator">!</span>mainWindow)
        <span class="keyword">return</span> nullptr;

    <span class="keyword">switch</span> (type) {
    <span class="keyword">case</span> <span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebBrowserTab: {
        <span class="keyword">return</span> mainWindow<span class="operator">-</span><span class="operator">&gt;</span>tabWidget()<span class="operator">-</span><span class="operator">&gt;</span>createTab();
    }</pre></div>
<p>In case of <code translate="no">QWebEnginePage::WebDialog</code>, we create an instance of a custom <code translate="no">WebPopupWindow</code> class:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> WebPopupWindow : <span class="keyword">public</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    WebPopupWindow(<span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span> <span class="operator">*</span>profile);
    WebView <span class="operator">*</span>view() <span class="keyword">const</span>;

<span class="keyword">private</span> <span class="keyword">slots</span>:
    <span class="type">void</span> handleGeometryChangeRequested(<span class="keyword">const</span> <span class="type"><a href="./qrect.htm" translate="no">QRect</a></span> <span class="operator">&amp;</span>newGeometry);

<span class="keyword">private</span>:
    <span class="type"><a href="./qlineedit.htm" translate="no">QLineEdit</a></span> <span class="operator">*</span>m_urlLineEdit;
    <span class="type"><a href="./qaction.htm" translate="no">QAction</a></span> <span class="operator">*</span>m_favAction;
    WebView <span class="operator">*</span>m_view;
};</pre></div>
<a name="adding-context-menu-items"></a>
<h5 id="adding-context-menu-items">Adding Context Menu Items<a class="plink" href="#adding-context-menu-items" title="Direct link to this headline"></a></h5>
<p>We add a menu item to the context menu, so that users can right-click to have an inspector opened in a new window. We override <a href="./qwebengineview.htm#contextMenuEvent" translate="no">QWebEngineView::contextMenuEvent</a> and use <a href="./qwebenginepage.htm#createStandardContextMenu" translate="no">QWebEnginePage::createStandardContextMenu</a> to create a default <a href="./qmenu.htm" translate="no">QMenu</a> with a default list of <a href="./qwebenginepage.htm#WebAction-enum" translate="no">QWebEnginePage::WebAction</a> actions.</p>
<p>The default name for <a href="./qwebenginepage.htm#WebAction-enum" translate="no">QWebEnginePage::InspectElement</a> action is <b translate="no">Inspect</b>. For clarity, we rename it to <b translate="no">Open Inspector In New Window</b> when there is no Inspector present yet, and <b translate="no">Inspect Element</b> when it's already created.</p>
<p>We also check if the <a href="./qwebenginepage.htm#WebAction-enum" translate="no">QWebEnginePage::ViewSource</a> action is in the menu, because if it's not we have to add a separator as well.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> WebView<span class="operator">::</span>contextMenuEvent(<span class="type"><a href="./qcontextmenuevent.htm" translate="no">QContextMenuEvent</a></span> <span class="operator">*</span>event)
{
    <span class="type"><a href="./qmenu.htm" translate="no">QMenu</a></span> <span class="operator">*</span>menu <span class="operator">=</span> page()<span class="operator">-</span><span class="operator">&gt;</span>createStandardContextMenu();
    <span class="keyword">const</span> <span class="type"><a href="./qlist.htm" translate="no">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="./qaction.htm" translate="no">QAction</a></span> <span class="operator">*</span><span class="operator">&gt;</span> actions <span class="operator">=</span> menu<span class="operator">-</span><span class="operator">&gt;</span>actions();
    <span class="keyword">auto</span> inspectElement <span class="operator">=</span> std<span class="operator">::</span>find(actions<span class="operator">.</span>cbegin()<span class="operator">,</span> actions<span class="operator">.</span>cend()<span class="operator">,</span> page()<span class="operator">-</span><span class="operator">&gt;</span>action(<span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>InspectElement));
    <span class="keyword">if</span> (inspectElement <span class="operator">=</span><span class="operator">=</span> actions<span class="operator">.</span>cend()) {
        <span class="keyword">auto</span> viewSource <span class="operator">=</span> std<span class="operator">::</span>find(actions<span class="operator">.</span>cbegin()<span class="operator">,</span> actions<span class="operator">.</span>cend()<span class="operator">,</span> page()<span class="operator">-</span><span class="operator">&gt;</span>action(<span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>ViewSource));
        <span class="keyword">if</span> (viewSource <span class="operator">=</span><span class="operator">=</span> actions<span class="operator">.</span>cend())
            menu<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();

        <span class="type"><a href="./qaction.htm" translate="no">QAction</a></span> <span class="operator">*</span>action <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qaction.htm" translate="no">QAction</a></span>(menu);
        action<span class="operator">-</span><span class="operator">&gt;</span>setText(<span class="string">"Open inspector in new window"</span>);
        connect(action<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qaction.htm" translate="no">QAction</a></span><span class="operator">::</span>triggered<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span>() { <span class="keyword">emit</span> devToolsRequested(page()); });

        <span class="type"><a href="./qaction.htm" translate="no">QAction</a></span> <span class="operator">*</span>before(inspectElement <span class="operator">=</span><span class="operator">=</span> actions<span class="operator">.</span>cend() <span class="operator">?</span> nullptr : <span class="operator">*</span>inspectElement);
        menu<span class="operator">-</span><span class="operator">&gt;</span>insertAction(before<span class="operator">,</span> action);
    } <span class="keyword">else</span> {
        (<span class="operator">*</span>inspectElement)<span class="operator">-</span><span class="operator">&gt;</span>setText(tr(<span class="string">"Inspect element"</span>));
    }
    menu<span class="operator">-</span><span class="operator">&gt;</span>popup(event<span class="operator">-</span><span class="operator">&gt;</span>globalPos());
}</pre></div>
<a name="implementing-webpage-functionality"></a>
<h4 id="implementing-webpage-functionality">Implementing WebPage Functionality<a class="plink" href="#implementing-webpage-functionality" title="Direct link to this headline"></a></h4>
<p>We implement <code translate="no">WebPage</code> as a subclass of <a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a> to enable HTTP, proxy authentication, and ignoring SSL certificate errors when accessing web pages:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> WebPage : <span class="keyword">public</span> <span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    WebPage(<span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span> <span class="operator">*</span>profile<span class="operator">,</span> <span class="type"><a href="./qobject.htm" translate="no">QObject</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);

<span class="keyword">protected</span>:
    bool certificateError(<span class="keyword">const</span> <span class="type"><a href="./qwebenginecertificateerror.htm" translate="no">QWebEngineCertificateError</a></span> <span class="operator">&amp;</span>error) override;

<span class="keyword">private</span> <span class="keyword">slots</span>:
    <span class="type">void</span> handleAuthenticationRequired(<span class="keyword">const</span> <span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span> <span class="operator">&amp;</span>requestUrl<span class="operator">,</span> <span class="type"><a href="./qauthenticator.htm" translate="no">QAuthenticator</a></span> <span class="operator">*</span>auth);
    <span class="type">void</span> handleFeaturePermissionRequested(<span class="keyword">const</span> <span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span> <span class="operator">&amp;</span>securityOrigin<span class="operator">,</span> Feature feature);
    <span class="type">void</span> handleProxyAuthenticationRequired(<span class="keyword">const</span> <span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span> <span class="operator">&amp;</span>requestUrl<span class="operator">,</span> <span class="type"><a href="./qauthenticator.htm" translate="no">QAuthenticator</a></span> <span class="operator">*</span>auth<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> <span class="operator">&amp;</span>proxyHost);
    <span class="type">void</span> handleRegisterProtocolHandlerRequested(<span class="type"><a href="./qwebengineregisterprotocolhandlerrequest.htm" translate="no">QWebEngineRegisterProtocolHandlerRequest</a></span> request);
<span class="preprocessor">#if !defined(QT_NO_SSL) || QT_VERSION &gt;= QT_VERSION_CHECK(5, 12, 0)</span>
    <span class="type">void</span> handleSelectClientCertificate(<span class="type"><a href="./qwebengineclientcertificateselection.htm" translate="no">QWebEngineClientCertificateSelection</a></span> clientCertSelection);
<span class="preprocessor">#endif</span>
};</pre></div>
<p>In all the cases above, we display the appropriate dialog to the user. In case of authentication, we need to set the correct credential values on the <a href="./qauthenticator.htm" translate="no">QAuthenticator</a> object:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> WebPage<span class="operator">::</span>handleAuthenticationRequired(<span class="keyword">const</span> <span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span> <span class="operator">&amp;</span>requestUrl<span class="operator">,</span> <span class="type"><a href="./qauthenticator.htm" translate="no">QAuthenticator</a></span> <span class="operator">*</span>auth)
{
    <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>mainWindow <span class="operator">=</span> view()<span class="operator">-</span><span class="operator">&gt;</span>window();
    <span class="type"><a href="./qdialog.htm" translate="no">QDialog</a></span> dialog(mainWindow);
    dialog<span class="operator">.</span>setModal(<span class="keyword">true</span>);
    dialog<span class="operator">.</span>setWindowFlags(dialog<span class="operator">.</span>windowFlags() <span class="operator">&amp;</span> <span class="operator">~</span><span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>WindowContextHelpButtonHint);

    Ui<span class="operator">::</span>PasswordDialog passwordDialog;
    passwordDialog<span class="operator">.</span>setupUi(<span class="operator">&amp;</span>dialog);

    passwordDialog<span class="operator">.</span>m_iconLabel<span class="operator">-</span><span class="operator">&gt;</span>setText(<span class="type"><a href="./qstring.htm" translate="no">QString</a></span>());
    <span class="type"><a href="./qicon.htm" translate="no">QIcon</a></span> icon(mainWindow<span class="operator">-</span><span class="operator">&gt;</span>style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="./qstyle.htm" translate="no">QStyle</a></span><span class="operator">::</span>SP_MessageBoxQuestion<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> mainWindow));
    passwordDialog<span class="operator">.</span>m_iconLabel<span class="operator">-</span><span class="operator">&gt;</span>setPixmap(icon<span class="operator">.</span>pixmap(<span class="number">32</span><span class="operator">,</span> <span class="number">32</span>));

    <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> introMessage(tr(<span class="string">"Enter username and password for \"%1\" at %2"</span>)
                         <span class="operator">.</span>arg(auth<span class="operator">-</span><span class="operator">&gt;</span>realm())<span class="operator">.</span>arg(requestUrl<span class="operator">.</span>toString()<span class="operator">.</span>toHtmlEscaped()));
    passwordDialog<span class="operator">.</span>m_infoLabel<span class="operator">-</span><span class="operator">&gt;</span>setText(introMessage);
    passwordDialog<span class="operator">.</span>m_infoLabel<span class="operator">-</span><span class="operator">&gt;</span>setWordWrap(<span class="keyword">true</span>);

    <span class="keyword">if</span> (dialog<span class="operator">.</span>exec() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="./qdialog.htm" translate="no">QDialog</a></span><span class="operator">::</span>Accepted) {
        auth<span class="operator">-</span><span class="operator">&gt;</span>setUser(passwordDialog<span class="operator">.</span>m_userNameLineEdit<span class="operator">-</span><span class="operator">&gt;</span>text());
        auth<span class="operator">-</span><span class="operator">&gt;</span>setPassword(passwordDialog<span class="operator">.</span>m_passwordLineEdit<span class="operator">-</span><span class="operator">&gt;</span>text());
    } <span class="keyword">else</span> {
        <span class="comment">// Set authenticator null if dialog is cancelled</span>
        <span class="operator">*</span>auth <span class="operator">=</span> <span class="type"><a href="./qauthenticator.htm" translate="no">QAuthenticator</a></span>();
    }
}</pre></div>
<p>The <code translate="no">handleProxyAuthenticationRequired</code> signal handler implements the very same steps for the authentication of HTTP proxies.</p>
<p>In case of SSL errors, we just need to return a boolean value indicating whether the certificate should be ignored.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">bool WebPage<span class="operator">::</span>certificateError(<span class="keyword">const</span> <span class="type"><a href="./qwebenginecertificateerror.htm" translate="no">QWebEngineCertificateError</a></span> <span class="operator">&amp;</span>error)
{
    <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>mainWindow <span class="operator">=</span> view()<span class="operator">-</span><span class="operator">&gt;</span>window();

<span class="preprocessor">#if QT_VERSION &gt;= QT_VERSION_CHECK(5, 14, 0)</span>
    <span class="type"><a href="./qwebenginecertificateerror.htm" translate="no">QWebEngineCertificateError</a></span> deferredError <span class="operator">=</span> error;
    deferredError<span class="operator">.</span>defer();

    <span class="type"><a href="./qtimer.htm" translate="no">QTimer</a></span><span class="operator">::</span>singleShot(<span class="number">0</span><span class="operator">,</span> mainWindow<span class="operator">,</span> <span class="operator">[</span>mainWindow<span class="operator">,</span> error <span class="operator">=</span> std<span class="operator">::</span>move(deferredError)<span class="operator">]</span> () <span class="keyword">mutable</span> {
        <span class="keyword">if</span> (<span class="operator">!</span>error<span class="operator">.</span>deferred()) {
            <span class="type"><a href="./qmessagebox.htm" translate="no">QMessageBox</a></span><span class="operator">::</span>critical(mainWindow<span class="operator">,</span> tr(<span class="string">"Certificate Error"</span>)<span class="operator">,</span> error<span class="operator">.</span>errorDescription());
        } <span class="keyword">else</span> {
<span class="preprocessor">#else</span>
    <span class="keyword">if</span> (error<span class="operator">.</span>isOverridable()) {
<span class="preprocessor">#endif</span>
            <span class="type"><a href="./qdialog.htm" translate="no">QDialog</a></span> dialog(mainWindow);
            dialog<span class="operator">.</span>setModal(<span class="keyword">true</span>);
            dialog<span class="operator">.</span>setWindowFlags(dialog<span class="operator">.</span>windowFlags() <span class="operator">&amp;</span> <span class="operator">~</span><span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>WindowContextHelpButtonHint);

            Ui<span class="operator">::</span>CertificateErrorDialog certificateDialog;
            certificateDialog<span class="operator">.</span>setupUi(<span class="operator">&amp;</span>dialog);
            certificateDialog<span class="operator">.</span>m_iconLabel<span class="operator">-</span><span class="operator">&gt;</span>setText(<span class="type"><a href="./qstring.htm" translate="no">QString</a></span>());
            <span class="type"><a href="./qicon.htm" translate="no">QIcon</a></span> icon(mainWindow<span class="operator">-</span><span class="operator">&gt;</span>style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="./qstyle.htm" translate="no">QStyle</a></span><span class="operator">::</span>SP_MessageBoxWarning<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> mainWindow));
            certificateDialog<span class="operator">.</span>m_iconLabel<span class="operator">-</span><span class="operator">&gt;</span>setPixmap(icon<span class="operator">.</span>pixmap(<span class="number">32</span><span class="operator">,</span> <span class="number">32</span>));
            certificateDialog<span class="operator">.</span>m_errorLabel<span class="operator">-</span><span class="operator">&gt;</span>setText(error<span class="operator">.</span>errorDescription());
            dialog<span class="operator">.</span>setWindowTitle(tr(<span class="string">"Certificate Error"</span>));

<span class="preprocessor">#if QT_VERSION &gt;= QT_VERSION_CHECK(5, 14, 0)</span>
            <span class="keyword">if</span> (dialog<span class="operator">.</span>exec() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="./qdialog.htm" translate="no">QDialog</a></span><span class="operator">::</span>Accepted)
                error<span class="operator">.</span>ignoreCertificateError();
            <span class="keyword">else</span>
                error<span class="operator">.</span>rejectCertificate();
        }</pre></div>
<a name="opening-a-web-page"></a>
<h4 id="opening-a-web-page">Opening a Web Page<a class="plink" href="#opening-a-web-page" title="Direct link to this headline"></a></h4>
<p>This section describes the workflow for opening a new page. When the user enters a URL in the navigation bar and presses <b translate="no">Enter</b>, the <code translate="no">QLineEdit::returnPressed</code> signal is emitted and the new URL is then handed over to <code translate="no">TabWidget::setUrl</code>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">BrowserWindow<span class="operator">::</span>BrowserWindow(Browser <span class="operator">*</span>browser<span class="operator">,</span> <span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span> <span class="operator">*</span>profile<span class="operator">,</span> bool forDevTools)
{
    ...
        connect(m_urlLineEdit<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qlineedit.htm" translate="no">QLineEdit</a></span><span class="operator">::</span>returnPressed<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span>() {
            m_tabWidget<span class="operator">-</span><span class="operator">&gt;</span>setUrl(<span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span><span class="operator">::</span>fromUserInput(m_urlLineEdit<span class="operator">-</span><span class="operator">&gt;</span>text()));
        });
    ...
}</pre></div>
<p>The call is forwarded to the currently selected tab:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> TabWidget<span class="operator">::</span>setUrl(<span class="keyword">const</span> <span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span> <span class="operator">&amp;</span>url)
{
    <span class="keyword">if</span> (WebView <span class="operator">*</span>view <span class="operator">=</span> currentWebView()) {
        view<span class="operator">-</span><span class="operator">&gt;</span>setUrl(url);
        view<span class="operator">-</span><span class="operator">&gt;</span>setFocus();
    }
}</pre></div>
<p>The <code translate="no">setUrl()</code> method of <code translate="no">WebView</code> just forwards the <code translate="no">url</code> to the associated <code translate="no">WebPage</code>, which in turn starts the downloading of the page's content in the background.</p>
<a name="implementing-private-browsing"></a>
<h4 id="implementing-private-browsing">Implementing Private Browsing<a class="plink" href="#implementing-private-browsing" title="Direct link to this headline"></a></h4>
<p><i>Private browsing</i>, <i>incognito mode</i>, or <i>off-the-record mode</i> is a feature of many browsers where normally persistent data, such as cookies, the HTTP cache, or browsing history, is kept only in memory, leaving no trace on disk. In this example we will implement private browsing on the window level with tabs in one window all in either normal or private mode. Alternatively we could implement private browsing on the tab-level, with some tabs in a window in normal mode, others in private mode.</p>
<p>Implementing private browsing is quite easy using Qt WebEngine. All one has to do is to create a new <a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a> and use it in the <a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a> instead of the default profile. In the example this new profile is owned by the <code translate="no">Browser</code> object:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> Browser
{
<span class="keyword">public</span>:
    ...
    BrowserWindow <span class="operator">*</span>createWindow(bool offTheRecord <span class="operator">=</span> <span class="keyword">false</span>);
<span class="keyword">private</span>:
    ...
    <span class="type"><a href="./qscopedpointer.htm" translate="no">QScopedPointer</a></span><span class="operator">&lt;</span><span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span><span class="operator">&gt;</span> m_otrProfile;
};</pre></div>
<p>Required profile for <i>private browsing</i> is created together with its first window. The default constructor for <a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a> already puts it in <i>off-the-record</i> mode.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">BrowserWindow <span class="operator">*</span>Browser<span class="operator">::</span>createWindow(bool offTheRecord)
{
    <span class="keyword">if</span> (offTheRecord <span class="operator">&amp;</span><span class="operator">&amp;</span> <span class="operator">!</span>m_otrProfile) {
        m_otrProfile<span class="operator">.</span>reset(<span class="keyword">new</span> <span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span>);
    ...</pre></div>
<p>All that is left to do is to pass the appropriate profile down to the appropriate <a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a> objects. The <code translate="no">Browser</code> object will hand to each new <code translate="no">BrowserWindow</code> either the global default profile (see QWebEngineProfile::defaultProfile) or one shared <i>off-the-record</i> profile instance:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    ...
            m_otrProfile<span class="operator">.</span>get()<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>downloadRequested<span class="operator">,</span>
            <span class="operator">&amp;</span>m_downloadManagerWidget<span class="operator">,</span> <span class="operator">&amp;</span>DownloadManagerWidget<span class="operator">::</span>downloadRequested);
    }
    <span class="keyword">auto</span> profile <span class="operator">=</span> offTheRecord <span class="operator">?</span> m_otrProfile<span class="operator">.</span>get() : <span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>defaultProfile();
    <span class="keyword">auto</span> mainWindow <span class="operator">=</span> <span class="keyword">new</span> BrowserWindow(<span class="keyword">this</span><span class="operator">,</span> profile<span class="operator">,</span> <span class="keyword">false</span>);
    <span class="keyword">return</span> mainWindow;
}</pre></div>
<p>The <code translate="no">BrowserWindow</code> and <code translate="no">TabWidget</code> objects will then ensure that all <a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a> objects contained in a window will use this profile.</p>
<a name="managing-downloads"></a>
<h4 id="managing-downloads">Managing Downloads<a class="plink" href="#managing-downloads" title="Direct link to this headline"></a></h4>
<p>Downloads are associated with a <a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a>. Whenever a download is triggered on a web page the <a href="./qwebengineprofile.htm#downloadRequested" translate="no">QWebEngineProfile::downloadRequested</a> signal is emitted with a <a href="./qwebenginedownloaditem.htm" translate="no">QWebEngineDownloadItem</a>, which in this example is forwarded to <code translate="no">DownloadManagerWidget::downloadRequested</code>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">Browser<span class="operator">::</span>Browser()
{
    <span class="comment">// Quit application if the download manager window is the only remaining window</span>
    m_downloadManagerWidget<span class="operator">.</span>setAttribute(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>WA_QuitOnClose<span class="operator">,</span> <span class="keyword">false</span>);

    <span class="type"><a href="./qobject.htm" translate="no">QObject</a></span><span class="operator">::</span>connect(
        <span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>defaultProfile()<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>downloadRequested<span class="operator">,</span>
        <span class="operator">&amp;</span>m_downloadManagerWidget<span class="operator">,</span> <span class="operator">&amp;</span>DownloadManagerWidget<span class="operator">::</span>downloadRequested);
}</pre></div>
<p>This method prompts the user for a file name (with a pre-filled suggestion) and starts the download (unless the user cancels the <b translate="no">Save As</b> dialog):</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> DownloadManagerWidget<span class="operator">::</span>downloadRequested(<span class="type"><a href="./qwebenginedownloaditem.htm" translate="no">QWebEngineDownloadItem</a></span> <span class="operator">*</span>download)
{
    Q_ASSERT(download <span class="operator">&amp;</span><span class="operator">&amp;</span> download<span class="operator">-</span><span class="operator">&gt;</span>state() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="./qwebenginedownloaditem.htm" translate="no">QWebEngineDownloadItem</a></span><span class="operator">::</span>DownloadRequested);

<span class="preprocessor">#if QT_VERSION &gt;= QT_VERSION_CHECK(5, 14, 0)</span>
    <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> path <span class="operator">=</span> <span class="type"><a href="./qfiledialog.htm" translate="no">QFileDialog</a></span><span class="operator">::</span>getSaveFileName(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">"Save as"</span>)<span class="operator">,</span> <span class="type"><a href="./qdir.htm" translate="no">QDir</a></span>(download<span class="operator">-</span><span class="operator">&gt;</span>downloadDirectory())<span class="operator">.</span>filePath(download<span class="operator">-</span><span class="operator">&gt;</span>downloadFileName()));
<span class="preprocessor">#else</span>
    <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> path <span class="operator">=</span> <span class="type"><a href="./qfiledialog.htm" translate="no">QFileDialog</a></span><span class="operator">::</span>getSaveFileName(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">"Save as"</span>)<span class="operator">,</span> download<span class="operator">-</span><span class="operator">&gt;</span>path());
<span class="preprocessor">#endif</span>
    <span class="keyword">if</span> (path<span class="operator">.</span>isEmpty())
        <span class="keyword">return</span>;

<span class="preprocessor">#if QT_VERSION &gt;= QT_VERSION_CHECK(5, 14, 0)</span>
    download<span class="operator">-</span><span class="operator">&gt;</span>setDownloadDirectory(<span class="type"><a href="./qfileinfo.htm" translate="no">QFileInfo</a></span>(path)<span class="operator">.</span>path());
    download<span class="operator">-</span><span class="operator">&gt;</span>setDownloadFileName(<span class="type"><a href="./qfileinfo.htm" translate="no">QFileInfo</a></span>(path)<span class="operator">.</span>fileName());
<span class="preprocessor">#else</span>
    download<span class="operator">-</span><span class="operator">&gt;</span>setPath(path);
<span class="preprocessor">#endif</span>
    download<span class="operator">-</span><span class="operator">&gt;</span>accept();
    add(<span class="keyword">new</span> DownloadWidget(download));

    show();
}</pre></div>
<p>The <a href="./qwebenginedownloaditem.htm" translate="no">QWebEngineDownloadItem</a> object will periodically emit the <a href="./qwebenginedownloaditem.htm#downloadProgress" translate="no">downloadProgress</a> signal to notify potential observers of the download progress and the <a href="./qwebenginedownloaditem.htm#stateChanged" translate="no">stateChanged</a> signal when the download is finished or when an error occurs. See <code translate="no">downloadmanagerwidget.cpp</code> for an example of how these signals can be handled.</p>
<a name="files-and-attributions"></a>
<h4 id="files-and-attributions">Files and Attributions<a class="plink" href="#files-and-attributions" title="Direct link to this headline"></a></h4>
<p>The example uses icons from the Tango Icon Library:</p>
<div class="table"><table class="generic">
<tbody><tr class="odd" valign="top"><td><a href="./qtwebengine-attribution-simplebrowser-tango.htm#simplebrowser-tango" translate="no">Tango Icon Library</a></td><td>Public Domain</td></tr>
</tbody></table></div>
<p><a href="https://code.qt.io/cgit/qt/qtwebengine.git/tree/examples/webenginewidgets/simplebrowser?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@webenginewidgets/simplebrowser -->
</div>
<p class="copy-notice">
<acronym title="Copyright"></acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>