<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WebEngine Widgets Spellchecker Example | Qt WebEngine</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtwebengine-webenginewidgets-spellchecker-example.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtwebengine-index.htm" translate="no">Qt WebEngine</a></li>
                            <li><a href="./webengine-widgetexamples.htm" translate="no">Qt WebEngine Widgets Examples</a></li>
                            <li><a>WebEngine Widgets Spellchecker Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">WebEngine Widgets Spellchecker Example</h1>
<span class="subtitle"></span>
<!-- $$$webenginewidgets/spellchecker-brief -->
<p>Integrates a spellchecker into a simple HTML form.</p>
<!-- @@@webenginewidgets/spellchecker -->
<!-- $$$webenginewidgets/spellchecker-description -->
<div class="descr"> <a name="details"></a>
<p class="centerAlign"><img alt="" src="./images/spellchecker-example.png"></p><p><i>Spellchecker</i> demonstrates how to integrate spellchecking support into an HTML form that enables users to submit spellchecked messages.</p>
<a name="running-the-example"></a>
<h4 id="running-the-example">Running the Example<a class="plink" href="#running-the-example" title="Direct link to this headline"></a></h4>
<p>To run the example from <a href="http://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b>Welcome</b> mode and select the example from <b>Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<a name="dictionaries"></a>
<h4 id="dictionaries">Dictionaries<a class="plink" href="#dictionaries" title="Direct link to this headline"></a></h4>
<p>To be able to check the spelling, we need to provide the spellchecker with dictionaries. The Qt WebEngine spellchecker supports dictionaries provided by the <a href="https://sourceforge.net/projects/hunspell/" translate="no">Hunspell project</a> on all platforms and native dictionaries provided by macOS. In this example, we want to support the English and German languages.</p>
<p>For Hunspell dictionaries to be supported they have to be compiled into a special binary format. A Hunspell dictionary consists of two files:</p>
<ul>
<li>A <code translate="no">.dic</code> file that is a dictionary containing words for the language</li>
<li>An <code translate="no">.aff</code> file that defines the meaning of special flags in the dictionary</li>
</ul>
<p>These two files can be converted into the <code translate="no">bdic</code> format by using the <code translate="no">qwebengine_convert_dict</code> tool that is shipped together with Qt.</p>
<p>In this example, we are going to compile en_US and de_DE dictionaries. However, the real full dictionaries would take too much space for the purposes of this example. Therefore, we have created two dummy dictionaries that contain the following words and can be used to demonstrate the conversion process:</p>
<ul>
<li>English dictionary: I, you, he, she, it, we, they, love, loves, qt</li>
<li>German dictionary: ich, du, er, sie, es, wir, ihr, sie, Sie, liebe, liebst, liebt, lieben, liebt, qt</li>
</ul>
<p>Each word in a dictionary can be prefixed with <code translate="no">q</code>. For more information about how to create <code translate="no">dic</code> and <code translate="no">aff</code> files, see the Hunspell dictionary file format specification in the <a href="https://sourceforge.net/projects/hunspell/" translate="no">Hunspell Project</a>.</p>
<p>See the <a href="./qtwebengine-features.htm#spellchecker" translate="no">Spellchecker feature documentation</a> for how dictionary files are searched.</p>
<p>We specify the QMAKE_EXTRA_COMPILERS parameter in the project file to add a conversion step to the build process:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">qtPrepareTool(CONVERT_TOOL, qwebengine_convert_dict)

debug_and_release {
    CONFIG(debug, debug|release): DICTIONARIES_DIR = debug/qtwebengine_dictionaries
    else: DICTIONARIES_DIR = release/qtwebengine_dictionaries
} else {
    DICTIONARIES_DIR = qtwebengine_dictionaries
}

dict_base_paths = en/en-US de/de-DE
for (base_path, dict_base_paths) {
    dict.files += $$PWD/dict/$${base_path}.dic
}

dictoolbuild.input = dict.files
dictoolbuild.output = $${DICTIONARIES_DIR}/${QMAKE_FILE_BASE}.bdic
dictoolbuild.depends = ${QMAKE_FILE_PATH}/${QMAKE_FILE_BASE}.aff
dictoolbuild.commands = $${CONVERT_TOOL} ${QMAKE_FILE_IN} ${QMAKE_FILE_OUT}
dictoolbuild.name = Build ${QMAKE_FILE_IN_BASE}
dictoolbuild.CONFIG = no_link target_predeps
QMAKE_EXTRA_COMPILERS += dictoolbuild</pre></div>
<p>To set up a dictionary, we run <code translate="no">qwebengine_convert_dict</code> passing the file path of the dictionary <code translate="no">dic</code> and <code translate="no">bdic</code> files. The <code translate="no">aff</code> file and optional <code translate="no">delta</code> file are also picked up by the <code translate="no">convert</code> process. The output <code translate="no">bdic</code> file is placed into the <i>qtwebengine_dictionaries</i> local directory (or Resources directory), which the application binary will run from.</p>
<a name="setting-the-spellchecker"></a>
<h4 id="setting-the-spellchecker">Setting the Spellchecker<a class="plink" href="#setting-the-spellchecker" title="Direct link to this headline"></a></h4>
<p>The constructor of our class is trivial.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">WebView<span class="operator">::</span>WebView(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>parent)
    : <span class="type"><a href="./qwebengineview.htm" translate="no">QWebEngineView</a></span>(parent)
{
    m_spellCheckLanguages<span class="operator">[</span><span class="string">"English"</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">"en-US"</span>;
    m_spellCheckLanguages<span class="operator">[</span><span class="string">"German"</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">"de-DE"</span>;
    <span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span> <span class="operator">*</span>profile <span class="operator">=</span> page()<span class="operator">-</span><span class="operator">&gt;</span>profile();
    profile<span class="operator">-</span><span class="operator">&gt;</span>setSpellCheckEnabled(<span class="keyword">true</span>);
    profile<span class="operator">-</span><span class="operator">&gt;</span>setSpellCheckLanguages({<span class="string">"en-US"</span>});</pre></div>
<p>We define simple mapping between our dictionary filenames and the actual language display name. We will use that mapping to display names of dictionaries in the context menu. Spellchecking is disabled by default. Therefore we also enable spellchecker and set the <i>English</i> dictionary. When Qt WebEngine's spellcheck service initializes, it will try to load the <code translate="no">bdict</code> dictionaries and to check them for consistency. Any errors are logged by using the <a href="./qtglobal.htm#qWarning" translate="no">qWarning</a>() function.</p>
<a name="switching-the-spellchecking-language"></a>
<h4 id="switching-the-spellchecking-language">Switching the Spellchecking Language<a class="plink" href="#switching-the-spellchecking-language" title="Direct link to this headline"></a></h4>
<p>The current language used for spellchecking is defined per profile, and can get set using the QWebEngineProfile::setSpellCheckLanguage method. When the user clicks on an underlined misspelled word, the default context menu displays up to four suggestions. Selecting one will replace the misspelled word. We could reimplement a number of suggestions, by overriding <a href="./qwebengineview.htm#contextMenuEvent" translate="no">QWebEngineView::contextMenuEvent</a> and using <a href="./qwebenginecontextmenudata.htm#spellCheckerSuggestions" translate="no">QWebEngineContextMenuData::spellCheckerSuggestions</a>, but we will demonstrate how to add langague options in the context menu instead:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> WebView<span class="operator">::</span>contextMenuEvent(<span class="type"><a href="./qcontextmenuevent.htm" translate="no">QContextMenuEvent</a></span> <span class="operator">*</span>event)
{
    <span class="keyword">const</span> <span class="type"><a href="./qwebenginecontextmenudata.htm" translate="no">QWebEngineContextMenuData</a></span> <span class="operator">&amp;</span>data <span class="operator">=</span> page()<span class="operator">-</span><span class="operator">&gt;</span>contextMenuData();
    Q_ASSERT(data<span class="operator">.</span>isValid());

    <span class="keyword">if</span> (<span class="operator">!</span>data<span class="operator">.</span>isContentEditable()) {
        <span class="type"><a href="./qwebengineview.htm" translate="no">QWebEngineView</a></span><span class="operator">::</span>contextMenuEvent(event);
        <span class="keyword">return</span>;
    }

    <span class="type"><a href="./qwebengineprofile.htm" translate="no">QWebEngineProfile</a></span> <span class="operator">*</span>profile <span class="operator">=</span> page()<span class="operator">-</span><span class="operator">&gt;</span>profile();
    <span class="keyword">const</span> <span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> <span class="operator">&amp;</span>languages <span class="operator">=</span> profile<span class="operator">-</span><span class="operator">&gt;</span>spellCheckLanguages();
    <span class="type"><a href="./qmenu.htm" translate="no">QMenu</a></span> <span class="operator">*</span>menu <span class="operator">=</span> page()<span class="operator">-</span><span class="operator">&gt;</span>createStandardContextMenu();
    menu<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();

    <span class="type"><a href="./qaction.htm" translate="no">QAction</a></span> <span class="operator">*</span>spellcheckAction <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qaction.htm" translate="no">QAction</a></span>(tr(<span class="string">"Check Spelling"</span>)<span class="operator">,</span> nullptr);
    spellcheckAction<span class="operator">-</span><span class="operator">&gt;</span>setCheckable(<span class="keyword">true</span>);
    spellcheckAction<span class="operator">-</span><span class="operator">&gt;</span>setChecked(profile<span class="operator">-</span><span class="operator">&gt;</span>isSpellCheckEnabled());
    connect(spellcheckAction<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qaction.htm" translate="no">QAction</a></span><span class="operator">::</span>toggled<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">[</span>profile<span class="operator">]</span>(bool toogled) {
        profile<span class="operator">-</span><span class="operator">&gt;</span>setSpellCheckEnabled(toogled);
    });
    menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(spellcheckAction);

    <span class="keyword">if</span> (profile<span class="operator">-</span><span class="operator">&gt;</span>isSpellCheckEnabled()) {
        <span class="type"><a href="./qmenu.htm" translate="no">QMenu</a></span> <span class="operator">*</span>subMenu <span class="operator">=</span> menu<span class="operator">-</span><span class="operator">&gt;</span>addMenu(tr(<span class="string">"Select Language"</span>));
        <span class="keyword">const</span> <span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> keys <span class="operator">=</span> m_spellCheckLanguages<span class="operator">.</span>keys();
        <span class="keyword">for</span> (<span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> <span class="operator">&amp;</span>str : keys) {
            <span class="type"><a href="./qaction.htm" translate="no">QAction</a></span> <span class="operator">*</span>action <span class="operator">=</span> subMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(str);
            action<span class="operator">-</span><span class="operator">&gt;</span>setCheckable(<span class="keyword">true</span>);
            <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> lang <span class="operator">=</span> m_spellCheckLanguages<span class="operator">[</span>str<span class="operator">]</span>;
            action<span class="operator">-</span><span class="operator">&gt;</span>setChecked(languages<span class="operator">.</span>contains(lang));
            connect(action<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qaction.htm" translate="no">QAction</a></span><span class="operator">::</span>triggered<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">[</span>profile<span class="operator">,</span> lang<span class="operator">]</span>(){
               profile<span class="operator">-</span><span class="operator">&gt;</span>setSpellCheckLanguages(<span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span>()<span class="operator">&lt;</span><span class="operator">&lt;</span>lang);
            });
        }
    }
    connect(menu<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qmenu.htm" translate="no">QMenu</a></span><span class="operator">::</span>aboutToHide<span class="operator">,</span> menu<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qobject.htm" translate="no">QObject</a></span><span class="operator">::</span>deleteLater);
    menu<span class="operator">-</span><span class="operator">&gt;</span>popup(event<span class="operator">-</span><span class="operator">&gt;</span>globalPos());
}</pre></div>
<p>Above, we get the <a href="./qwebenginecontextmenudata.htm" translate="no">QWebEngineContextMenuData</a> instance using the <a href="./qwebenginepage.htm#contextMenuData" translate="no">QWebEnginePage::contextMenuData</a> method. We use it to be notified when the user clicks on an editable field and show the <b translate="no">Check Spelling</b> item in the context menu. Moreover, if spellchecking is enabled, we also add the <b translate="no">Select Language</b> submenu with the supported languages. When an action is triggered, we set the language with the QWebEngineProfile::setSpellCheckLanguage call.</p>
<p><a href="https://code.qt.io/cgit/qt/qtwebengine.git/tree/examples/webenginewidgets/spellchecker?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@webenginewidgets/spellchecker -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>