<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Troll Print Example | Qt Linguist Manual</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtlinguist-trollprint-example.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtlinguist-index.htm" translate="no">Qt Linguist Manual</a></li>
                            <li><a href="./examples-linguist.htm" translate="no">Qt Linguist Examples</a></li>
                            <li><a>Troll Print Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">Troll Print Example</h1>
<span class="subtitle"></span>
<!-- $$$trollprint-brief -->
<p>Updating translations for later releases.</p>
<!-- @@@trollprint -->
<!-- $$$trollprint-description -->
<div class="descr"> <a name="details"></a>
<p>Troll Print is an example application that lets the user choose printer settings. It comes in two versions: English and Portuguese.</p>
<p class="centerAlign"><img alt="" src="./images/linguist-trollprint_10_en.png"></p><p>We've included a translation file, <code translate="no">trollprint_pt.ts</code>, which contains some Portuguese translations for this example.</p>
<p>We will consider two releases of the same application: Troll Print 1.0 and 1.1. We will learn to reuse the translations created for one release in a subsequent release. (In this tutorial, you need to edit some source files. It's probably best to copy all the files to a new temporary directory and work from there.)</p>
<p>See the <a href="./qtlinguist-index.htm" translate="no">Qt Linguist Manual</a> for more information about translating Qt application.</p>
<a name="line-by-line-walkthrough"></a>
<h4 id="line-by-line-walkthrough">Line by Line Walkthrough<a class="plink" href="#line-by-line-walkthrough" title="Direct link to this headline"></a></h4>
<p>The <code translate="no">PrintPanel</code> class is defined in <code translate="no">printpanel.h</code>.</p>
<div class="pre"><pre class="cpp" translate="no"><span class="keyword">class</span> PrintPanel : <span class="keyword">public</span> <span class="type">QWidget</span>
{
    Q_OBJECT</pre></div>
<p><code translate="no">PrintPanel</code> is a QWidget. It needs the <code translate="no">Q_OBJECT</code> macro for <code translate="no">tr()</code> to work properly.</p>
<p>The implementation file is <code translate="no">printpanel.cpp</code>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">PrintPanel<span class="operator">::</span>PrintPanel(<span class="type">QWidget</span> <span class="operator">*</span>parent)
    : <span class="type">QWidget</span>(parent)
{
<span class="comment">/*
    QLabel *label = new QLabel(tr("&lt;b&gt;TROLL PRINT&lt;/b&gt;"));
    label-&gt;setAlignment(Qt::AlignCenter);
*/</span></pre></div>
<p>Some of the code is commented out in Troll Print 1.0; you will uncomment it later, for Troll Print 1.1.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    twoSidedGroupBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QGroupBox</span>(tr(<span class="string">"2-sided"</span>));
    twoSidedEnabledRadio <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QRadioButton</span>(tr(<span class="string">"Enabled"</span>));
    twoSidedDisabledRadio <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QRadioButton</span>(tr(<span class="string">"Disabled"</span>));
    twoSidedDisabledRadio<span class="operator">-</span><span class="operator">&gt;</span>setChecked(<span class="keyword">true</span>);

    colorsGroupBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QGroupBox</span>(tr(<span class="string">"Colors"</span>));
    colorsEnabledRadio <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QRadioButton</span>(tr(<span class="string">"Enabled"</span>));
    colorsDisabledRadio <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QRadioButton</span>(tr(<span class="string">"Disabled"</span>));</pre></div>
<p>Notice the two occurrences of <code translate="no">tr("Enabled")</code> and of <code translate="no">tr("Disabled")</code> in PrintPanel. Since both "Enabled"s and "Disabled"s appear in the same context <i>Qt Linguist</i> will only display one occurrence of each and will use the same translations for the duplicates that it doesn't display. Whilst this is a useful timesaver, in some languages, such as Portuguese, the second occurrence requires a separate translation. We will see how <i>Qt Linguist</i> can be made to display all the occurrences for separate translation shortly.</p>
<p>The header file for <code translate="no">MainWindow</code>, <code translate="no">mainwindow.h</code>, contains no surprises. In the implementation, <code translate="no">mainwindow.cpp</code>, we have some user-visible source texts that must be marked for translation.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    setWindowTitle(tr(<span class="string">"Troll Print 1.0"</span>));</pre></div>
<p>We must translate the window title.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MainWindow<span class="operator">::</span>createActions()
{
    exitAct <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QAction</span>(tr(<span class="string">"E&amp;xit"</span>)<span class="operator">,</span> <span class="keyword">this</span>);
    exitAct<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(tr(<span class="string">"Ctrl+Q"</span><span class="operator">,</span> <span class="string">"Quit"</span>));
    connect(exitAct<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(close()));

    aboutAct <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QAction</span>(tr(<span class="string">"&amp;About"</span>)<span class="operator">,</span> <span class="keyword">this</span>);
    aboutAct<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="./qml-qtqml-qt.htm" translate="no">Qt</a></span><span class="operator">::</span>Key_F1);
    connect(aboutAct<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(about()));

    aboutQtAct <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QAction</span>(tr(<span class="string">"About &amp;Qt"</span>)<span class="operator">,</span> <span class="keyword">this</span>);
    connect(aboutQtAct<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> qApp<span class="operator">,</span> SLOT(aboutQt()));
}

<span class="type">void</span> MainWindow<span class="operator">::</span>createMenus()
{
    <span class="type">QMenu</span> <span class="operator">*</span>fileMenu <span class="operator">=</span> menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addMenu(tr(<span class="string">"&amp;File"</span>));
    fileMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(exitAct);

    menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();

    <span class="type">QMenu</span> <span class="operator">*</span>helpMenu <span class="operator">=</span> menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addMenu(tr(<span class="string">"&amp;Help"</span>));
    helpMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(aboutAct);
    helpMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(aboutQtAct);
}</pre></div>
<p>We also need to translate the actions and menus. Note that the two argument form of <code translate="no">tr()</code> is used for the keyboard accelerator, "Ctrl+Q", since the second argument is the only clue the translator has to indicate what function that accelerator will perform.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qtranslator.htm" translate="no">QTranslator</a></span> translator;
    translator<span class="operator">.</span>load(<span class="type"><a href="./qstring.htm" translate="no">QString</a></span>(<span class="string">"trollprint_"</span>) <span class="operator">+</span> locale);
    app<span class="operator">.</span>installTranslator(<span class="operator">&amp;</span>translator);</pre></div>
<p>The <code translate="no">main()</code> function in <code translate="no">main.cpp</code> is the same as the one in the <a href="./qtlinguist-arrowpad-example.htm" translate="no">Arrow Pad</a> example. In particular, it chooses a translation file based on the current locale.</p>
<a name="running-troll-print-1-0-in-english-and-in-portuguese"></a>
<h4 id="running-troll-print-1-0-in-english-and-in-portuguese">Running Troll Print 1.0 in English and in Portuguese<a class="plink" href="#running-troll-print-1-0-in-english-and-in-portuguese" title="Direct link to this headline"></a></h4>
<p>We will use the translations in the <code translate="no">trollprint_pt.ts</code> file that is provided.</p>
<p>Set the <code translate="no">LANG</code> environment variable to <code translate="no">pt</code>, and then run <code translate="no">trollprint</code>. You should still see the English version. Now run <code translate="no">lrelease</code>, e.g. <code translate="no">lrelease trollprint.pro</code>, and then run the example again. Now you should see the Portuguese edition (Troll Imprimir 1.0):</p>
<p class="centerAlign"><img alt="" src="./images/linguist-trollprint_10_pt_bad.png"></p><p>Whilst the translation has appeared correctly, it is in fact wrong. In good Portuguese, the second occurrence of "Enabled" should be "Ativadas", not "Ativado" and the ending for the second translation of "Disabled" must change similarly too.</p>
<p>If you open <code translate="no">trollprint_pt.ts</code> using <i>Qt Linguist</i>, you will see that there is just one occurrence of "Enabled" and of "Disabled" in the translation source file, even though there are two of each in the source code. This is because <i>Qt Linguist</i> tries to minimize the translator's work by using the same translation for duplicate source texts. In cases such as this where an identical translation is wrong, the programmer must disambiguate the duplicate occurrences. This is easily achieved by using the two argument form of <code translate="no">tr()</code>.</p>
<p>We can easily determine which file must be changed because the translator's "context" is in fact the class name for the class where the texts that must be changed appears. In this case the file is <code translate="no">printpanel.cpp</code>, where there are four lines to change. Add the second argument "two-sided" in the appropriate <code translate="no">tr()</code> calls to the first pair of radio buttons:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">twoSidedEnabledRadio <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QRadioButton</span>(tr(<span class="string">"Enabled"</span><span class="operator">,</span> <span class="string">"two-sided"</span>));
twoSidedDisabledRadio <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QRadioButton</span>(tr(<span class="string">"Disabled"</span><span class="operator">,</span> <span class="string">"two-sided"</span>));</pre></div>
<p>and add the second argument "colors" in the appropriate <code translate="no">tr()</code> calls for the second pair of radio buttons:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">colorsEnabledRadio <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QRadioButton</span>(tr(<span class="string">"Enabled"</span><span class="operator">,</span> <span class="string">"colors"</span>)<span class="operator">,</span> colors);
colorsDisabledRadio <span class="operator">=</span> <span class="keyword">new</span> <span class="type">QRadioButton</span>(tr(<span class="string">"Disabled"</span><span class="operator">,</span> <span class="string">"colors"</span>)<span class="operator">,</span> colors);</pre></div>
<p>Now run <code translate="no">lupdate</code> and open <code translate="no">trollprint_pt.ts</code> with <i>Qt Linguist</i>. You should now see two changes.</p>
<p>First, the translation source file now contains <i>three</i> "Enabled", "Disabled" pairs. The first pair is marked "(obs.)" signifying that they are obsolete. This is because these texts appeared in <code translate="no">tr()</code> calls that have been replaced by new calls with two arguments. The second pair has "two-sided" as their comment, and the third pair has "colors" as their comment. The comments are shown in the <b translate="no">Source text and comments</b> area in <i>Qt Linguist</i>.</p>
<p>Second, the translation text "Ativado" and "Desativado" have been automatically used as translations for the new "Enabled" and "Disabled" texts, again to minimize the translator's work. Of course in this case these are not correct for the second occurrence of each word, but they provide a good starting point.</p>
<p>Change the second "Ativado" into "Ativadas" and the second "Desativado" into "Desativadas", then save and quit. Run <code translate="no">lrelease</code> to obtain an up-to-date binary <code translate="no">trollprint_pt.qm</code> file, and run Troll Print (or rather Troll Imprimir).</p>
<p class="centerAlign"><img alt="" src="./images/linguist-trollprint_10_pt_good.png"></p><p>The second argument to <code translate="no">tr()</code> calls, called "comments" in <i>Qt Linguist</i>, distinguish between identical source texts that occur in the same context (class). They are also useful in other cases to give clues to the translator, and in the case of Ctrl key accelerators are the only means of conveying the function performed by the accelerator to the translator.</p>
<p>An additional way of helping the translator is to provide information on how to navigate to the particular part of the application that contains the source texts they must translate. This helps them see the context in which the translation appears and also helps them to find and test the translations. This can be achieved by using a <code translate="no">TRANSLATOR</code> comment in the source code:</p>
<div class="pre"><pre class="cpp" translate="no"><span class="comment">/*
   TRANSLATOR MainWindow

   In this application the whole application is a MainWindow.
   Choose Help|About from the menu bar to see some text
   belonging to MainWindow.

   ...
*/</span></pre></div>
<p>Try adding these comments to some source files, particularly to dialog classes, describing the navigation necessary to reach the dialogs. You could also add them to the example files, e.g. <code translate="no">mainwindow.cpp</code> and <code translate="no">printpanel.cpp</code> are appropriate files. Run <code translate="no">lupdate</code> and then start <i>Qt Linguist</i> and load in <code translate="no">trollprint_pt.ts</code>. You should see the comments in the <b translate="no">Source text and comments</b> area as you browse through the list of source texts.</p>
<p>Sometimes, particularly with large programs, it can be difficult for the translator to find their translations and check that they're correct. Comments that provide good navigation information can save them time:</p>
<div class="pre"><pre class="cpp" translate="no"><span class="comment">/*
   TRANSLATOR ZClientErrorDialog

   Choose Client|Edit to reach the Client Edit dialog, then choose
   Client Specification from the drop down list at the top and pick
   client Bartel Leendert van der Waerden. Now check the Profile
   checkbox and then click the Start Processing button. You should
   now see a pop up window with the text "Error: Name too long!".
   This window is a ZClientErrorDialog.
*/</span></pre></div>
<a name="troll-print-1-1"></a>
<h4 id="troll-print-1-1">Troll Print 1.1<a class="plink" href="#troll-print-1-1" title="Direct link to this headline"></a></h4>
<p>We'll now prepare release 1.1 of Troll Print. Start your favorite text editor and follow these steps:</p>
<ul>
<li>Uncomment the two lines that create a QLabel with the text "&lt;b&gt;TROLL PRINT&lt;/b&gt;" in <code translate="no">printpanel.cpp</code>.</li>
<li>Word-tidying: Replace "2-sided" by "Two-sided" in <code translate="no">printpanel.cpp</code>.</li>
<li>Replace "1.0" with "1.1" everywhere it occurs in <code translate="no">mainwindow.cpp</code>.</li>
<li>Update the copyright year to 1999-2000 in <code translate="no">mainwindow.cpp</code>.</li>
</ul>
<p>(Of course the version number and copyright year would be consts or #defines in a real application.)</p>
<p>Once finished, run <code translate="no">lupdate</code>, then open <code translate="no">trollprint_pt.ts</code> in <i>Qt Linguist</i>. The following items are of special interest:</p>
<ul>
<li><code translate="no">MainWindow</code><ul>
<li>Troll Print 1.0 - marked "(obs.)", obsolete</li>
<li>About Troll Print 1.0 - marked "(obs.)", obsolete</li>
<li>Troll Print 1.0. Copyright 1999 Software, Inc. - marked obsolete</li>
<li>Troll Print 1.1 - automatically translated as "Troll Imprimir 1.1"</li>
<li>About Troll Print 1.1 - automatically translated as "Troll Imprimir 1.1"</li>
<li>Troll Print 1.1. Copyright 1999-2000 Software, Inc. - automatically translated as "Troll Imprimir 1.1. Copyright 1999-2000 Software, Inc."</li>
</ul>
</li>
<li><code translate="no">PrintPanel</code><ul>
<li>2-sided - marked "(obs.)", obsolete</li>
<li>&lt;b&gt;TROLL PRINT&lt;/b&gt; - unmarked, i.e. untranslated</li>
<li>Two-sided - unmarked, i.e. untranslated.</li>
</ul>
</li>
</ul>
<p>Notice that <code translate="no">lupdate</code> works hard behind the scenes to make revisions easier, and it's pretty smart with numbers.</p>
<p>Go over the translations in <code translate="no">MainWindow</code> and mark these as "done". Translate "&lt;b&gt;TROLL PRINT&lt;/b&gt;" as "&lt;b&gt;TROLL IMPRIMIR&lt;/b&gt;". When you're translating "Two-sided", press the <b translate="no">Guess Again</b> button to translate "Two-sided", but change the "2" into "Dois".</p>
<p>Save and quit, then run <code translate="no">lrelease</code>. The Portuguese version should look like this:</p>
<p class="centerAlign"><img alt="" src="./images/linguist-trollprint_11_pt.png"></p><p>Choose <b translate="no">Ajuda|Sobre</b> (<b translate="no">Help|About</b>) to see the about box.</p>
<p>If you choose <b translate="no">Ajuda|Sobre Qt</b> (<b translate="no">Help|About Qt</b>), you'll get an English dialog. Oops! Qt itself needs to be translated. See <a href="./internationalization.htm" translate="no">Internationalization with Qt</a> for details.</p>
<p>Now set <code translate="no">LANG=en</code> to get the original English version:</p>
<p class="centerAlign"><img alt="" src="./images/linguist-trollprint_11_en.png"></p><p><a href="https://code.qt.io/cgit/qt/qttools.git/tree/examples/linguist/trollprint?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@trollprint -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>