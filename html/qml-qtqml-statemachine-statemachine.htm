<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>StateMachine QML Type | Qt QML</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qml-qtqml-statemachine-statemachine.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtqml-index.htm" translate="no">Qt QML</a></li>
                            <li><a href="./qtqml-qmlmodule.htm" translate="no">QML Types</a></li>
                            <li><a>StateMachine QML Type</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title" translate="no">StateMachine QML Type</h1>
<span class="subtitle" translate="no"></span>
<!-- $$$StateMachine-brief -->
<p>Provides a hierarchical finite state machine. <a href="#details">More...</a></p>
<!-- @@@StateMachine -->
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> Import Statement:</td><td class="memItemRight bottomAlign"> import QtQml.StateMachine 1.15</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 5.4</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <p><a href="./qml-qtqml-statemachine-state.htm" translate="no">State</a></p>
</td></tr></tbody></table></div><ul>
<li><a href="./qml-qtqml-statemachine-statemachine-members.htm">List of all members, including inherited members</a></li>
</ul>
<a name="properties"></a>
<h2 id="properties">Properties<a class="plink" href="#properties" title="Direct link to this headline"></a></h2>
<ul>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-statemachine-statemachine.htm#errorString-prop" translate="no">errorString</a></b></b> : string</li>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-statemachine-statemachine.htm#globalRestorePolicy-prop" translate="no">globalRestorePolicy</a></b></b> : enumeration</li>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-statemachine-statemachine.htm#running-prop" translate="no">running</a></b></b> : bool</li>
</ul>
<a name="signals"></a>
<h2 id="signals">Signals<a class="plink" href="#signals" title="Direct link to this headline"></a></h2>
<ul>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-statemachine-statemachine.htm#started-signal" translate="no">started</a></b></b>()</li>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-statemachine-statemachine.htm#stopped-signal" translate="no">stopped</a></b></b>()</li>
</ul>
<a name="methods"></a>
<h2 id="methods">Methods<a class="plink" href="#methods" title="Direct link to this headline"></a></h2>
<ul>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-statemachine-statemachine.htm#start-method" translate="no">start</a></b></b>()</li>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-statemachine-statemachine.htm#stop-method" translate="no">stop</a></b></b>()</li>
</ul>
<!-- $$$StateMachine-description -->
<a name="details"></a>
<h2 id="details">Detailed Description<a class="plink" href="#details" title="Direct link to this headline"></a></h2>
<p>StateMachine is based on the concepts and notation of <a href="http://www.wisdom.weizmann.ac.il/~dharel/SCANNED.PAPERS/Statecharts.pdf" translate="no">Statecharts</a>. StateMachine is part of <a href="./qmlstatemachine.htm" translate="no">The Declarative State Machine Framework</a>.</p>
<p>A state machine manages a set of states and transitions between those states; these states and transitions define a state graph. Once a state graph has been built, the state machine can execute it. StateMachine's execution algorithm is based on the <a href="http://www.w3.org/TR/scxml/" translate="no">State Chart XML (SCXML)</a> algorithm. The framework's <a href="./qmlstatemachine.htm" translate="no">overview</a> gives several state graphs and the code to build them.</p>
<p>Before the machine can be started, the <a href="./qml-qtqml-statemachine-state.htm#initialState-prop" translate="no">initialState</a> must be set. The initial state is the state that the machine enters when started. You can then set running property to true or <a href="./qml-qtqml-statemachine-statemachine.htm#start-method" translate="no">start()</a> the state machine. The started signal is emitted when the initial state is entered.</p>
<p>The state machine processes events and takes transitions until a top-level final state is entered; the state machine then emits the finished() signal. You can also <a href="./qml-qtqml-statemachine-statemachine.htm#stop-method" translate="no">stop()</a> the state machine explicitly (you can also set running property to false). The stopped signal is emitted in this case.</p>
<a name="example-usage"></a>
<h2 id="example-usage">Example Usage<a class="plink" href="#example-usage" title="Direct link to this headline"></a></h2>
<p>The following snippet shows a state machine that will finish when a button is clicked:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">import QtQuick 2.0
import QtQml.StateMachine 1.0 as DSM

<span class="type"><a href="./qml-qtquick-rectangle.htm" translate="no">Rectangle</a></span> {
    <span class="type"><a href="./qml-qtquick-controls2-button.htm" translate="no">Button</a></span> {
        <span class="name">anchors</span>.fill: <span class="name">parent</span>
        <span class="name">id</span>: <span class="name">button</span>
        <span class="name">text</span>: <span class="string">"Finish state"</span>
        <span class="type">DSM</span>.StateMachine {
            <span class="name">id</span>: <span class="name">stateMachine</span>
            <span class="name">initialState</span>: <span class="name">state</span>
            <span class="name">running</span>: <span class="number">true</span>
            <span class="type">DSM</span>.State {
                <span class="name">id</span>: <span class="name">state</span>
                <span class="type">DSM</span>.SignalTransition {
                    <span class="name">targetState</span>: <span class="name">finalState</span>
                    <span class="name">signal</span>: <span class="name">button</span>.<span class="name">clicked</span>
                }
            }
            <span class="type">DSM</span>.FinalState {
                <span class="name">id</span>: <span class="name">finalState</span>
            }
            <span class="name">onFinished</span>: <span class="name">Qt</span>.<span class="name">quit</span>()
        }
    }
}</pre></div>
<p>If an error is encountered, the machine will look for an <a href="./qml-qtqml-statemachine-state.htm#errorState-prop" translate="no">errorState</a>, and if one is available, it will enter this state. After the error state is entered, the type of the error can be retrieved with error(). The execution of the state graph will not stop when the error state is entered. If no error state applies to the erroneous state, the machine will stop executing and an error message will be printed to the console.</p>
<div class="admonition warning">
<p><b>Warning: </b>Setting the childMode of a StateMachine to anything else than <a href="./qstate.htm#ChildMode-enum" translate="no">QState::ExclusiveStates</a> will result in an invalid state machine, and can lead to incorrect behavior.</p>
</div>
<br style="clear: both"><p><b>See also </b><a href="./qml-qtqml-statemachine-qabstractstate.htm" translate="no">QAbstractState</a>, <a href="./qml-qtqml-statemachine-state.htm" translate="no">State</a>, <a href="./qml-qtqml-statemachine-signaltransition.htm" translate="no">SignalTransition</a>, <a href="./qml-qtqml-statemachine-timeouttransition.htm" translate="no">TimeoutTransition</a>, <a href="./qml-qtqml-statemachine-historystate.htm" translate="no">HistoryState</a>, and <a href="./qmlstatemachine.htm" translate="no">The Declarative State Machine Framework</a>.</p>
<!-- @@@StateMachine -->
<h2>Property Documentation</h2>
<!-- $$$errorString -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="errorString-prop" valign="top">
<td class="tblQmlPropNode"><p>
<a name="errorString-prop"></a><span class="qmlreadonly">[read-only] </span><span class="name">errorString</span> : <span class="type"><a href="./qml-string.htm" translate="no">string</a></span><a class="plink" href="#errorString-prop" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>The error string of this state machine.</p>
</div></div><!-- @@@errorString -->
<br>
<!-- $$$globalRestorePolicy -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="globalRestorePolicy-prop" valign="top">
<td class="tblQmlPropNode"><p>
<a name="globalRestorePolicy-prop"></a><span class="name">globalRestorePolicy</span> : <span class="type"><a href="./qml-enumeration.htm" translate="no">enumeration</a></span><a class="plink" href="#globalRestorePolicy-prop" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>The restore policy for states of this state machine.</p>
<p>The default value of this property is <a href="./qstate.htm" translate="no">QState</a>.DontRestoreProperties.</p>
<p>This enum specifies the restore policy type. The restore policy takes effect when the machine enters a state which sets one or more properties. If the restore policy is set to <a href="./qstate.htm" translate="no">QState</a>.RestoreProperties, the state machine will save the original value of the property before the new value is set.</p>
<p>Later, when the machine either enters a state which does not set a value for the given property, the property will automatically be restored to its initial value.</p>
<p>Only one initial value will be saved for any given property. If a value for a property has already been saved by the state machine, it will not be overwritten until the property has been successfully restored.</p>
<ul>
<li><a href="./qstate.htm" translate="no">QState</a>.DontRestoreProperties The state machine should not save the initial values of properties and restore them later.</li>
<li><a href="./qstate.htm" translate="no">QState</a>.RestoreProperties The state machine should save the initial values of properties and restore them later.</li>
</ul>
</div></div><!-- @@@globalRestorePolicy -->
<br>
<!-- $$$running -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="running-prop" valign="top">
<td class="tblQmlPropNode"><p>
<a name="running-prop"></a><span class="name">running</span> : <span class="type"><a href="./qml-bool.htm" translate="no">bool</a></span><a class="plink" href="#running-prop" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>The running state of this state machine.</p>
<p><b>See also </b><a href="./qml-qtqml-statemachine-statemachine.htm#start-method" translate="no">start()</a> and <a href="./qml-qtqml-statemachine-statemachine.htm#stop-method" translate="no">stop()</a>.</p>
</div></div><!-- @@@running -->
<br>
<h2>Signal Documentation</h2>
<!-- $$$started[overload1]$$$started -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="started-signal" valign="top">
<td class="tblQmlFuncNode"><p>
<a name="started-signal"></a><span class="name">started</span>()<a class="plink" href="#started-signal" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>This signal is emitted when the state machine has entered its initial state (<a href="./qml-qtqml-statemachine-state.htm#initialState-prop" translate="no">State::initialState</a>).</p>
<p><b>Note: </b>The corresponding handler is <code translate="no">onStarted</code>.</p>
<p><b>See also </b><a href="./qml-qtqml-statemachine-statemachine.htm#running-prop" translate="no">running</a>, <a href="./qml-qtqml-statemachine-statemachine.htm#start-method" translate="no">start()</a>, and <a href="./qml-qtqml-statemachine-state.htm#finished-signal" translate="no">State::finished</a>.</p>
</div></div><!-- @@@started -->
<br>
<!-- $$$stopped[overload1]$$$stopped -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="stopped-signal" valign="top">
<td class="tblQmlFuncNode"><p>
<a name="stopped-signal"></a><span class="name">stopped</span>()<a class="plink" href="#stopped-signal" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>This signal is emitted when the state machine has stopped.</p>
<p><b>Note: </b>The corresponding handler is <code translate="no">onStopped</code>.</p>
<p><b>See also </b><a href="./qml-qtqml-statemachine-statemachine.htm#running-prop" translate="no">running</a>, <a href="./qml-qtqml-statemachine-statemachine.htm#stop-method" translate="no">stop()</a>, and <a href="./qml-qtqml-statemachine-state.htm#finished-signal" translate="no">State::finished</a>.</p>
</div></div><!-- @@@stopped -->
<br>
<h2>Method Documentation</h2>
<!-- $$$start[overload1]$$$start -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="start-method" valign="top">
<td class="tblQmlFuncNode"><p>
<a name="start-method"></a><span class="name">start</span>()<a class="plink" href="#start-method" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>Starts this state machine. The machine will reset its configuration and transition to the initial state. When a final top-level state (<a href="./qml-qtqml-statemachine-finalstate.htm" translate="no">FinalState</a>) is entered, the machine will emit the finished() signal.</p>
<div class="admonition note">
<p><b>Note: </b>A state machine will not run without a running event loop, such as the main application event loop started with <a href="./qcoreapplication.htm#exec" translate="no">QCoreApplication::exec()</a> or <a href="./qapplication.htm#exec" translate="no">QApplication::exec()</a>.</p>
</div>
<p><b>See also </b><a href="./qml-qtqml-statemachine-statemachine.htm#started-signal" translate="no">started</a>, <a href="./qml-qtqml-statemachine-state.htm#finished-signal" translate="no">State::finished</a>, <a href="./qml-qtqml-statemachine-statemachine.htm#stop-method" translate="no">stop()</a>, <a href="./qml-qtqml-statemachine-state.htm#initialState-prop" translate="no">State::initialState</a>, and <a href="./qml-qtqml-statemachine-statemachine.htm#running-prop" translate="no">running</a>.</p>
</div></div><!-- @@@start -->
<br>
<!-- $$$stop[overload1]$$$stop -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="stop-method" valign="top">
<td class="tblQmlFuncNode"><p>
<a name="stop-method"></a><span class="name">stop</span>()<a class="plink" href="#stop-method" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>Stops this state machine. The state machine will stop processing events and then emit the stopped signal.</p>
<p><b>See also </b><a href="./qml-qtqml-statemachine-statemachine.htm#stopped-signal" translate="no">stopped</a>, <a href="./qml-qtqml-statemachine-statemachine.htm#start-method" translate="no">start()</a>, and <a href="./qml-qtqml-statemachine-statemachine.htm#running-prop" translate="no">running</a>.</p>
</div></div><!-- @@@stop -->
<br>
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>