<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Styles Example | Qt Widgets</title>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtwidgets-index.htm" translate="no">Qt Widgets</a></li>
                            <li><a href="./examples-widgets.htm" translate="no">Qt Widgets Examples</a></li>
                            <li><a>Styles Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">Styles Example</h1>
<span class="subtitle"></span>
<!-- $$$widgets/styles-brief -->
<p>The Styles example illustrates how to create custom widget drawing styles using Qt, and demonstrates Qt's predefined styles.</p>
<!-- @@@widgets/styles -->
<!-- $$$widgets/styles-description -->
<div class="descr"> <a name="details"></a>
<div class="border"><p class="centerAlign"><img alt="" src="./images/styles-enabledwood.png"></p></div><p class="figCaption">Screenshot of the Styles example</p>
<p>A style in Qt is a subclass of <a href="./qstyle.htm" translate="no">QStyle</a> or of one of its subclasses. Styles perform drawing on behalf of widgets. Qt provides a whole range of predefined styles, either built into the Qt Widgets module or found in plugins. Styles are usually customized by subclassing <a href="./qproxystyle.htm" translate="no">QProxyStyle</a> and reimplementing a few virtual functions. While <a href="./qproxystyle.htm" translate="no">QProxyStyle</a> provides a transparent way to customize either a specific style or the appropriate platform's default style, Qt also provides <a href="./qcommonstyle.htm" translate="no">QCommonStyle</a> as a convenient base for full custom style implementations.</p>
<p>In this example, the custom style is called <code translate="no">NorwegianWoodStyle</code> and derives from <a href="./qproxystyle.htm" translate="no">QProxyStyle</a>. Its main features are the wooden textures used for filling most of the widgets and its round buttons and comboboxes.</p>
<p>To implement the style, we use some advanced features provided by <a href="./qpainter.htm" translate="no">QPainter</a>, such as <a href="./qpainter.htm#RenderHint-enum" translate="no">antialiasing</a> (to obtain smoother button edges), <a href="./qcolor.htm#alpha" translate="no">alpha blending</a> (to make the buttons appeared raised or sunken), and <a href="./qpainterpath.htm" translate="no">painter paths</a> (to fill the buttons and draw the outline). We also use many features of <a href="./qbrush.htm" translate="no">QBrush</a> and <a href="./qpalette.htm" translate="no">QPalette</a>.</p>
<p>The example consists of the following classes:</p>
<ul>
<li><code translate="no">NorwegianWoodStyle</code> inherits from <a href="./qproxystyle.htm" translate="no">QProxyStyle</a> and implements the Norwegian Wood style.</li>
<li><code translate="no">WidgetGallery</code> is a <code translate="no">QDialog</code> subclass that shows the most common widgets and allows the user to switch style dynamically.</li>
</ul>
<a name="norwegianwoodstyle-class-definition"></a>
<h4 id="norwegianwoodstyle-class-definition">NorwegianWoodStyle Class Definition<a class="plink" href="#norwegianwoodstyle-class-definition" title="Direct link to this headline"></a></h4>
<p>Here's the definition of the <code translate="no">NorwegianWoodStyle</code> class:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> NorwegianWoodStyle : <span class="keyword">public</span> <span class="type"><a href="./qproxystyle.htm" translate="no">QProxyStyle</a></span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    NorwegianWoodStyle();

    <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span> standardPalette() <span class="keyword">const</span> override;

    <span class="type">void</span> polish(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget) override;
    <span class="type">void</span> unpolish(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget) override;
    <span class="type">int</span> pixelMetric(PixelMetric metric<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qstyleoption.htm" translate="no">QStyleOption</a></span> <span class="operator">*</span>option<span class="operator">,</span>
                    <span class="keyword">const</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget) <span class="keyword">const</span> override;
    <span class="type">int</span> styleHint(StyleHint hint<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qstyleoption.htm" translate="no">QStyleOption</a></span> <span class="operator">*</span>option<span class="operator">,</span>
                  <span class="keyword">const</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget<span class="operator">,</span> <span class="type"><a href="./qstylehintreturn.htm" translate="no">QStyleHintReturn</a></span> <span class="operator">*</span>returnData) <span class="keyword">const</span> override;
    <span class="type">void</span> drawPrimitive(PrimitiveElement element<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qstyleoption.htm" translate="no">QStyleOption</a></span> <span class="operator">*</span>option<span class="operator">,</span>
                       <span class="type"><a href="./qpainter.htm" translate="no">QPainter</a></span> <span class="operator">*</span>painter<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget) <span class="keyword">const</span> override;
    <span class="type">void</span> drawControl(ControlElement control<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qstyleoption.htm" translate="no">QStyleOption</a></span> <span class="operator">*</span>option<span class="operator">,</span>
                     <span class="type"><a href="./qpainter.htm" translate="no">QPainter</a></span> <span class="operator">*</span>painter<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget) <span class="keyword">const</span> override;

<span class="keyword">private</span>:
    <span class="keyword">static</span> <span class="type">void</span> setTexture(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span> <span class="operator">&amp;</span>palette<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>ColorRole role<span class="operator">,</span>
                           <span class="keyword">const</span> <span class="type"><a href="./qimage.htm" translate="no">QImage</a></span> <span class="operator">&amp;</span>image);
    <span class="keyword">static</span> <span class="type"><a href="./qpainterpath.htm" translate="no">QPainterPath</a></span> roundRectPath(<span class="keyword">const</span> <span class="type"><a href="./qrect.htm" translate="no">QRect</a></span> <span class="operator">&amp;</span>rect);
    <span class="keyword">mutable</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span> m_standardPalette;
};</pre></div>
<p>The public functions are all declared in <a href="./qstyle.htm" translate="no">QStyle</a> (<a href="./qproxystyle.htm" translate="no">QProxyStyle</a>'s grandparent class) and reimplemented here to override the Windows look and feel. The private functions are helper functions.</p>
<a name="norwegianwoodstyle-class-implementation"></a>
<h4 id="norwegianwoodstyle-class-implementation">NorwegianWoodStyle Class Implementation<a class="plink" href="#norwegianwoodstyle-class-implementation" title="Direct link to this headline"></a></h4>
<p>We will now review the implementation of the <code translate="no">NorwegianWoodStyle</code> class.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span> NorwegianWoodStyle<span class="operator">::</span>standardPalette() <span class="keyword">const</span>
{
    <span class="keyword">if</span> (<span class="operator">!</span>m_standardPalette<span class="operator">.</span>isBrushSet(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Disabled<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Mid)) {
        <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span> brown(<span class="number">212</span><span class="operator">,</span> <span class="number">140</span><span class="operator">,</span> <span class="number">95</span>);
        <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span> beige(<span class="number">236</span><span class="operator">,</span> <span class="number">182</span><span class="operator">,</span> <span class="number">120</span>);
        <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span> slightlyOpaqueBlack(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">63</span>);

        <span class="type"><a href="./qimage.htm" translate="no">QImage</a></span> backgroundImage(<span class="string">":/images/woodbackground.png"</span>);
        <span class="type"><a href="./qimage.htm" translate="no">QImage</a></span> buttonImage(<span class="string">":/images/woodbutton.png"</span>);
        <span class="type"><a href="./qimage.htm" translate="no">QImage</a></span> midImage <span class="operator">=</span> buttonImage<span class="operator">.</span>convertToFormat(<span class="type"><a href="./qimage.htm" translate="no">QImage</a></span><span class="operator">::</span>Format_RGB32);

        <span class="type"><a href="./qpainter.htm" translate="no">QPainter</a></span> painter;
        painter<span class="operator">.</span>begin(<span class="operator">&amp;</span>midImage);
        painter<span class="operator">.</span>setPen(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>NoPen);
        painter<span class="operator">.</span>fillRect(midImage<span class="operator">.</span>rect()<span class="operator">,</span> slightlyOpaqueBlack);
        painter<span class="operator">.</span>end();</pre></div>
<p>The <code translate="no">standardPalette()</code> function is reimplemented from <a href="./qstyle.htm" translate="no">QStyle</a>. It returns a <a href="./qpalette.htm" translate="no">QPalette</a> with the style's preferred colors and textures. Most styles don't need to reimplement that function. The Norwegian Wood style reimplements it to set a "wooden" palette.</p>
<p>We start by defining a few <a href="./qcolor.htm" translate="no">QColor</a>s that we'll need. Then we load two PNG images. The <code translate="no">:</code> prefix in the file path indicates that the PNG files are <a href="./resources.htm" translate="no">embedded resources</a>.</p>
<div class="table"><table class="generic">
<tbody><tr class="odd" valign="top"><td><img alt="" src="./images/woodbackground.png"></td><td><b>woodbackground.png</b><p>This texture is used as the background of most widgets. The wood pattern is horizontal.</p>
</td></tr>
<tr class="even" valign="top"><td><img alt="" src="./images/woodbutton.png"></td><td><b>woodbutton.png</b><p>This texture is used for filling push buttons and comboboxes. The wood pattern is vertical and more reddish than the texture used for the background.</p>
</td></tr>
</tbody></table></div>
<p>The <code translate="no">midImage</code> variable is initialized to be the same as <code translate="no">buttonImage</code>, but then we use a <a href="./qpainter.htm" translate="no">QPainter</a> and fill it with a 25% opaque black color (a black with an <a href="./qcolor.htm#alpha" translate="no">alpha channel</a> of 63). The result is a somewhat darker image than <code translate="no">buttonImage</code>. This image will be used for filling buttons that the user is holding down.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span> palette(brown);

    palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>BrightText<span class="operator">,</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>white);
    palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Base<span class="operator">,</span> beige);
    palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Highlight<span class="operator">,</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>darkGreen);
    setTexture(palette<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Button<span class="operator">,</span> buttonImage);
    setTexture(palette<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Mid<span class="operator">,</span> midImage);
    setTexture(palette<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Window<span class="operator">,</span> backgroundImage);

    <span class="type"><a href="./qbrush.htm" translate="no">QBrush</a></span> brush <span class="operator">=</span> palette<span class="operator">.</span>window();
    brush<span class="operator">.</span>setColor(brush<span class="operator">.</span>color()<span class="operator">.</span>darker());

    palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Disabled<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>WindowText<span class="operator">,</span> brush);
    palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Disabled<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Text<span class="operator">,</span> brush);
    palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Disabled<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>ButtonText<span class="operator">,</span> brush);
    palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Disabled<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Base<span class="operator">,</span> brush);
    palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Disabled<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Button<span class="operator">,</span> brush);
    palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Disabled<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Mid<span class="operator">,</span> brush);

    m_standardPalette <span class="operator">=</span> palette;
}

<span class="keyword">return</span> m_standardPalette;
}</pre></div>
<p>We initialize the palette. Palettes have various <a href="./qpalette.htm#ColorRole-enum" translate="no">color roles</a>, such as <a href="./qpalette.htm#ColorRole-enum" translate="no">QPalette::Base</a> (used for filling text editors, item views, etc.), <a href="./qpalette.htm#ColorRole-enum" translate="no">QPalette::Text</a> (used for foreground text), and <a href="./qpalette.htm#ColorRole-enum" translate="no">QPalette::Background</a> (used for the background of most widgets). Each role has its own <a href="./qbrush.htm" translate="no">QBrush</a>, which usually is a plain color but can also be a brush pattern or even a texture (a <a href="./qpixmap.htm" translate="no">QPixmap</a>).</p>
<p>In addition to the roles, palettes have several <a href="./qpalette.htm#ColorGroup-enum" translate="no">color groups</a>: active, disabled, and inactive. The active color group is used for painting widgets in the active window. The disabled group is used for disabled widgets. The inactive group is used for all other widgets. Most palettes have identical active and inactive groups, while the disabled group uses darker shades.</p>
<p>We initialize the <a href="./qpalette.htm" translate="no">QPalette</a> object with a brown color. Qt automatically derivates all color roles for all color groups from that single color. We then override some of the default values. For example, we use <a href="./qt.htm#GlobalColor-enum" translate="no">Qt::darkGreen</a> instead of the default (<a href="./qt.htm#GlobalColor-enum" translate="no">Qt::darkBlue</a>) for the <a href="./qpalette.htm#ColorRole-enum" translate="no">QPalette::Highlight</a> role. The <a href="./qpalette.htm#setBrush" translate="no">QPalette::setBrush</a>() overload that we use here sets the same color or brush for all three color groups.</p>
<p>The <code translate="no">setTexture()</code> function is a private function that sets the texture for a certain color role, while preserving the existing color in the <a href="./qbrush.htm" translate="no">QBrush</a>. A <a href="./qbrush.htm" translate="no">QBrush</a> can hold both a solid color and a texture at the same time. The solid color is used for drawing text and other graphical elements where textures don't look good.</p>
<p>At the end, we set the brush for the disabled color group of the palette. We use <code translate="no">woodbackground.png</code> as the texture for all disabled widgets, including buttons, and use a darker color to accompany the texture.</p>
<p class="centerAlign"><img alt="The Norwegian Wood style with disabled widgets" src="./images/styles-disabledwood.png"></p><p>Let's move on to the other functions reimplemented from <a href="./qproxystyle.htm" translate="no">QProxyStyle</a>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> NorwegianWoodStyle<span class="operator">::</span>polish(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget)
{
    <span class="keyword">if</span> (qobject_cast<span class="operator">&lt;</span><span class="type"><a href="./qpushbutton.htm" translate="no">QPushButton</a></span> <span class="operator">*</span><span class="operator">&gt;</span>(widget)
            <span class="operator">|</span><span class="operator">|</span> qobject_cast<span class="operator">&lt;</span><span class="type"><a href="./qcombobox.htm" translate="no">QComboBox</a></span> <span class="operator">*</span><span class="operator">&gt;</span>(widget))
        widget<span class="operator">-</span><span class="operator">&gt;</span>setAttribute(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>WA_Hover<span class="operator">,</span> <span class="keyword">true</span>);
}</pre></div>
<p>This <a href="./qstyle.htm#polish" translate="no">QStyle::polish</a>() overload is called once on every widget drawn using the style. We reimplement it to set the <a href="./qt.htm#WidgetAttribute-enum" translate="no">Qt::WA_Hover</a> attribute on <a href="./qpushbutton.htm" translate="no">QPushButton</a>s and <a href="./qcombobox.htm" translate="no">QComboBox</a>es. When this attribute is set, Qt generates paint events when the mouse pointer enters or leaves the widget. This makes it possible to render push buttons and comboboxes differently when the mouse pointer is over them.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> NorwegianWoodStyle<span class="operator">::</span>unpolish(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget)
{
    <span class="keyword">if</span> (qobject_cast<span class="operator">&lt;</span><span class="type"><a href="./qpushbutton.htm" translate="no">QPushButton</a></span> <span class="operator">*</span><span class="operator">&gt;</span>(widget)
            <span class="operator">|</span><span class="operator">|</span> qobject_cast<span class="operator">&lt;</span><span class="type"><a href="./qcombobox.htm" translate="no">QComboBox</a></span> <span class="operator">*</span><span class="operator">&gt;</span>(widget))
        widget<span class="operator">-</span><span class="operator">&gt;</span>setAttribute(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>WA_Hover<span class="operator">,</span> <span class="keyword">false</span>);
}</pre></div>
<p>This <a href="./qstyle.htm#unpolish" translate="no">QStyle::unpolish</a>() overload is called to undo any modification done to the widget in <code translate="no">polish()</code>. For simplicity, we assume that the flag wasn't set before <code translate="no">polish()</code> was called. In an ideal world, we would remember the original state for each widgets (e.g., using a <a href="./qmap.htm" translate="no">QMap</a>&lt;<a href="./qwidget.htm" translate="no">QWidget</a> *, bool&gt;) and restore it in <code translate="no">unpolish()</code>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">int</span> NorwegianWoodStyle<span class="operator">::</span>pixelMetric(PixelMetric metric<span class="operator">,</span>
                                    <span class="keyword">const</span> <span class="type"><a href="./qstyleoption.htm" translate="no">QStyleOption</a></span> <span class="operator">*</span>option<span class="operator">,</span>
                                    <span class="keyword">const</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget) <span class="keyword">const</span>
{
    <span class="keyword">switch</span> (metric) {
    <span class="keyword">case</span> PM_ComboBoxFrameWidth:
        <span class="keyword">return</span> <span class="number">8</span>;
    <span class="keyword">case</span> PM_ScrollBarExtent:
        <span class="keyword">return</span> <span class="type"><a href="./qproxystyle.htm" translate="no">QProxyStyle</a></span><span class="operator">::</span>pixelMetric(metric<span class="operator">,</span> option<span class="operator">,</span> widget) <span class="operator">+</span> <span class="number">4</span>;
    <span class="keyword">default</span>:
        <span class="keyword">return</span> <span class="type"><a href="./qproxystyle.htm" translate="no">QProxyStyle</a></span><span class="operator">::</span>pixelMetric(metric<span class="operator">,</span> option<span class="operator">,</span> widget);
    }
}</pre></div>
<p>The <a href="./qstyle.htm#pixelMetric" translate="no">pixelMetric()</a> function returns the size in pixels for a certain user interface element. By reimplementing this function, we can affect the way certain widgets are drawn and their size hint. Here, we return 8 as the width around a shown in a <a href="./qcombobox.htm" translate="no">QComboBox</a>, ensuring that there is enough place around the text and the arrow for the Norwegian Wood round corners. The default value for this setting in the Windows style is 2.</p>
<p>We also change the extent of <a href="./qscrollbar.htm" translate="no">QScrollBar</a>s, i.e., the height for a horizontal scroll bar and the width for a vertical scroll bar, to be 4 pixels more than in the Windows style. This makes the style a bit more distinctive.</p>
<p>For all other <a href="./qstyle.htm#PixelMetric-enum" translate="no">QStyle::PixelMetric</a> elements, we use the Windows settings.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">int</span> NorwegianWoodStyle<span class="operator">::</span>styleHint(StyleHint hint<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qstyleoption.htm" translate="no">QStyleOption</a></span> <span class="operator">*</span>option<span class="operator">,</span>
                                  <span class="keyword">const</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget<span class="operator">,</span>
                                  <span class="type"><a href="./qstylehintreturn.htm" translate="no">QStyleHintReturn</a></span> <span class="operator">*</span>returnData) <span class="keyword">const</span>
{
    <span class="keyword">switch</span> (hint) {
    <span class="keyword">case</span> SH_DitherDisabledText:
        <span class="keyword">return</span> <span class="type">int</span>(<span class="keyword">false</span>);
    <span class="keyword">case</span> SH_EtchDisabledText:
        <span class="keyword">return</span> <span class="type">int</span>(<span class="keyword">true</span>);
    <span class="keyword">default</span>:
        <span class="keyword">return</span> <span class="type"><a href="./qproxystyle.htm" translate="no">QProxyStyle</a></span><span class="operator">::</span>styleHint(hint<span class="operator">,</span> option<span class="operator">,</span> widget<span class="operator">,</span> returnData);
    }
}</pre></div>
<p>The <a href="./qstyle.htm#styleHint" translate="no">styleHint()</a> function returns some hints to widgets or to the base style (in our case <a href="./qproxystyle.htm" translate="no">QProxyStyle</a>) about how to draw the widgets. The Windows style returns <code translate="no">true</code> for the <a href="./qstyle.htm#StyleHint-enum" translate="no">QStyle::SH_DitherDisabledText</a> hint, resulting in a most unpleasing visual effect. We override this behavior and return <code translate="no">false</code> instead. We also return <code translate="no">true</code> for the <a href="./qstyle.htm#StyleHint-enum" translate="no">QStyle::SH_EtchDisabledText</a> hint, meaning that disabled text is rendered with an embossed look.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> NorwegianWoodStyle<span class="operator">::</span>drawPrimitive(PrimitiveElement element<span class="operator">,</span>
                                       <span class="keyword">const</span> <span class="type"><a href="./qstyleoption.htm" translate="no">QStyleOption</a></span> <span class="operator">*</span>option<span class="operator">,</span>
                                       <span class="type"><a href="./qpainter.htm" translate="no">QPainter</a></span> <span class="operator">*</span>painter<span class="operator">,</span>
                                       <span class="keyword">const</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget) <span class="keyword">const</span>
{
    <span class="keyword">switch</span> (element) {
    <span class="keyword">case</span> PE_PanelButtonCommand:
        {
            <span class="type">int</span> delta <span class="operator">=</span> (option<span class="operator">-</span><span class="operator">&gt;</span>state <span class="operator">&amp;</span> State_MouseOver) <span class="operator">?</span> <span class="number">64</span> : <span class="number">0</span>;
            <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span> slightlyOpaqueBlack(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">63</span>);
            <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span> semiTransparentWhite(<span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">127</span> <span class="operator">+</span> delta);
            <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span> semiTransparentBlack(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">127</span> <span class="operator">-</span> delta);

            <span class="type">int</span> x<span class="operator">,</span> y<span class="operator">,</span> width<span class="operator">,</span> height;
            option<span class="operator">-</span><span class="operator">&gt;</span>rect<span class="operator">.</span>getRect(<span class="operator">&amp;</span>x<span class="operator">,</span> <span class="operator">&amp;</span>y<span class="operator">,</span> <span class="operator">&amp;</span>width<span class="operator">,</span> <span class="operator">&amp;</span>height);</pre></div>
<p>The <a href="./qstyle.htm#drawPrimitive" translate="no">drawPrimitive()</a> function is called by Qt widgets to draw various fundamental graphical elements. Here we reimplement it to draw <a href="./qpushbutton.htm" translate="no">QPushButton</a> and <a href="./qcombobox.htm" translate="no">QComboBox</a> with round corners. The button part of these widgets is drawn using the <a href="./qstyle.htm#PrimitiveElement-enum" translate="no">QStyle::PE_PanelButtonCommand</a> primitive element.</p>
<p>The <code translate="no">option</code> parameter, of type <a href="./qstyleoption.htm" translate="no">QStyleOption</a>, contains everything we need to know about the widget we want to draw on. In particular, <code translate="no">option-&gt;rect</code> gives the rectangle within which to draw the primitive element. The <code translate="no">painter</code> parameter is a <a href="./qpainter.htm" translate="no">QPainter</a> object that we can use to draw on the widget.</p>
<p>The <code translate="no">widget</code> parameter is the widget itself. Normally, all the information we need is available in <code translate="no">option</code> and <code translate="no">painter</code>, so we don't need <code translate="no">widget</code>. We can use it to perform special effects; for example, QMacStyle uses it to animate default buttons. If you use it, be aware that the caller is allowed to pass a null pointer.</p>
<p>We start by defining three <a href="./qcolor.htm" translate="no">QColor</a>s that we'll need later on. We also put the x, y, width, and height components of the widget's rectangle in local variables. The value used for the <code translate="no">semiTransparentWhite</code> and for the <code translate="no">semiTransparentBlack</code> color's alpha channel depends on whether the mouse cursor is over the widget or not. Since we set the <a href="./qt.htm#WidgetAttribute-enum" translate="no">Qt::WA_Hover</a> attribute on <a href="./qpushbutton.htm" translate="no">QPushButton</a>s and <a href="./qcombobox.htm" translate="no">QComboBox</a>es, we can rely on the <a href="./qstyle.htm#StateFlag-enum" translate="no">QStyle::State_MouseOver</a> flag to be set when the mouse is over the widget.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">            <span class="type"><a href="./qpainterpath.htm" translate="no">QPainterPath</a></span> roundRect <span class="operator">=</span> roundRectPath(option<span class="operator">-</span><span class="operator">&gt;</span>rect);
            <span class="type">int</span> radius <span class="operator">=</span> <a href="./qtglobal.htm#qMin" translate="no">qMin</a>(width<span class="operator">,</span> height) <span class="operator">/</span> <span class="number">2</span>;</pre></div>
<p>The <code translate="no">roundRect</code> variable is a <a href="./qpainterpath.htm" translate="no">QPainterPath</a>. A <a href="./qpainterpath.htm" translate="no">QPainterPath</a> is is a vectorial specification of a shape. Any shape (rectangle, ellipse, spline, etc.) or combination of shapes can be expressed as a path. We will use <code translate="no">roundRect</code> both for filling the button background with a wooden texture and for drawing the outline. The <code translate="no">roundRectPath()</code> function is a private function; we will come back to it later.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">            <span class="type"><a href="./qbrush.htm" translate="no">QBrush</a></span> brush;
            bool darker;

            <span class="keyword">const</span> <span class="type"><a href="./qstyleoptionbutton.htm" translate="no">QStyleOptionButton</a></span> <span class="operator">*</span>buttonOption <span class="operator">=</span>
                    qstyleoption_cast<span class="operator">&lt;</span><span class="keyword">const</span> <span class="type"><a href="./qstyleoptionbutton.htm" translate="no">QStyleOptionButton</a></span> <span class="operator">*</span><span class="operator">&gt;</span>(option);
            <span class="keyword">if</span> (buttonOption
                    <span class="operator">&amp;</span><span class="operator">&amp;</span> (buttonOption<span class="operator">-</span><span class="operator">&gt;</span>features <span class="operator">&amp;</span> <span class="type"><a href="./qstyleoptionbutton.htm" translate="no">QStyleOptionButton</a></span><span class="operator">::</span>Flat)) {
                brush <span class="operator">=</span> option<span class="operator">-</span><span class="operator">&gt;</span>palette<span class="operator">.</span>window();
                darker <span class="operator">=</span> (option<span class="operator">-</span><span class="operator">&gt;</span>state <span class="operator">&amp;</span> (State_Sunken <span class="operator">|</span> State_On));
            } <span class="keyword">else</span> {
                <span class="keyword">if</span> (option<span class="operator">-</span><span class="operator">&gt;</span>state <span class="operator">&amp;</span> (State_Sunken <span class="operator">|</span> State_On)) {
                    brush <span class="operator">=</span> option<span class="operator">-</span><span class="operator">&gt;</span>palette<span class="operator">.</span>mid();
                    darker <span class="operator">=</span> <span class="operator">!</span>(option<span class="operator">-</span><span class="operator">&gt;</span>state <span class="operator">&amp;</span> State_Sunken);
                } <span class="keyword">else</span> {
                    brush <span class="operator">=</span> option<span class="operator">-</span><span class="operator">&gt;</span>palette<span class="operator">.</span>button();
                    darker <span class="operator">=</span> <span class="keyword">false</span>;
                }
            }</pre></div>
<p>We define two variables, <code translate="no">brush</code> and <code translate="no">darker</code>, and initialize them based on the state of the button:</p>
<ul>
<li>If the button is a <a href="./qpushbutton.htm#flat-prop" translate="no">flat button</a>, we use the <a href="./qpalette.htm#ColorRole-enum" translate="no">Background</a> brush. We set <code translate="no">darker</code> to <code translate="no">true</code> if the button is <a href="./qabstractbutton.htm#down-prop" translate="no">down</a> or <a href="./qabstractbutton.htm#checked-prop" translate="no">checked</a>.</li>
<li>If the button is currently held down by the user or in the <a href="./qabstractbutton.htm#checked-prop" translate="no">checked</a> state, we use the <a href="./qpalette.htm#ColorRole-enum" translate="no">Mid</a> component of the palette. We set <code translate="no">darker</code> to <code translate="no">true</code> if the button is <a href="./qabstractbutton.htm#checked-prop" translate="no">checked</a>.</li>
<li>Otherwise, we use the <a href="./qpalette.htm#ColorRole-enum" translate="no">Button</a> component of the palette.</li>
</ul>
<p>The screenshot below illustrates how <a href="./qpushbutton.htm" translate="no">QPushButton</a>s are rendered based on their state:</p>
<p class="centerAlign"><img alt="Norwegian Wood buttons in different states" src="./images/styles-woodbuttons.png"></p><p>To discover whether the button is flat or not, we need to cast the <code translate="no">option</code> parameter to <a href="./qstyleoptionbutton.htm" translate="no">QStyleOptionButton</a> and check if the <a href="./qstyleoptionbutton.htm#features-var" translate="no">features</a> member specifies the <a href="./qstyleoptionbutton.htm#ButtonFeature-enum" translate="no">QStyleOptionButton::Flat</a> flag. The <a href="./qstyleoption.htm#qstyleoption_cast" translate="no">qstyleoption_cast</a>() function performs a dynamic cast; if <code translate="no">option</code> is not a <a href="./qstyleoptionbutton.htm" translate="no">QStyleOptionButton</a>, <a href="./qstyleoption.htm#qstyleoption_cast" translate="no">qstyleoption_cast</a>() returns a null pointer.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">            painter<span class="operator">-</span><span class="operator">&gt;</span>save();
            painter<span class="operator">-</span><span class="operator">&gt;</span>setRenderHint(<span class="type"><a href="./qpainter.htm" translate="no">QPainter</a></span><span class="operator">::</span>Antialiasing<span class="operator">,</span> <span class="keyword">true</span>);
            painter<span class="operator">-</span><span class="operator">&gt;</span>fillPath(roundRect<span class="operator">,</span> brush);
            <span class="keyword">if</span> (darker)
                painter<span class="operator">-</span><span class="operator">&gt;</span>fillPath(roundRect<span class="operator">,</span> slightlyOpaqueBlack);</pre></div>
<p>We turn on antialiasing on <a href="./qpainter.htm" translate="no">QPainter</a>. Antialiasing is a technique that reduces the visual distortion that occurs when the edges of a shape are converted into pixels. For the Norwegian Wood style, we use it to obtain smoother edges for the round buttons.</p>
<p class="centerAlign"><img alt="Norwegian wood buttons with and without antialiasing" src="./images/styles-aliasing.png"></p><p>The first call to <a href="./qpainter.htm#fillPath" translate="no">QPainter::fillPath</a>() draws the background of the button with a wooden texture. The second call to <a href="./qpainter.htm#fillPath" translate="no">fillPath()</a> paints the same area with a semi-transparent black color (a black color with an alpha channel of 63) to make the area darker if <code translate="no">darker</code> is true.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">            <span class="type">int</span> penWidth;
            <span class="keyword">if</span> (radius <span class="operator">&lt;</span> <span class="number">10</span>)
                penWidth <span class="operator">=</span> <span class="number">3</span>;
            <span class="keyword">else</span> <span class="keyword">if</span> (radius <span class="operator">&lt;</span> <span class="number">20</span>)
                penWidth <span class="operator">=</span> <span class="number">5</span>;
            <span class="keyword">else</span>
                penWidth <span class="operator">=</span> <span class="number">7</span>;

            <span class="type"><a href="./qpen.htm" translate="no">QPen</a></span> topPen(semiTransparentWhite<span class="operator">,</span> penWidth);
            <span class="type"><a href="./qpen.htm" translate="no">QPen</a></span> bottomPen(semiTransparentBlack<span class="operator">,</span> penWidth);

            <span class="keyword">if</span> (option<span class="operator">-</span><span class="operator">&gt;</span>state <span class="operator">&amp;</span> (State_Sunken <span class="operator">|</span> State_On))
                <a href="./qtalgorithms.htm#qSwap" translate="no">qSwap</a>(topPen<span class="operator">,</span> bottomPen);</pre></div>
<p>Next, we draw the outline. The top-left half of the outline and the bottom-right half of the outline are drawn using different <a href="./qpen.htm" translate="no">QPen</a>s to produce a 3D effect. Normally, the top-left half of the outline is drawn lighter whereas the bottom-right half is drawn darker, but if the button is <a href="./qabstractbutton.htm#down-prop" translate="no">down</a> or <a href="./qabstractbutton.htm#checked-prop" translate="no">checked</a>, we invert the two <a href="./qpen.htm" translate="no">QPen</a>s to give a sunken look to the button.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">            <span class="type">int</span> x1 <span class="operator">=</span> x;
            <span class="type">int</span> x2 <span class="operator">=</span> x <span class="operator">+</span> radius;
            <span class="type">int</span> x3 <span class="operator">=</span> x <span class="operator">+</span> width <span class="operator">-</span> radius;
            <span class="type">int</span> x4 <span class="operator">=</span> x <span class="operator">+</span> width;

            <span class="keyword">if</span> (option<span class="operator">-</span><span class="operator">&gt;</span>direction <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>RightToLeft) {
                <a href="./qtalgorithms.htm#qSwap" translate="no">qSwap</a>(x1<span class="operator">,</span> x4);
                <a href="./qtalgorithms.htm#qSwap" translate="no">qSwap</a>(x2<span class="operator">,</span> x3);
            }

            <span class="type"><a href="./qpolygon.htm" translate="no">QPolygon</a></span> topHalf;
            topHalf <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qpoint.htm" translate="no">QPoint</a></span>(x1<span class="operator">,</span> y)
                    <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qpoint.htm" translate="no">QPoint</a></span>(x4<span class="operator">,</span> y)
                    <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qpoint.htm" translate="no">QPoint</a></span>(x3<span class="operator">,</span> y <span class="operator">+</span> radius)
                    <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qpoint.htm" translate="no">QPoint</a></span>(x2<span class="operator">,</span> y <span class="operator">+</span> height <span class="operator">-</span> radius)
                    <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qpoint.htm" translate="no">QPoint</a></span>(x1<span class="operator">,</span> y <span class="operator">+</span> height);

            painter<span class="operator">-</span><span class="operator">&gt;</span>setClipPath(roundRect);
            painter<span class="operator">-</span><span class="operator">&gt;</span>setClipRegion(topHalf<span class="operator">,</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>IntersectClip);
            painter<span class="operator">-</span><span class="operator">&gt;</span>setPen(topPen);
            painter<span class="operator">-</span><span class="operator">&gt;</span>drawPath(roundRect);</pre></div>
<p>We draw the top-left part of the outline by calling <a href="./qpainter.htm#drawPath" translate="no">QPainter::drawPath</a>() with an appropriate <a href="./qpainter.htm#setClipRegion" translate="no">clip region</a>. If the <a href="./qstyleoption.htm#direction-var" translate="no">layout direction</a> is right-to-left instead of left-to-right, we swap the <code translate="no">x1</code>, <code translate="no">x2</code>, <code translate="no">x3</code>, and <code translate="no">x4</code> variables to obtain correct results. On right-to-left desktop, the "light" comes from the top-right corner of the screen instead of the top-left corner; raised and sunken widgets must be drawn accordingly.</p>
<p>The diagram below illustrates how 3D effects are drawn according to the layout direction. The area in red on the diagram corresponds to the <code translate="no">topHalf</code> polygon:</p>
<p class="centerAlign"><img alt="" src="./images/styles-3d.png"></p><p>An easy way to test how a style looks in right-to-left mode is to pass the <code translate="no">-reverse</code> command-line option to the application. This option is recognized by the <a href="./qapplication.htm" translate="no">QApplication</a> constructor.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">            <span class="type"><a href="./qpolygon.htm" translate="no">QPolygon</a></span> bottomHalf <span class="operator">=</span> topHalf;
            bottomHalf<span class="operator">[</span><span class="number">0</span><span class="operator">]</span> <span class="operator">=</span> <span class="type"><a href="./qpoint.htm" translate="no">QPoint</a></span>(x4<span class="operator">,</span> y <span class="operator">+</span> height);

            painter<span class="operator">-</span><span class="operator">&gt;</span>setClipPath(roundRect);
            painter<span class="operator">-</span><span class="operator">&gt;</span>setClipRegion(bottomHalf<span class="operator">,</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>IntersectClip);
            painter<span class="operator">-</span><span class="operator">&gt;</span>setPen(bottomPen);
            painter<span class="operator">-</span><span class="operator">&gt;</span>drawPath(roundRect);

            painter<span class="operator">-</span><span class="operator">&gt;</span>setPen(option<span class="operator">-</span><span class="operator">&gt;</span>palette<span class="operator">.</span>windowText()<span class="operator">.</span>color());
            painter<span class="operator">-</span><span class="operator">&gt;</span>setClipping(<span class="keyword">false</span>);
            painter<span class="operator">-</span><span class="operator">&gt;</span>drawPath(roundRect);

            painter<span class="operator">-</span><span class="operator">&gt;</span>restore();
        }
        <span class="keyword">break</span>;
    <span class="keyword">default</span>:
        <span class="type"><a href="./qproxystyle.htm" translate="no">QProxyStyle</a></span><span class="operator">::</span>drawPrimitive(element<span class="operator">,</span> option<span class="operator">,</span> painter<span class="operator">,</span> widget);
    }
}</pre></div>
<p>The bottom-right part of the outline is drawn in a similar fashion. Then we draw a one-pixel wide outline around the entire button, using the <a href="./qpalette.htm#ColorRole-enum" translate="no">Foreground</a> component of the <a href="./qpalette.htm" translate="no">QPalette</a>.</p>
<p>This completes the <a href="./qstyle.htm#PrimitiveElement-enum" translate="no">QStyle::PE_PanelButtonCommand</a> case of the <code translate="no">switch</code> statement. Other primitive elements are handled by the base style. Let's now turn to the other <code translate="no">NorwegianWoodStyle</code> member functions:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> NorwegianWoodStyle<span class="operator">::</span>drawControl(ControlElement element<span class="operator">,</span>
                                     <span class="keyword">const</span> <span class="type"><a href="./qstyleoption.htm" translate="no">QStyleOption</a></span> <span class="operator">*</span>option<span class="operator">,</span>
                                     <span class="type"><a href="./qpainter.htm" translate="no">QPainter</a></span> <span class="operator">*</span>painter<span class="operator">,</span>
                                     <span class="keyword">const</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget) <span class="keyword">const</span>
{
    <span class="keyword">switch</span> (element) {
    <span class="keyword">case</span> CE_PushButtonLabel:
        {
            <span class="type"><a href="./qstyleoptionbutton.htm" translate="no">QStyleOptionButton</a></span> myButtonOption;
            <span class="keyword">const</span> <span class="type"><a href="./qstyleoptionbutton.htm" translate="no">QStyleOptionButton</a></span> <span class="operator">*</span>buttonOption <span class="operator">=</span>
                    qstyleoption_cast<span class="operator">&lt;</span><span class="keyword">const</span> <span class="type"><a href="./qstyleoptionbutton.htm" translate="no">QStyleOptionButton</a></span> <span class="operator">*</span><span class="operator">&gt;</span>(option);
            <span class="keyword">if</span> (buttonOption) {
                myButtonOption <span class="operator">=</span> <span class="operator">*</span>buttonOption;
                <span class="keyword">if</span> (myButtonOption<span class="operator">.</span>palette<span class="operator">.</span>currentColorGroup()
                        <span class="operator">!</span><span class="operator">=</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>Disabled) {
                    <span class="keyword">if</span> (myButtonOption<span class="operator">.</span>state <span class="operator">&amp;</span> (State_Sunken <span class="operator">|</span> State_On)) {
                        myButtonOption<span class="operator">.</span>palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>ButtonText<span class="operator">,</span>
                                myButtonOption<span class="operator">.</span>palette<span class="operator">.</span>brightText());
                    }
                }
            }
            <span class="type"><a href="./qproxystyle.htm" translate="no">QProxyStyle</a></span><span class="operator">::</span>drawControl(element<span class="operator">,</span> <span class="operator">&amp;</span>myButtonOption<span class="operator">,</span> painter<span class="operator">,</span> widget);
        }
        <span class="keyword">break</span>;
    <span class="keyword">default</span>:
        <span class="type"><a href="./qproxystyle.htm" translate="no">QProxyStyle</a></span><span class="operator">::</span>drawControl(element<span class="operator">,</span> option<span class="operator">,</span> painter<span class="operator">,</span> widget);
    }
}</pre></div>
<p>We reimplement <a href="./qstyle.htm#drawControl" translate="no">QStyle::drawControl</a>() to draw the text on a <a href="./qpushbutton.htm" translate="no">QPushButton</a> in a bright color when the button is <a href="./qabstractbutton.htm#down-prop" translate="no">down</a> or <a href="./qabstractbutton.htm#checked-prop" translate="no">checked</a>.</p>
<p>If the <code translate="no">option</code> parameter points to a <a href="./qstyleoptionbutton.htm" translate="no">QStyleOptionButton</a> object (it normally should), we take a copy of the object and modify its <a href="./qstyleoption.htm#palette-var" translate="no">palette</a> member to make the <a href="./qpalette.htm#ColorRole-enum" translate="no">QPalette::ButtonText</a> be the same as the <a href="./qpalette.htm#ColorRole-enum" translate="no">QPalette::BrightText</a> component (unless the widget is disabled).</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> NorwegianWoodStyle<span class="operator">::</span>setTexture(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span> <span class="operator">&amp;</span>palette<span class="operator">,</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>ColorRole role<span class="operator">,</span>
                                    <span class="keyword">const</span> <span class="type"><a href="./qimage.htm" translate="no">QImage</a></span> <span class="operator">&amp;</span>image)
{
    <span class="keyword">for</span> (<span class="type">int</span> i <span class="operator">=</span> <span class="number">0</span>; i <span class="operator">&lt;</span> <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>NColorGroups; <span class="operator">+</span><span class="operator">+</span>i) {
        <span class="type"><a href="./qbrush.htm" translate="no">QBrush</a></span> brush(image);
        brush<span class="operator">.</span>setColor(palette<span class="operator">.</span>brush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>ColorGroup(i)<span class="operator">,</span> role)<span class="operator">.</span>color());
        palette<span class="operator">.</span>setBrush(<span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span><span class="operator">::</span>ColorGroup(i)<span class="operator">,</span> role<span class="operator">,</span> brush);
    }
}</pre></div>
<p>The <code translate="no">setTexture()</code> function is a private function that sets the <a href="./qbrush.htm#texture" translate="no">texture</a> component of the <a href="./qbrush.htm" translate="no">QBrush</a>es for a certain <a href="./qpalette.htm#ColorRole-enum" translate="no">color role</a>, for all three <a href="./qpalette.htm#ColorGroup-enum" translate="no">color groups</a> (active, disabled, inactive). We used it to initialize the Norwegian Wood palette in <code translate="no">standardPalette</code>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qpainterpath.htm" translate="no">QPainterPath</a></span> NorwegianWoodStyle<span class="operator">::</span>roundRectPath(<span class="keyword">const</span> <span class="type"><a href="./qrect.htm" translate="no">QRect</a></span> <span class="operator">&amp;</span>rect)
{
    <span class="type">int</span> radius <span class="operator">=</span> <a href="./qtglobal.htm#qMin" translate="no">qMin</a>(rect<span class="operator">.</span>width()<span class="operator">,</span> rect<span class="operator">.</span>height()) <span class="operator">/</span> <span class="number">2</span>;
    <span class="type">int</span> diam <span class="operator">=</span> <span class="number">2</span> <span class="operator">*</span> radius;

    <span class="type">int</span> x1<span class="operator">,</span> y1<span class="operator">,</span> x2<span class="operator">,</span> y2;
    rect<span class="operator">.</span>getCoords(<span class="operator">&amp;</span>x1<span class="operator">,</span> <span class="operator">&amp;</span>y1<span class="operator">,</span> <span class="operator">&amp;</span>x2<span class="operator">,</span> <span class="operator">&amp;</span>y2);

    <span class="type"><a href="./qpainterpath.htm" translate="no">QPainterPath</a></span> path;
    path<span class="operator">.</span>moveTo(x2<span class="operator">,</span> y1 <span class="operator">+</span> radius);
    path<span class="operator">.</span>arcTo(<span class="type"><a href="./qrect.htm" translate="no">QRect</a></span>(x2 <span class="operator">-</span> diam<span class="operator">,</span> y1<span class="operator">,</span> diam<span class="operator">,</span> diam)<span class="operator">,</span> <span class="number">0.0</span><span class="operator">,</span> <span class="operator">+</span><span class="number">90.0</span>);
    path<span class="operator">.</span>lineTo(x1 <span class="operator">+</span> radius<span class="operator">,</span> y1);
    path<span class="operator">.</span>arcTo(<span class="type"><a href="./qrect.htm" translate="no">QRect</a></span>(x1<span class="operator">,</span> y1<span class="operator">,</span> diam<span class="operator">,</span> diam)<span class="operator">,</span> <span class="number">90.0</span><span class="operator">,</span> <span class="operator">+</span><span class="number">90.0</span>);
    path<span class="operator">.</span>lineTo(x1<span class="operator">,</span> y2 <span class="operator">-</span> radius);
    path<span class="operator">.</span>arcTo(<span class="type"><a href="./qrect.htm" translate="no">QRect</a></span>(x1<span class="operator">,</span> y2 <span class="operator">-</span> diam<span class="operator">,</span> diam<span class="operator">,</span> diam)<span class="operator">,</span> <span class="number">180.0</span><span class="operator">,</span> <span class="operator">+</span><span class="number">90.0</span>);
    path<span class="operator">.</span>lineTo(x1 <span class="operator">+</span> radius<span class="operator">,</span> y2);
    path<span class="operator">.</span>arcTo(<span class="type"><a href="./qrect.htm" translate="no">QRect</a></span>(x2 <span class="operator">-</span> diam<span class="operator">,</span> y2 <span class="operator">-</span> diam<span class="operator">,</span> diam<span class="operator">,</span> diam)<span class="operator">,</span> <span class="number">270.0</span><span class="operator">,</span> <span class="operator">+</span><span class="number">90.0</span>);
    path<span class="operator">.</span>closeSubpath();
    <span class="keyword">return</span> path;
}</pre></div>
<p>The <code translate="no">roundRectPath()</code> function is a private function that constructs a <a href="./qpainterpath.htm" translate="no">QPainterPath</a> object for round buttons. The path consists of eight segments: four arc segments for the corners and four lines for the sides.</p>
<p>With around 250 lines of code, we have a fully functional custom style based on one of the predefined styles. Custom styles can be used to provide a distinct look to an application or family of applications.</p>
<a name="widgetgallery-class"></a>
<h4 id="widgetgallery-class">WidgetGallery Class<a class="plink" href="#widgetgallery-class" title="Direct link to this headline"></a></h4>
<p>For completeness, we will quickly review the <code translate="no">WidgetGallery</code> class, which contains the most common Qt widgets and allows the user to change style dynamically. Here's the class definition:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> WidgetGallery : <span class="keyword">public</span> <span class="type"><a href="./qdialog.htm" translate="no">QDialog</a></span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    WidgetGallery(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);

<span class="keyword">protected</span>:
    <span class="type">void</span> changeEvent(<span class="type"><a href="./qevent.htm" translate="no">QEvent</a></span> <span class="operator">*</span>) override;

<span class="keyword">private</span> <span class="keyword">slots</span>:
    <span class="type">void</span> changeStyle(<span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> <span class="operator">&amp;</span>styleName);
    <span class="type">void</span> styleChanged();
    <span class="type">void</span> changePalette();
    <span class="type">void</span> advanceProgressBar();

<span class="keyword">private</span>:
    <span class="type">void</span> createTopLeftGroupBox();
    <span class="type">void</span> createTopRightGroupBox();
    <span class="type">void</span> createBottomLeftTabWidget();
    <span class="type">void</span> createBottomRightGroupBox();
    <span class="type">void</span> createProgressBar();

    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>styleLabel;
    <span class="type"><a href="./qcombobox.htm" translate="no">QComboBox</a></span> <span class="operator">*</span>styleComboBox;
    <span class="type"><a href="./qcheckbox.htm" translate="no">QCheckBox</a></span> <span class="operator">*</span>useStylePaletteCheckBox;
    <span class="type"><a href="./qcheckbox.htm" translate="no">QCheckBox</a></span> <span class="operator">*</span>disableWidgetsCheckBox;
    ...
};</pre></div>
<p>Here's the <code translate="no">WidgetGallery</code> constructor:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">WidgetGallery<span class="operator">::</span>WidgetGallery(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>parent)
    : <span class="type"><a href="./qdialog.htm" translate="no">QDialog</a></span>(parent)
{
    styleComboBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qcombobox.htm" translate="no">QComboBox</a></span>;
    <span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> defaultStyleName <span class="operator">=</span> <span class="type"><a href="./qapplication.htm" translate="no">QApplication</a></span><span class="operator">::</span>style()<span class="operator">-</span><span class="operator">&gt;</span>objectName();
    <span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> styleNames <span class="operator">=</span> <span class="type"><a href="./qstylefactory.htm" translate="no">QStyleFactory</a></span><span class="operator">::</span>keys();
    styleNames<span class="operator">.</span>append(<span class="string">"NorwegianWood"</span>);
    <span class="keyword">for</span> (<span class="type">int</span> i <span class="operator">=</span> <span class="number">1</span><span class="operator">,</span> size <span class="operator">=</span> styleNames<span class="operator">.</span>size(); i <span class="operator">&lt;</span> size; <span class="operator">+</span><span class="operator">+</span>i) {
        <span class="keyword">if</span> (defaultStyleName<span class="operator">.</span>compare(styleNames<span class="operator">.</span>at(i)<span class="operator">,</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>CaseInsensitive) <span class="operator">=</span><span class="operator">=</span> <span class="number">0</span>) {
            styleNames<span class="operator">.</span>swapItemsAt(<span class="number">0</span><span class="operator">,</span> i);
            <span class="keyword">break</span>;
        }
    }
    styleComboBox<span class="operator">-</span><span class="operator">&gt;</span>addItems(styleNames);

    styleLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(tr(<span class="string">"&amp;Style:"</span>));
    styleLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(styleComboBox);

    useStylePaletteCheckBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qcheckbox.htm" translate="no">QCheckBox</a></span>(tr(<span class="string">"&amp;Use style's standard palette"</span>));
    useStylePaletteCheckBox<span class="operator">-</span><span class="operator">&gt;</span>setChecked(<span class="keyword">true</span>);

    disableWidgetsCheckBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qcheckbox.htm" translate="no">QCheckBox</a></span>(tr(<span class="string">"&amp;Disable widgets"</span>));

    createTopLeftGroupBox();
    createTopRightGroupBox();
    createBottomLeftTabWidget();
    createBottomRightGroupBox();
    createProgressBar();</pre></div>
<p>We start by creating child widgets. The <b translate="no">Style</b> combobox is initialized with all the styles known to <a href="./qstylefactory.htm" translate="no">QStyleFactory</a>, in addition to <code translate="no">NorwegianWood</code>. The <code translate="no">create...()</code> functions are private functions that set up the various parts of the <code translate="no">WidgetGallery</code>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    connect(styleComboBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qcombobox.htm" translate="no">QComboBox</a></span><span class="operator">::</span>textActivated<span class="operator">,</span>
            <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>WidgetGallery<span class="operator">::</span>changeStyle);
    connect(useStylePaletteCheckBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qcheckbox.htm" translate="no">QCheckBox</a></span><span class="operator">::</span>toggled<span class="operator">,</span>
            <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>WidgetGallery<span class="operator">::</span>changePalette);
    connect(disableWidgetsCheckBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qcheckbox.htm" translate="no">QCheckBox</a></span><span class="operator">::</span>toggled<span class="operator">,</span>
            topLeftGroupBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qgroupbox.htm" translate="no">QGroupBox</a></span><span class="operator">::</span>setDisabled);
    connect(disableWidgetsCheckBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qcheckbox.htm" translate="no">QCheckBox</a></span><span class="operator">::</span>toggled<span class="operator">,</span>
            topRightGroupBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qgroupbox.htm" translate="no">QGroupBox</a></span><span class="operator">::</span>setDisabled);
    connect(disableWidgetsCheckBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qcheckbox.htm" translate="no">QCheckBox</a></span><span class="operator">::</span>toggled<span class="operator">,</span>
            bottomLeftTabWidget<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qgroupbox.htm" translate="no">QGroupBox</a></span><span class="operator">::</span>setDisabled);
    connect(disableWidgetsCheckBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qcheckbox.htm" translate="no">QCheckBox</a></span><span class="operator">::</span>toggled<span class="operator">,</span>
            bottomRightGroupBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qgroupbox.htm" translate="no">QGroupBox</a></span><span class="operator">::</span>setDisabled);</pre></div>
<p>We connect the <b translate="no">Style</b> combobox to the <code translate="no">changeStyle()</code> private slot, the <b translate="no">Use style's standard palette</b> check box to the <code translate="no">changePalette()</code> slot, and the <b translate="no">Disable widgets</b> check box to the child widgets' <a href="./qwidget.htm#setDisabled" translate="no">setDisabled()</a> slot.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qhboxlayout.htm" translate="no">QHBoxLayout</a></span> <span class="operator">*</span>topLayout <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qhboxlayout.htm" translate="no">QHBoxLayout</a></span>;
    topLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(styleLabel);
    topLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(styleComboBox);
    topLayout<span class="operator">-</span><span class="operator">&gt;</span>addStretch(<span class="number">1</span>);
    topLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(useStylePaletteCheckBox);
    topLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(disableWidgetsCheckBox);

    <span class="type"><a href="./qgridlayout.htm" translate="no">QGridLayout</a></span> <span class="operator">*</span>mainLayout <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qgridlayout.htm" translate="no">QGridLayout</a></span>;
    mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addLayout(topLayout<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">2</span>);
    mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(topLeftGroupBox<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">0</span>);
    mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(topRightGroupBox<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
    mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(bottomLeftTabWidget<span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">0</span>);
    mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(bottomRightGroupBox<span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">1</span>);
    mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(progressBar<span class="operator">,</span> <span class="number">3</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">2</span>);
    mainLayout<span class="operator">-</span><span class="operator">&gt;</span>setRowStretch(<span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
    mainLayout<span class="operator">-</span><span class="operator">&gt;</span>setRowStretch(<span class="number">2</span><span class="operator">,</span> <span class="number">1</span>);
    mainLayout<span class="operator">-</span><span class="operator">&gt;</span>setColumnStretch(<span class="number">0</span><span class="operator">,</span> <span class="number">1</span>);
    mainLayout<span class="operator">-</span><span class="operator">&gt;</span>setColumnStretch(<span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
    setLayout(mainLayout);

    setWindowTitle(tr(<span class="string">"Styles"</span>));
    styleChanged();
}</pre></div>
<p>Finally, we put the child widgets in layouts.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> WidgetGallery<span class="operator">::</span>changeStyle(<span class="keyword">const</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> <span class="operator">&amp;</span>styleName)
{
    <span class="keyword">if</span> (styleName <span class="operator">=</span><span class="operator">=</span> <span class="string">"NorwegianWood"</span>)
        <span class="type"><a href="./qapplication.htm" translate="no">QApplication</a></span><span class="operator">::</span>setStyle(<span class="keyword">new</span> NorwegianWoodStyle);
    <span class="keyword">else</span>
        <span class="type"><a href="./qapplication.htm" translate="no">QApplication</a></span><span class="operator">::</span>setStyle(<span class="type"><a href="./qstylefactory.htm" translate="no">QStyleFactory</a></span><span class="operator">::</span>create(styleName));
}</pre></div>
<p>When the user changes the style in the combobox, we call <a href="./qapplication.htm#setStyle" translate="no">QApplication::setStyle</a>() to dynamically change the style of the application.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> WidgetGallery<span class="operator">::</span>changePalette()
{
    <span class="type"><a href="./qapplication.htm" translate="no">QApplication</a></span><span class="operator">::</span>setPalette(useStylePaletteCheckBox<span class="operator">-</span><span class="operator">&gt;</span>isChecked() <span class="operator">?</span>
        <span class="type"><a href="./qapplication.htm" translate="no">QApplication</a></span><span class="operator">::</span>style()<span class="operator">-</span><span class="operator">&gt;</span>standardPalette() : <span class="type"><a href="./qpalette.htm" translate="no">QPalette</a></span>());
}</pre></div>
<p>If the user turns the <b translate="no">Use style's standard palette</b> on, the current style's <a href="./qstyle.htm#standardPalette" translate="no">standard palette</a> is used; otherwise, the system's default palette is honored.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> WidgetGallery<span class="operator">::</span>advanceProgressBar()
{
    <span class="type">int</span> curVal <span class="operator">=</span> progressBar<span class="operator">-</span><span class="operator">&gt;</span>value();
    <span class="type">int</span> maxVal <span class="operator">=</span> progressBar<span class="operator">-</span><span class="operator">&gt;</span>maximum();
    progressBar<span class="operator">-</span><span class="operator">&gt;</span>setValue(curVal <span class="operator">+</span> (maxVal <span class="operator">-</span> curVal) <span class="operator">/</span> <span class="number">100</span>);
}</pre></div>
<p>The <code translate="no">advanceProgressBar()</code> slot is called at regular intervals to advance the progress bar. Since we don't know how long the user will keep the Styles application running, we use a logarithmic formula: The closer the progress bar gets to 100%, the slower it advances.</p>
<p>We will review <code translate="no">createProgressBar()</code> in a moment.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> WidgetGallery<span class="operator">::</span>createTopLeftGroupBox()
{
    topLeftGroupBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qgroupbox.htm" translate="no">QGroupBox</a></span>(tr(<span class="string">"Group 1"</span>));

    radioButton1 <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qradiobutton.htm" translate="no">QRadioButton</a></span>(tr(<span class="string">"Radio button 1"</span>));
    radioButton2 <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qradiobutton.htm" translate="no">QRadioButton</a></span>(tr(<span class="string">"Radio button 2"</span>));
    radioButton3 <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qradiobutton.htm" translate="no">QRadioButton</a></span>(tr(<span class="string">"Radio button 3"</span>));
    radioButton1<span class="operator">-</span><span class="operator">&gt;</span>setChecked(<span class="keyword">true</span>);

    checkBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qcheckbox.htm" translate="no">QCheckBox</a></span>(tr(<span class="string">"Tri-state check box"</span>));
    checkBox<span class="operator">-</span><span class="operator">&gt;</span>setTristate(<span class="keyword">true</span>);
    checkBox<span class="operator">-</span><span class="operator">&gt;</span>setCheckState(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>PartiallyChecked);

    <span class="type"><a href="./qvboxlayout.htm" translate="no">QVBoxLayout</a></span> <span class="operator">*</span>layout <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qvboxlayout.htm" translate="no">QVBoxLayout</a></span>;
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(radioButton1);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(radioButton2);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(radioButton3);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(checkBox);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addStretch(<span class="number">1</span>);
    topLeftGroupBox<span class="operator">-</span><span class="operator">&gt;</span>setLayout(layout);
}</pre></div>
<p>The <code translate="no">createTopLeftGroupBox()</code> function creates the <a href="./qgroupbox.htm" translate="no">QGroupBox</a> that occupies the top-left corner of the <code translate="no">WidgetGallery</code>. We skip the <code translate="no">createTopRightGroupBox()</code>, <code translate="no">createBottomLeftTabWidget()</code>, and <code translate="no">createBottomRightGroupBox()</code> functions, which are very similar.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> WidgetGallery<span class="operator">::</span>createProgressBar()
{
    progressBar <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qprogressbar.htm" translate="no">QProgressBar</a></span>;
    progressBar<span class="operator">-</span><span class="operator">&gt;</span>setRange(<span class="number">0</span><span class="operator">,</span> <span class="number">10000</span>);
    progressBar<span class="operator">-</span><span class="operator">&gt;</span>setValue(<span class="number">0</span>);

    <span class="type"><a href="./qtimer.htm" translate="no">QTimer</a></span> <span class="operator">*</span>timer <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qtimer.htm" translate="no">QTimer</a></span>(<span class="keyword">this</span>);
    connect(timer<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qtimer.htm" translate="no">QTimer</a></span><span class="operator">::</span>timeout<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>WidgetGallery<span class="operator">::</span>advanceProgressBar);
    timer<span class="operator">-</span><span class="operator">&gt;</span>start(<span class="number">1000</span>);
}</pre></div>
<p>In <code translate="no">createProgressBar()</code>, we create a <a href="./qprogressbar.htm" translate="no">QProgressBar</a> at the bottom of the <code translate="no">WidgetGallery</code> and connect its <a href="./qtimer.htm#timeout" translate="no">timeout()</a> signal to the <code translate="no">advanceProgressBar()</code> slot.</p>
<p><a href="https://code.qt.io/cgit/qt/qtbase.git/tree/examples/widgets/widgets/styles?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@widgets/styles -->
</div>
<p class="copy-notice">
<acronym title="Copyright"></acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>