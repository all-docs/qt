<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QSqlQueryModel | Qt SQL</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qsqlquerymodel.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtsql-index.htm" translate="no">Qt SQL</a></li>
                            <li><a href="./qtsql-module.htm" translate="no">C++ Classes</a></li>
                            <li><a>QSqlQueryModel</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title" translate="no">QSqlQueryModel Class</h1>
<!-- $$$QSqlQueryModel-brief -->
<p>The QSqlQueryModel class provides a read-only data model for SQL result sets. <a href="#details">More...</a></p>
<!-- @@@QSqlQueryModel -->
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign"> <span class="preprocessor">#include &lt;QSqlQueryModel&gt;</span>
</td></tr><tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> QT += sql</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <a href="./qabstracttablemodel.htm" translate="no">QAbstractTableModel</a></td></tr><tr><td class="memItemLeft rightAlign topAlign"> Inherited By:</td><td class="memItemRight bottomAlign"> <p><a href="./qsqltablemodel.htm" translate="no">QSqlTableModel</a></p>
</td></tr></tbody></table></div><ul>
<li><a href="./qsqlquerymodel-members.htm">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h2 id="public-functions">Public Functions<a class="plink" href="#public-functions" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#QSqlQueryModel" translate="no">QSqlQueryModel</a></b>(QObject *<i>parent</i> = nullptr)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#dtor.QSqlQueryModel" translate="no">~QSqlQueryModel</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#clear" translate="no">clear</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QSqlError </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#lastError" translate="no">lastError</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QSqlQuery </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#query" translate="no">query</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QSqlRecord </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#record" translate="no">record</a></b>(int <i>row</i>) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QSqlRecord </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#record-1" translate="no">record</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#setQuery" translate="no">setQuery</a></b>(const QSqlQuery &amp;<i>query</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#setQuery-1" translate="no">setQuery</a></b>(const QString &amp;<i>query</i>, const QSqlDatabase &amp;<i>db</i> = QSqlDatabase())</td></tr>
</tbody></table></div>
<a name="reimplemented-public-functions"></a>
<h2 id="reimplemented-public-functions">Reimplemented Public Functions<a class="plink" href="#reimplemented-public-functions" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#canFetchMore" translate="no">canFetchMore</a></b>(const QModelIndex &amp;<i>parent</i> = QModelIndex()) const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual int </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#columnCount" translate="no">columnCount</a></b>(const QModelIndex &amp;<i>index</i> = QModelIndex()) const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual QVariant </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#data" translate="no">data</a></b>(const QModelIndex &amp;<i>item</i>, int <i>role</i> = Qt::DisplayRole) const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#fetchMore" translate="no">fetchMore</a></b>(const QModelIndex &amp;<i>parent</i> = QModelIndex()) override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual QVariant </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#headerData" translate="no">headerData</a></b>(int <i>section</i>, Qt::Orientation <i>orientation</i>, int <i>role</i> = Qt::DisplayRole) const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#insertColumns" translate="no">insertColumns</a></b>(int <i>column</i>, int <i>count</i>, const QModelIndex &amp;<i>parent</i> = QModelIndex()) override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#removeColumns" translate="no">removeColumns</a></b>(int <i>column</i>, int <i>count</i>, const QModelIndex &amp;<i>parent</i> = QModelIndex()) override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual QHash&lt;int, QByteArray&gt; </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#roleNames" translate="no">roleNames</a></b>() const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual int </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#rowCount" translate="no">rowCount</a></b>(const QModelIndex &amp;<i>parent</i> = QModelIndex()) const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#setHeaderData" translate="no">setHeaderData</a></b>(int <i>section</i>, Qt::Orientation <i>orientation</i>, const QVariant &amp;<i>value</i>, int <i>role</i> = Qt::EditRole) override</td></tr>
</tbody></table></div>
<a name="protected-functions"></a>
<h2 id="protected-functions">Protected Functions<a class="plink" href="#protected-functions" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> virtual QModelIndex </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#indexInQuery" translate="no">indexInQuery</a></b>(const QModelIndex &amp;<i>item</i>) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#queryChange" translate="no">queryChange</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qsqlquerymodel.htm#setLastError" translate="no">setLastError</a></b>(const QSqlError &amp;<i>error</i>)</td></tr>
</tbody></table></div>
<a name="details"></a>
<!-- $$$QSqlQueryModel-description -->
<div class="descr">
<h2 id="details">Detailed Description<a class="plink" href="#details" title="Direct link to this headline"></a></h2>
<p>QSqlQueryModel is a high-level interface for executing SQL statements and traversing the result set. It is built on top of the lower-level <a href="./qsqlquery.htm" translate="no">QSqlQuery</a> and can be used to provide data to view classes such as <a href="./qtableview.htm" translate="no">QTableView</a>. For example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qsqlquerymodel.htm#QSqlQueryModel" translate="no">QSqlQueryModel</a></span> <span class="operator">*</span>model <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qsqlquerymodel.htm#QSqlQueryModel" translate="no">QSqlQueryModel</a></span>;
    model<span class="operator">-</span><span class="operator">&gt;</span>setQuery(<span class="string">"SELECT name, salary FROM employee"</span>);
    model<span class="operator">-</span><span class="operator">&gt;</span>setHeaderData(<span class="number">0</span><span class="operator">,</span> <span class="type">Qt</span><span class="operator">::</span>Horizontal<span class="operator">,</span> tr(<span class="string">"Name"</span>));
    model<span class="operator">-</span><span class="operator">&gt;</span>setHeaderData(<span class="number">1</span><span class="operator">,</span> <span class="type">Qt</span><span class="operator">::</span>Horizontal<span class="operator">,</span> tr(<span class="string">"Salary"</span>));
    <span class="type"><a href="./qtableview.htm" translate="no">QTableView</a></span> <span class="operator">*</span>view <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qtableview.htm" translate="no">QTableView</a></span>;
    view<span class="operator">-</span><span class="operator">&gt;</span>setModel(model);
    view<span class="operator">-</span><span class="operator">&gt;</span>show();</pre></div>
<p>We set the model's query, then we set up the labels displayed in the view header.</p>
<p>QSqlQueryModel can also be used to access a database programmatically, without binding it to a view:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qsqlquerymodel.htm#QSqlQueryModel" translate="no">QSqlQueryModel</a></span> model;
    model<span class="operator">.</span>setQuery(<span class="string">"SELECT name, salary FROM employee"</span>);
    <span class="type">int</span> salary <span class="operator">=</span> model<span class="operator">.</span>record(<span class="number">4</span>)<span class="operator">.</span>value(<span class="string">"salary"</span>)<span class="operator">.</span>toInt();</pre></div>
<p>The code snippet above extracts the <code translate="no">salary</code> field from record 4 in the result set of the <code translate="no">SELECT</code> query. Since <code translate="no">salary</code> is the 2nd column (or column index 1), we can rewrite the last line as follows:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type">int</span> salary <span class="operator">=</span> model<span class="operator">.</span>data(model<span class="operator">.</span>index(<span class="number">4</span><span class="operator">,</span> <span class="number">1</span>))<span class="operator">.</span>toInt();</pre></div>
<p>The model is read-only by default. To make it read-write, you must subclass it and reimplement <a href="./qabstractitemmodel.htm#setData" translate="no">setData</a>() and <a href="./qabstracttablemodel.htm#flags" translate="no">flags</a>(). Another option is to use <a href="./qsqltablemodel.htm" translate="no">QSqlTableModel</a>, which provides a read-write model based on a single database table.</p>
<p>The <a href="./qtsql-querymodel-example.htm" translate="no">querymodel</a> example illustrates how to use QSqlQueryModel to display the result of a query. It also shows how to subclass QSqlQueryModel to customize the contents of the data before showing it to the user, and how to create a read-write model based on QSqlQueryModel.</p>
<p>If the database doesn't return the number of selected rows in a query, the model will fetch rows incrementally. See <a href="./qsqlquerymodel.htm#fetchMore" translate="no">fetchMore</a>() for more information.</p>
</div>
<p><b>See also </b><a href="./qsqltablemodel.htm" translate="no">QSqlTableModel</a>, <a href="./qsqlrelationaltablemodel.htm" translate="no">QSqlRelationalTableModel</a>, <a href="./qsqlquery.htm" translate="no">QSqlQuery</a>, <a href="./model-view-programming.htm" translate="no">Model/View Programming</a>, and <a href="./qtsql-querymodel-example.htm" translate="no">Query Model Example</a>.</p>
<!-- @@@QSqlQueryModel -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QSqlQueryModel[overload1]$$$QSqlQueryModelQObject* -->
<h3 class="fn" id="QSqlQueryModel" translate="no"><a name="QSqlQueryModel"></a>QSqlQueryModel::<span class="name">QSqlQueryModel</span>(<span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span> *<i>parent</i> = nullptr)<a class="plink" href="#QSqlQueryModel" title="Direct link to this headline"></a></h3>
<p>Creates an empty QSqlQueryModel with the given <i translate="no">parent</i>.</p>
<!-- @@@QSqlQueryModel -->
<!-- $$$~QSqlQueryModel[overload1]$$$~QSqlQueryModel -->
<h3 class="fn" id="dtor.QSqlQueryModel" translate="no"><a name="dtor.QSqlQueryModel"></a><code translate="no">[virtual] </code>QSqlQueryModel::<span class="name">~QSqlQueryModel</span>()<a class="plink" href="#dtor.QSqlQueryModel" title="Direct link to this headline"></a></h3>
<p>Destroys the object and frees any allocated resources.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#clear" translate="no">clear</a>().</p>
<!-- @@@~QSqlQueryModel -->
<!-- $$$canFetchMore[overload1]$$$canFetchMoreconstQModelIndex& -->
<h3 class="fn" id="canFetchMore" translate="no"><a name="canFetchMore"></a><code translate="no">[override virtual] </code><span class="type">bool</span> QSqlQueryModel::<span class="name">canFetchMore</span>(const <span class="type"><a href="./qmodelindex.htm" translate="no">QModelIndex</a></span> &amp;<i>parent</i> = QModelIndex()) const<a class="plink" href="#canFetchMore" title="Direct link to this headline"></a></h3>
<p>Reimplements: <a href="./qabstractitemmodel.htm#canFetchMore" translate="no">QAbstractItemModel::canFetchMore</a>(const QModelIndex &amp;parent) const.</p>
<p>Returns <code translate="no">true</code> if it is possible to read more rows from the database. This only affects databases that don't report back the size of a query (see <a href="./qsqldriver.htm#hasFeature" translate="no">QSqlDriver::hasFeature</a>()).</p>
<p><i translate="no">parent</i> should always be an invalid <a href="./qmodelindex.htm" translate="no">QModelIndex</a>.</p>
<p>This function was introduced in Qt 4.1.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#fetchMore" translate="no">fetchMore</a>().</p>
<!-- @@@canFetchMore -->
<!-- $$$clear[overload1]$$$clear -->
<h3 class="fn" id="clear" translate="no"><a name="clear"></a><code translate="no">[virtual] </code><span class="type">void</span> QSqlQueryModel::<span class="name">clear</span>()<a class="plink" href="#clear" title="Direct link to this headline"></a></h3>
<p>Clears the model and releases any acquired resource.</p>
<!-- @@@clear -->
<!-- $$$columnCount[overload1]$$$columnCountconstQModelIndex& -->
<h3 class="fn" id="columnCount" translate="no"><a name="columnCount"></a><code translate="no">[override virtual] </code><span class="type">int</span> QSqlQueryModel::<span class="name">columnCount</span>(const <span class="type"><a href="./qmodelindex.htm" translate="no">QModelIndex</a></span> &amp;<i>index</i> = QModelIndex()) const<a class="plink" href="#columnCount" title="Direct link to this headline"></a></h3>
<p>Reimplements: <a href="./qabstractitemmodel.htm#columnCount" translate="no">QAbstractItemModel::columnCount</a>(const QModelIndex &amp;parent) const.</p>
<!-- @@@columnCount -->
<!-- $$$data[overload1]$$$dataconstQModelIndex&int -->
<h3 class="fn" id="data" translate="no"><a name="data"></a><code translate="no">[override virtual] </code><span class="type"><a href="./qvariant.htm" translate="no">QVariant</a></span> QSqlQueryModel::<span class="name">data</span>(const <span class="type"><a href="./qmodelindex.htm" translate="no">QModelIndex</a></span> &amp;<i>item</i>, <span class="type">int</span> <i>role</i> = Qt::DisplayRole) const<a class="plink" href="#data" title="Direct link to this headline"></a></h3>
<p>Reimplements: <a href="./qabstractitemmodel.htm#data" translate="no">QAbstractItemModel::data</a>(const QModelIndex &amp;index, int role) const.</p>
<p>Returns the value for the specified <i translate="no">item</i> and <i translate="no">role</i>.</p>
<p>If <i translate="no">item</i> is out of bounds or if an error occurred, an invalid <a href="./qvariant.htm" translate="no">QVariant</a> is returned.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#lastError" translate="no">lastError</a>().</p>
<!-- @@@data -->
<!-- $$$fetchMore[overload1]$$$fetchMoreconstQModelIndex& -->
<h3 class="fn" id="fetchMore" translate="no"><a name="fetchMore"></a><code translate="no">[override virtual] </code><span class="type">void</span> QSqlQueryModel::<span class="name">fetchMore</span>(const <span class="type"><a href="./qmodelindex.htm" translate="no">QModelIndex</a></span> &amp;<i>parent</i> = QModelIndex())<a class="plink" href="#fetchMore" title="Direct link to this headline"></a></h3>
<p>Reimplements: <a href="./qabstractitemmodel.htm#fetchMore" translate="no">QAbstractItemModel::fetchMore</a>(const QModelIndex &amp;parent).</p>
<p>Fetches more rows from a database. This only affects databases that don't report back the size of a query (see <a href="./qsqldriver.htm#hasFeature" translate="no">QSqlDriver::hasFeature</a>()).</p>
<p>To force fetching of the entire result set, you can use the following:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">while</span> (myModel<span class="operator">-</span><span class="operator">&gt;</span>canFetchMore())
    myModel<span class="operator">-</span><span class="operator">&gt;</span>fetchMore();</pre></div>
<p><i translate="no">parent</i> should always be an invalid <a href="./qmodelindex.htm" translate="no">QModelIndex</a>.</p>
<p>This function was introduced in Qt 4.1.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#canFetchMore" translate="no">canFetchMore</a>().</p>
<!-- @@@fetchMore -->
<!-- $$$headerData[overload1]$$$headerDataintQt::Orientationint -->
<h3 class="fn" id="headerData" translate="no"><a name="headerData"></a><code translate="no">[override virtual] </code><span class="type"><a href="./qvariant.htm" translate="no">QVariant</a></span> QSqlQueryModel::<span class="name">headerData</span>(<span class="type">int</span> <i>section</i>, <span class="type"><a href="./qt.htm#Orientation-enum" translate="no">Qt::Orientation</a></span> <i>orientation</i>, <span class="type">int</span> <i>role</i> = Qt::DisplayRole) const<a class="plink" href="#headerData" title="Direct link to this headline"></a></h3>
<p>Reimplements: <a href="./qabstractitemmodel.htm#headerData" translate="no">QAbstractItemModel::headerData</a>(int section, Qt::Orientation orientation, int role) const.</p>
<p>Returns the header data for the given <i translate="no">role</i> in the <i translate="no">section</i> of the header with the specified <i translate="no">orientation</i>.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#setHeaderData" translate="no">setHeaderData</a>().</p>
<!-- @@@headerData -->
<!-- $$$indexInQuery[overload1]$$$indexInQueryconstQModelIndex& -->
<h3 class="fn" id="indexInQuery" translate="no"><a name="indexInQuery"></a><code translate="no">[virtual protected] </code><span class="type"><a href="./qmodelindex.htm" translate="no">QModelIndex</a></span> QSqlQueryModel::<span class="name">indexInQuery</span>(const <span class="type"><a href="./qmodelindex.htm" translate="no">QModelIndex</a></span> &amp;<i>item</i>) const<a class="plink" href="#indexInQuery" title="Direct link to this headline"></a></h3>
<p>Returns the index of the value in the database result set for the given <i translate="no">item</i> in the model.</p>
<p>The return value is identical to <i translate="no">item</i> if no columns or rows have been inserted, removed, or moved around.</p>
<p>Returns an invalid model index if <i translate="no">item</i> is out of bounds or if <i translate="no">item</i> does not point to a value in the result set.</p>
<p><b>See also </b><a href="./qsqltablemodel.htm#indexInQuery" translate="no">QSqlTableModel::indexInQuery</a>(), <a href="./qsqlquerymodel.htm#insertColumns" translate="no">insertColumns</a>(), and <a href="./qsqlquerymodel.htm#removeColumns" translate="no">removeColumns</a>().</p>
<!-- @@@indexInQuery -->
<!-- $$$insertColumns[overload1]$$$insertColumnsintintconstQModelIndex& -->
<h3 class="fn" id="insertColumns" translate="no"><a name="insertColumns"></a><code translate="no">[override virtual] </code><span class="type">bool</span> QSqlQueryModel::<span class="name">insertColumns</span>(<span class="type">int</span> <i>column</i>, <span class="type">int</span> <i>count</i>, const <span class="type"><a href="./qmodelindex.htm" translate="no">QModelIndex</a></span> &amp;<i>parent</i> = QModelIndex())<a class="plink" href="#insertColumns" title="Direct link to this headline"></a></h3>
<p>Reimplements: <a href="./qabstractitemmodel.htm#insertColumns" translate="no">QAbstractItemModel::insertColumns</a>(int column, int count, const QModelIndex &amp;parent).</p>
<p>Inserts <i translate="no">count</i> columns into the model at position <i translate="no">column</i>. The <i translate="no">parent</i> parameter must always be an invalid <a href="./qmodelindex.htm" translate="no">QModelIndex</a>, since the model does not support parent-child relationships.</p>
<p>Returns <code translate="no">true</code> if <i translate="no">column</i> is within bounds; otherwise returns <code translate="no">false</code>.</p>
<p>By default, inserted columns are empty. To fill them with data, reimplement <a href="./qsqlquerymodel.htm#data" translate="no">data</a>() and handle any inserted column separately:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qvariant.htm" translate="no">QVariant</a></span> MyModel<span class="operator">::</span>data(<span class="keyword">const</span> <span class="type"><a href="./qmodelindex.htm" translate="no">QModelIndex</a></span> <span class="operator">&amp;</span>item<span class="operator">,</span> <span class="type">int</span> role) <span class="keyword">const</span>
{
    <span class="keyword">if</span> (item<span class="operator">.</span>column() <span class="operator">=</span><span class="operator">=</span> m_specialColumnNo) {
        <span class="comment">// handle column separately</span>
    }
    <span class="keyword">return</span> <span class="type"><a href="./qsqlquerymodel.htm#QSqlQueryModel" translate="no">QSqlQueryModel</a></span><span class="operator">::</span>data(item<span class="operator">,</span> role);
}</pre></div>
<p><b>See also </b><a href="./qsqlquerymodel.htm#removeColumns" translate="no">removeColumns</a>().</p>
<!-- @@@insertColumns -->
<!-- $$$lastError[overload1]$$$lastError -->
<h3 class="fn" id="lastError" translate="no"><a name="lastError"></a><span class="type"><a href="./qsqlerror.htm" translate="no">QSqlError</a></span> QSqlQueryModel::<span class="name">lastError</span>() const<a class="plink" href="#lastError" title="Direct link to this headline"></a></h3>
<p>Returns information about the last error that occurred on the database.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#setLastError" translate="no">setLastError</a>() and <a href="./qsqlquerymodel.htm#query" translate="no">query</a>().</p>
<!-- @@@lastError -->
<!-- $$$query[overload1]$$$query -->
<h3 class="fn" id="query" translate="no"><a name="query"></a><span class="type"><a href="./qsqlquery.htm" translate="no">QSqlQuery</a></span> QSqlQueryModel::<span class="name">query</span>() const<a class="plink" href="#query" title="Direct link to this headline"></a></h3>
<p>Returns the <a href="./qsqlquery.htm" translate="no">QSqlQuery</a> associated with this model.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#setQuery" translate="no">setQuery</a>().</p>
<!-- @@@query -->
<!-- $$$queryChange[overload1]$$$queryChange -->
<h3 class="fn" id="queryChange" translate="no"><a name="queryChange"></a><code translate="no">[virtual protected] </code><span class="type">void</span> QSqlQueryModel::<span class="name">queryChange</span>()<a class="plink" href="#queryChange" title="Direct link to this headline"></a></h3>
<p>This virtual function is called whenever the query changes. The default implementation does nothing.</p>
<p><a href="./qsqlquerymodel.htm#query" translate="no">query</a>() returns the new query.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#query" translate="no">query</a>() and <a href="./qsqlquerymodel.htm#setQuery" translate="no">setQuery</a>().</p>
<!-- @@@queryChange -->
<!-- $$$record[overload1]$$$recordint -->
<h3 class="fn" id="record" translate="no"><a name="record"></a><span class="type"><a href="./qsqlrecord.htm" translate="no">QSqlRecord</a></span> QSqlQueryModel::<span class="name">record</span>(<span class="type">int</span> <i>row</i>) const<a class="plink" href="#record" title="Direct link to this headline"></a></h3>
<p>Returns the record containing information about the fields of the current query. If <i translate="no">row</i> is the index of a valid row, the record will be populated with values from that row.</p>
<p>If the model is not initialized, an empty record will be returned.</p>
<p><b>See also </b><a href="./qsqlrecord.htm#isEmpty" translate="no">QSqlRecord::isEmpty</a>().</p>
<!-- @@@record -->
<!-- $$$record$$$record -->
<h3 class="fn" id="record-1" translate="no"><a name="record-1"></a><span class="type"><a href="./qsqlrecord.htm" translate="no">QSqlRecord</a></span> QSqlQueryModel::<span class="name">record</span>() const<a class="plink" href="#record-1" title="Direct link to this headline"></a></h3>
<p>This is an overloaded function.</p>
<p>Returns an empty record containing information about the fields of the current query.</p>
<p>If the model is not initialized, an empty record will be returned.</p>
<p><b>See also </b><a href="./qsqlrecord.htm#isEmpty" translate="no">QSqlRecord::isEmpty</a>().</p>
<!-- @@@record -->
<!-- $$$removeColumns[overload1]$$$removeColumnsintintconstQModelIndex& -->
<h3 class="fn" id="removeColumns" translate="no"><a name="removeColumns"></a><code translate="no">[override virtual] </code><span class="type">bool</span> QSqlQueryModel::<span class="name">removeColumns</span>(<span class="type">int</span> <i>column</i>, <span class="type">int</span> <i>count</i>, const <span class="type"><a href="./qmodelindex.htm" translate="no">QModelIndex</a></span> &amp;<i>parent</i> = QModelIndex())<a class="plink" href="#removeColumns" title="Direct link to this headline"></a></h3>
<p>Reimplements: <a href="./qabstractitemmodel.htm#removeColumns" translate="no">QAbstractItemModel::removeColumns</a>(int column, int count, const QModelIndex &amp;parent).</p>
<p>Removes <i translate="no">count</i> columns from the model starting from position <i translate="no">column</i>. The <i translate="no">parent</i> parameter must always be an invalid <a href="./qmodelindex.htm" translate="no">QModelIndex</a>, since the model does not support parent-child relationships.</p>
<p>Removing columns effectively hides them. It does not affect the underlying <a href="./qsqlquery.htm" translate="no">QSqlQuery</a>.</p>
<p>Returns <code translate="no">true</code> if the columns were removed; otherwise returns <code translate="no">false</code>.</p>
<!-- @@@removeColumns -->
<!-- $$$roleNames[overload1]$$$roleNames -->
<h3 class="fn" id="roleNames" translate="no"><a name="roleNames"></a><code translate="no">[override virtual] </code><span class="type"><a href="./qhash.htm" translate="no">QHash</a></span>&lt;<span class="type">int</span>, <span class="type"><a href="./qbytearray.htm" translate="no">QByteArray</a></span>&gt; QSqlQueryModel::<span class="name">roleNames</span>() const<a class="plink" href="#roleNames" title="Direct link to this headline"></a></h3>
<p>Reimplements: <a href="./qabstractitemmodel.htm#roleNames" translate="no">QAbstractItemModel::roleNames</a>() const.</p>
<p>Returns the model's role names.</p>
<p>Qt defines only one role for the <a href="./qsqlquerymodel.htm" translate="no">QSqlQueryModel</a>:</p>
<div class="table"><table class="generic">
<thead><tr class="qt-style"><th>Qt Role</th><th>QML Role Name</th></tr></thead>
<tbody><tr class="odd" valign="top"><td><a href="./qt.htm#ItemDataRole-enum" translate="no">Qt::DisplayRole</a></td><td>display</td></tr>
</tbody></table></div>
<p>This function was introduced in Qt 5.10.</p>
<!-- @@@roleNames -->
<!-- $$$rowCount[overload1]$$$rowCountconstQModelIndex& -->
<h3 class="fn" id="rowCount" translate="no"><a name="rowCount"></a><code translate="no">[override virtual] </code><span class="type">int</span> QSqlQueryModel::<span class="name">rowCount</span>(const <span class="type"><a href="./qmodelindex.htm" translate="no">QModelIndex</a></span> &amp;<i>parent</i> = QModelIndex()) const<a class="plink" href="#rowCount" title="Direct link to this headline"></a></h3>
<p>Reimplements: <a href="./qabstractitemmodel.htm#rowCount" translate="no">QAbstractItemModel::rowCount</a>(const QModelIndex &amp;parent) const.</p>
<p>If the database supports returning the size of a query (see <a href="./qsqldriver.htm#hasFeature" translate="no">QSqlDriver::hasFeature</a>()), the number of rows of the current query is returned. Otherwise, returns the number of rows currently cached on the client.</p>
<p><i translate="no">parent</i> should always be an invalid <a href="./qmodelindex.htm" translate="no">QModelIndex</a>.</p>
<p>This function was introduced in Qt 4.1.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#canFetchMore" translate="no">canFetchMore</a>() and <a href="./qsqldriver.htm#hasFeature" translate="no">QSqlDriver::hasFeature</a>().</p>
<!-- @@@rowCount -->
<!-- $$$setHeaderData[overload1]$$$setHeaderDataintQt::OrientationconstQVariant&int -->
<h3 class="fn" id="setHeaderData" translate="no"><a name="setHeaderData"></a><code translate="no">[override virtual] </code><span class="type">bool</span> QSqlQueryModel::<span class="name">setHeaderData</span>(<span class="type">int</span> <i>section</i>, <span class="type"><a href="./qt.htm#Orientation-enum" translate="no">Qt::Orientation</a></span> <i>orientation</i>, const <span class="type"><a href="./qvariant.htm" translate="no">QVariant</a></span> &amp;<i>value</i>, <span class="type">int</span> <i>role</i> = Qt::EditRole)<a class="plink" href="#setHeaderData" title="Direct link to this headline"></a></h3>
<p>Reimplements: <a href="./qabstractitemmodel.htm#setHeaderData" translate="no">QAbstractItemModel::setHeaderData</a>(int section, Qt::Orientation orientation, const QVariant &amp;value, int role).</p>
<p>Sets the caption for a horizontal header for the specified <i translate="no">role</i> to <i translate="no">value</i>. This is useful if the model is used to display data in a view (e.g., <a href="./qtableview.htm" translate="no">QTableView</a>).</p>
<p>Returns <code translate="no">true</code> if <i translate="no">orientation</i> is <a href="./qt.htm#Orientation-enum" translate="no">Qt::Horizontal</a> and the <i translate="no">section</i> refers to a valid section; otherwise returns false.</p>
<p>Note that this function cannot be used to modify values in the database since the model is read-only.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#headerData" translate="no">headerData</a>() and <a href="./qsqlquerymodel.htm#data" translate="no">data</a>().</p>
<!-- @@@setHeaderData -->
<!-- $$$setLastError[overload1]$$$setLastErrorconstQSqlError& -->
<h3 class="fn" id="setLastError" translate="no"><a name="setLastError"></a><code translate="no">[protected] </code><span class="type">void</span> QSqlQueryModel::<span class="name">setLastError</span>(const <span class="type"><a href="./qsqlerror.htm" translate="no">QSqlError</a></span> &amp;<i>error</i>)<a class="plink" href="#setLastError" title="Direct link to this headline"></a></h3>
<p>Protected function which allows derived classes to set the value of the last error that occurred on the database to <i translate="no">error</i>.</p>
<p><b>See also </b><a href="./qsqlquerymodel.htm#lastError" translate="no">lastError</a>().</p>
<!-- @@@setLastError -->
<!-- $$$setQuery[overload1]$$$setQueryconstQSqlQuery& -->
<h3 class="fn" id="setQuery" translate="no"><a name="setQuery"></a><span class="type">void</span> QSqlQueryModel::<span class="name">setQuery</span>(const <span class="type"><a href="./qsqlquery.htm" translate="no">QSqlQuery</a></span> &amp;<i>query</i>)<a class="plink" href="#setQuery" title="Direct link to this headline"></a></h3>
<p>Resets the model and sets the data provider to be the given <i translate="no">query</i>. Note that the query must be active and must not be isForwardOnly().</p>
<p><a href="./qsqlquerymodel.htm#lastError" translate="no">lastError</a>() can be used to retrieve verbose information if there was an error setting the query.</p>
<div class="admonition note">
<p><b>Note: </b>Calling setQuery() will remove any inserted columns.</p>
</div>
<p><b>See also </b><a href="./qsqlquerymodel.htm#query" translate="no">query</a>(), <a href="./qsqlquery.htm#isActive" translate="no">QSqlQuery::isActive</a>(), <a href="./qsqlquery.htm#setForwardOnly" translate="no">QSqlQuery::setForwardOnly</a>(), and <a href="./qsqlquerymodel.htm#lastError" translate="no">lastError</a>().</p>
<!-- @@@setQuery -->
<!-- $$$setQuery$$$setQueryconstQString&constQSqlDatabase& -->
<h3 class="fn" id="setQuery-1" translate="no"><a name="setQuery-1"></a><span class="type">void</span> QSqlQueryModel::<span class="name">setQuery</span>(const <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> &amp;<i>query</i>, const <span class="type"><a href="./qsqldatabase.htm" translate="no">QSqlDatabase</a></span> &amp;<i>db</i> = QSqlDatabase())<a class="plink" href="#setQuery-1" title="Direct link to this headline"></a></h3>
<p>This is an overloaded function.</p>
<p>Executes the query <i translate="no">query</i> for the given database connection <i translate="no">db</i>. If no database (or an invalid database) is specified, the default connection is used.</p>
<p><a href="./qsqlquerymodel.htm#lastError" translate="no">lastError</a>() can be used to retrieve verbose information if there was an error setting the query.</p>
<p>Example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qsqlquerymodel.htm#QSqlQueryModel" translate="no">QSqlQueryModel</a></span> model;
model<span class="operator">.</span>setQuery(<span class="string">"select * from MyTable"</span>);
<span class="keyword">if</span> (model<span class="operator">.</span>lastError()<span class="operator">.</span>isValid())
    <a href="./qtglobal.htm#qDebug" translate="no">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> model<span class="operator">.</span>lastError();</pre></div>
<p><b>See also </b><a href="./qsqlquerymodel.htm#query" translate="no">query</a>(), <a href="./qsqlquerymodel.htm#queryChange" translate="no">queryChange</a>(), and <a href="./qsqlquerymodel.htm#lastError" translate="no">lastError</a>().</p>
<!-- @@@setQuery -->
</div>
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>