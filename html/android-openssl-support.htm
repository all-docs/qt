<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Adding OpenSSL Support for Android</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/android-openssl-support.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a>Adding OpenSSL Support for Android</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">Adding OpenSSL Support for Android</h1>
<span class="subtitle"></span>
<!-- $$$android-openssl-support.html-description -->
<div class="descr"> <a name="details"></a>
<p>The Qt installation package comes with OpenSSL support but the OpenSSL libraries are not part of the package due to legal restrictions in some countries. If your application depends on OpenSSL, consider packaging the SSL libraries with your Application Package (APK) as the target device may or may not have them.</p>
<p>You can use the <a href="./qsslsocket.htm#supportsSsl" translate="no">QSslSocket::supportsSsl</a>() static function to check for SSL support on the target device. First include the header:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="preprocessor">#include &lt;QSslSocket&gt;</span></pre></div>
<p>Then use the following line to check if SSL is supported:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><a href="./qtglobal.htm#qDebug" translate="no">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"Device supports OpenSSL: "</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qsslsocket.htm" translate="no">QSslSocket</a></span><span class="operator">::</span>supportsSsl();</pre></div>
<p>Check Qt Creator's <code translate="no">Application Output</code> section or the Android <code translate="no">logcat</code> for the result.</p>
<a name="building-openssl-for-android"></a>
<h2 id="building-openssl-for-android">Building OpenSSL for Android<a class="plink" href="#building-openssl-for-android" title="Direct link to this headline"></a></h2>
<p>A convenient Github repository with prebuilt and a build script can be used without the need for manual step-by-step build. For more information, see <a href="https://github.com/KDAB/android_openssl" translate="no">OpenSSL for Android</a>. If you download the repository, you can then skip to <a href="./android-openssl-support.htm#using-openssl-libraries-with-qt-for-android" translate="no">Using OpenSSL Libraries with Qt for Android</a>.</p>
<p>The following instructions guide you to build the OpenSSL libraries manually:</p>
<ol class="1" type="1"><li>Download <a href="http://www.openssl.org/source" translate="no">OpenSSL</a> 1.1.x sources.</li>
<li>Extract the sources to a folder and navigate to that folder using the CLI.<div class="admonition note">
<p><b>Note: </b>If your development platform is Windows, you need <code translate="no">msys</code> with <code translate="no">perl</code> v5.14 or later to build OpenSSL.</p>
</div>
</li>
<li>Add the Android LLVM toolchain (NDK r20b or r21) to your path:<div class="pre"><pre class="cpp plain" translate="no">export PATH="&lt;android_ndk_path&gt;/toolchains/llvm/prebuilt/&lt;host&gt;/bin":$PATH</pre></div>
</li>
<li>Configure the OpenSSL sources to build for Android using the following command:<div class="pre"><pre class="cpp plain" translate="no">./Configure shared android-&lt;arch&gt; -D__ANDROID_API__=21</pre></div>
<p>Where &lt;arch&gt; can take a value of: <code translate="no">arm</code>, <code translate="no">arm64</code>, <code translate="no">x86</code>, <code translate="no">x86_64</code>.</p>
<div class="admonition note">
<p><b>Note: </b>You must consider enabling or disabling the SSL features based on the legal restrictions in the region where your application is available. For more information about the configurable features, see <a href="http://wiki.openssl.org/index.php/Compilation_and_Installation#Configure_Options" translate="no">OpenSSL Configure Options</a>.</p>
</div>
</li>
<li>To build <code translate="no">libcrypto</code> and <code translate="no">libssl</code> shared libraries that are not versioned, but with an <i>_1_1</i> suffix, run:<div class="pre"><pre class="cpp prettyprint" translate="no">make <span class="operator">-</span>j$(nproc) SHLIB_VERSION_NUMBER<span class="operator">=</span> SHLIB_EXT<span class="operator">=</span>_1_1<span class="operator">.</span>so build_libs</pre></div>
<p>Without a suffix, Android 5 (API 21) will load the system libraries <i>libcrypto.so</i> and <i>libssl.so</i>, which are OpenSSL 1.0, rather than your libraries.</p>
<p>If you want to use a different suffix, you must change <code translate="no">SHLIB_EXT</code> in the previous command, and set the <code translate="no">ANDROID_OPENSSL_SUFFIX</code> environment variable before you access the Qt Network API.</p>
<div class="pre"><pre class="cpp plain" translate="no">make -j$(nproc) SHLIB_VERSION_NUMBER= SHLIB_EXT=&lt;custom_suffix&gt;.so build_libs</pre></div>
<p>Then set the environment variable in your main.ccp file:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">qputenv(<span class="string">"ANDROID_OPENSSL_SUFFIX"</span><span class="operator">,</span> <span class="string">"&lt;custom_suffix&gt;"</span>);</pre></div>
<div class="admonition note">
<p><b>Note: </b>Android does not load versioned libraries.</p>
</div>
</li>
</ol>
<a name="using-openssl-libraries-with-qt-for-android"></a>
<h2 id="using-openssl-libraries-with-qt-for-android">Using OpenSSL Libraries with Qt for Android<a class="plink" href="#using-openssl-libraries-with-qt-for-android" title="Direct link to this headline"></a></h2>
<p>Depending on the method you obtained the OpenSSL libraries, you can use one of the following step to include those libraries in your project:</p>
<ul>
<li>Using the project files:<p>Using the convenience <a href="https://github.com/KDAB/android_openssl" translate="no">OpenSSL for Android</a> repository, you can directly add the include projects into your own project, by adding the following to your <code translate="no">.pro</code> file:</p>
<div class="pre"><pre class="cpp plain" translate="no">android: include(&lt;path/to/android_openssl/openssl.pri)</pre></div>
<p>Or if using CMake, add the following to your <code translate="no">CMakeLists.txt</code>:</p>
<div class="pre"><pre class="cpp plain" translate="no">if (ANDROID)
    include(&lt;path/to/android_openssl/CMakeLists.txt)
endif()</pre></div>
<p>Alternatively, you can either use the Qt for Android variable <a href="./qmake-variable-reference.htm#android-extra-libs" translate="no">ANDROID_EXTRA_LIBS</a> to add extra libraries, mainly <code translate="no">libcrypto</code> and <code translate="no">libssl</code>. For <a href="./qmake-manual.htm" translate="no">QMake</a> use:</p>
<div class="pre"><pre class="cpp plain" translate="no">ANDROID_EXTRA_LIBS += \
    &lt;path_to_libs_dir&gt;/libcrypto_1_1.so \
    &lt;path_to_libs_dir&gt;/libssl_1_1.so</pre></div>
<p>For CMake:</p>
<div class="pre"><pre class="cpp plain" translate="no">set(ANDROID_EXTRA_LIBS
    &lt;path_to_libs_dir&gt;/ibcrypto_1_1.so
    &lt;path_to_libs_dir&gt;/libssl_1_1.so
CACHE INTERNAL "")</pre></div>
<div class="admonition note">
<p><b>Note: </b>When targeting multiple architectures, include OpenSSL libraries for all the targeted architectures.</p>
</div>
</li>
<li>Using Qt Creator, it is possible to add extra libraries. For more information, see <a href="https://doc.qt.io/qtcreator/creator-project-qmake-libraries.html" translate="no">Qt Creator: Adding Libraries to Projects</a>.</li>
</ul>
</div>
<!-- @@@android-openssl-support.html -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>