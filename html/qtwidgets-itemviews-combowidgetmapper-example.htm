<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Combo Widget Mapper Example | Qt Widgets</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtwidgets-itemviews-combowidgetmapper-example.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtwidgets-index.htm" translate="no">Qt Widgets</a></li>
                            <li><a href="./examples-itemviews.htm" translate="no">Item Views Examples</a></li>
                            <li><a>Combo Widget Mapper Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">Combo Widget Mapper Example</h1>
<span class="subtitle"></span>
<!-- $$$itemviews/combowidgetmapper-brief -->
<p>The Combo Widget Mapper example shows how to use a custom delegate to map information from a model to specific widgets on a form.</p>
<!-- @@@itemviews/combowidgetmapper -->
<!-- $$$itemviews/combowidgetmapper-description -->
<div class="descr"> <a name="details"></a>
<p class="centerAlign"><img alt="" src="./images/combowidgetmapper-example.png"></p><p>In the <a href="./qtwidgets-itemviews-simplewidgetmapper-example.htm" translate="no">Simple Widget Mapper Example</a>, we showed the basic use of a widget mapper to relate data exposed by a model to simple input widgets in a user interface. However, sometimes we want to use input widgets that expose data as choices to the user, such as <a href="./qcombobox.htm" translate="no">QComboBox</a>, and we need a way to relate their input to the values stored in the model.</p>
<p>This example is very similar to the <a href="./qtwidgets-itemviews-simplewidgetmapper-example.htm" translate="no">Simple Widget Mapper Example</a>. Again, we create a <code translate="no">Window</code> class with an almost identical user interface, except that, instead of providing a spin box so that each person's age can be entered, we provide a combo box to allow their addresses to be classified as "Home", "Work" or "Other".</p>
<a name="window-class-definition"></a>
<h4 id="window-class-definition">Window Class Definition<a class="plink" href="#window-class-definition" title="Direct link to this headline"></a></h4>
<p>The class provides a constructor, a slot to keep the buttons up to date, and a private function to set up the model:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> Window : <span class="keyword">public</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    Window(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>parent <span class="operator">=</span> <span class="number">0</span>);

<span class="keyword">private</span> <span class="keyword">slots</span>:
    <span class="type">void</span> updateButtons(<span class="type">int</span> row);

<span class="keyword">private</span>:
    <span class="type">void</span> setupModel();

    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>nameLabel;
    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>addressLabel;
    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> <span class="operator">*</span>typeLabel;
    <span class="type"><a href="./qlineedit.htm" translate="no">QLineEdit</a></span> <span class="operator">*</span>nameEdit;
    <span class="type"><a href="./qtextedit.htm" translate="no">QTextEdit</a></span> <span class="operator">*</span>addressEdit;
    <span class="type"><a href="./qcombobox.htm" translate="no">QComboBox</a></span> <span class="operator">*</span>typeComboBox;
    <span class="type"><a href="./qpushbutton.htm" translate="no">QPushButton</a></span> <span class="operator">*</span>nextButton;
    <span class="type"><a href="./qpushbutton.htm" translate="no">QPushButton</a></span> <span class="operator">*</span>previousButton;

    <span class="type"><a href="./qstandarditemmodel.htm" translate="no">QStandardItemModel</a></span> <span class="operator">*</span>model;
    <span class="type"><a href="./qstringlistmodel.htm" translate="no">QStringListModel</a></span> <span class="operator">*</span>typeModel;
    <span class="type"><a href="./qdatawidgetmapper.htm" translate="no">QDataWidgetMapper</a></span> <span class="operator">*</span>mapper;
};</pre></div>
<p>In addition to the <a href="./qdatawidgetmapper.htm" translate="no">QDataWidgetMapper</a> object and the controls used to make up the user interface, we use a <a href="./qstandarditemmodel.htm" translate="no">QStandardItemModel</a> to hold our data and a <a href="./qstringlistmodel.htm" translate="no">QStringListModel</a> to hold information about the types of address that can be applied to each person's data.</p>
<a name="window-class-implementation"></a>
<h4 id="window-class-implementation">Window Class Implementation<a class="plink" href="#window-class-implementation" title="Direct link to this headline"></a></h4>
<p>The constructor of the <code translate="no">Window</code> class can be explained in three parts. In the first part, we set up the widgets used for the user interface:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">Window<span class="operator">::</span>Window(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>parent)
    : <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span>(parent)
{
    setupModel();

    nameLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(tr(<span class="string">"Na&amp;me:"</span>));
    nameEdit <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlineedit.htm" translate="no">QLineEdit</a></span>();
    addressLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(tr(<span class="string">"&amp;Address:"</span>));
    addressEdit <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qtextedit.htm" translate="no">QTextEdit</a></span>();
    typeLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span>(tr(<span class="string">"&amp;Type:"</span>));
    typeComboBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qcombobox.htm" translate="no">QComboBox</a></span>();
    nextButton <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qpushbutton.htm" translate="no">QPushButton</a></span>(tr(<span class="string">"&amp;Next"</span>));
    previousButton <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qpushbutton.htm" translate="no">QPushButton</a></span>(tr(<span class="string">"&amp;Previous"</span>));

    nameLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(nameEdit);
    addressLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(addressEdit);
    typeLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(typeComboBox);

    typeComboBox<span class="operator">-</span><span class="operator">&gt;</span>setModel(typeModel);</pre></div>
<p>Note that we set up the mapping the combo box in the same way as for other widgets, but that we apply its own model to it so that it will display data from its own model, the <code translate="no">typeModel</code>, rather than from the model containing data about each person.</p>
<p>Next, we set up the widget mapper, relating each input widget to a column in the model specified by the call to <a href="./qdatawidgetmapper.htm#setModel" translate="no">setModel()</a>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    mapper <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qdatawidgetmapper.htm" translate="no">QDataWidgetMapper</a></span>(<span class="keyword">this</span>);
    mapper<span class="operator">-</span><span class="operator">&gt;</span>setModel(model);
    mapper<span class="operator">-</span><span class="operator">&gt;</span>addMapping(nameEdit<span class="operator">,</span> <span class="number">0</span>);
    mapper<span class="operator">-</span><span class="operator">&gt;</span>addMapping(addressEdit<span class="operator">,</span> <span class="number">1</span>);
    mapper<span class="operator">-</span><span class="operator">&gt;</span>addMapping(typeComboBox<span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="string">"currentIndex"</span>);</pre></div>
<p>For the combo box, we pass an extra argument to tell the widget mapper which property to relate to values from the model. As a result, the user is able to select an item from the combo box, and the corresponding value stored in the widget's <code translate="no">currentIndex</code> property will be stored in the model.</p>
<p>The rest of the constructor is very similar to that of the <a href="./qtwidgets-itemviews-simplewidgetmapper-example.htm" translate="no">Simple Widget Mapper Example</a>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    connect(previousButton<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qabstractbutton.htm" translate="no">QAbstractButton</a></span><span class="operator">::</span>clicked<span class="operator">,</span>
            mapper<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qdatawidgetmapper.htm" translate="no">QDataWidgetMapper</a></span><span class="operator">::</span>toPrevious);
    connect(nextButton<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qabstractbutton.htm" translate="no">QAbstractButton</a></span><span class="operator">::</span>clicked<span class="operator">,</span>
            mapper<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qdatawidgetmapper.htm" translate="no">QDataWidgetMapper</a></span><span class="operator">::</span>toNext);
    connect(mapper<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qdatawidgetmapper.htm" translate="no">QDataWidgetMapper</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
            <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>updateButtons);

    <span class="type"><a href="./qgridlayout.htm" translate="no">QGridLayout</a></span> <span class="operator">*</span>layout <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qgridlayout.htm" translate="no">QGridLayout</a></span>();
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(nameLabel<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(nameEdit<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(previousButton<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(addressLabel<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(addressEdit<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">1</span>);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(nextButton<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(typeLabel<span class="operator">,</span> <span class="number">3</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(typeComboBox<span class="operator">,</span> <span class="number">3</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
    setLayout(layout);

    setWindowTitle(tr(<span class="string">"Delegate Widget Mapper"</span>));
    mapper<span class="operator">-</span><span class="operator">&gt;</span>toFirst();
}</pre></div>
<p>The model is initialized in the window's <code translate="no">setupModel()</code> function. Here, we create a standard model with 5 rows and 3 columns. In each row, we insert a name, address, and a value that indicates the type of address. The address types are stored in a string list model.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> Window<span class="operator">::</span>setupModel()
{
    <span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> items;
    items <span class="operator">&lt;</span><span class="operator">&lt;</span> tr(<span class="string">"Home"</span>) <span class="operator">&lt;</span><span class="operator">&lt;</span> tr(<span class="string">"Work"</span>) <span class="operator">&lt;</span><span class="operator">&lt;</span> tr(<span class="string">"Other"</span>);
    typeModel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qstringlistmodel.htm" translate="no">QStringListModel</a></span>(items<span class="operator">,</span> <span class="keyword">this</span>);

    model <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qstandarditemmodel.htm" translate="no">QStandardItemModel</a></span>(<span class="number">5</span><span class="operator">,</span> <span class="number">3</span><span class="operator">,</span> <span class="keyword">this</span>);
    <span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> names;
    names <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"Alice"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"Bob"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"Carol"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"Donald"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"Emma"</span>;
    <span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> addresses;
    addresses <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"&lt;qt&gt;123 Main Street&lt;br/&gt;Market Town&lt;/qt&gt;"</span>
              <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"&lt;qt&gt;PO Box 32&lt;br/&gt;Mail Handling Service"</span>
                 <span class="string">"&lt;br/&gt;Service City&lt;/qt&gt;"</span>
              <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"&lt;qt&gt;The Lighthouse&lt;br/&gt;Remote Island&lt;/qt&gt;"</span>
              <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"&lt;qt&gt;47338 Park Avenue&lt;br/&gt;Big City&lt;/qt&gt;"</span>
              <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"&lt;qt&gt;Research Station&lt;br/&gt;Base Camp&lt;br/&gt;Big Mountain&lt;/qt&gt;"</span>;

    <span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> types;
    types <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"0"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"1"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"2"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"0"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"2"</span>;

    <span class="keyword">for</span> (<span class="type">int</span> row <span class="operator">=</span> <span class="number">0</span>; row <span class="operator">&lt;</span> <span class="number">5</span>; <span class="operator">+</span><span class="operator">+</span>row) {
      <span class="type"><a href="./qstandarditem.htm" translate="no">QStandardItem</a></span> <span class="operator">*</span>item <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qstandarditem.htm" translate="no">QStandardItem</a></span>(names<span class="operator">[</span>row<span class="operator">]</span>);
      model<span class="operator">-</span><span class="operator">&gt;</span>setItem(row<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> item);
      item <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qstandarditem.htm" translate="no">QStandardItem</a></span>(addresses<span class="operator">[</span>row<span class="operator">]</span>);
      model<span class="operator">-</span><span class="operator">&gt;</span>setItem(row<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> item);
      item <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qstandarditem.htm" translate="no">QStandardItem</a></span>(types<span class="operator">[</span>row<span class="operator">]</span>);
      model<span class="operator">-</span><span class="operator">&gt;</span>setItem(row<span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> item);
    }
}</pre></div>
<p>As we insert each row into the model, like a record in a database, we store values that correspond to items in <code translate="no">typeModel</code> for each person's address type. When the widget mapper reads these values from the final column of each row, it will need to use them as references to values in <code translate="no">typeModel</code>, as shown in the following diagram. This is where the delegate is used.</p>
<p class="centerAlign"><img alt="" src="./images/widgetmapper-combo-mapping.png"></p><p>We show the implementation of the <code translate="no">updateButtons()</code> slot for completeness:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> Window<span class="operator">::</span>updateButtons(<span class="type">int</span> row)
{
    previousButton<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(row <span class="operator">&gt;</span> <span class="number">0</span>);
    nextButton<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(row <span class="operator">&lt;</span> model<span class="operator">-</span><span class="operator">&gt;</span>rowCount() <span class="operator">-</span> <span class="number">1</span>);
}</pre></div>
<a name="summary-and-further-reading"></a>
<h4 id="summary-and-further-reading">Summary and Further Reading<a class="plink" href="#summary-and-further-reading" title="Direct link to this headline"></a></h4>
<p>The use of a separate model for the combo box provides a menu of choices that are separate from the data stored in the main model. Using a named mapping that relates the combo box's <code translate="no">currentIndex</code> property to a column in the model effectively allows us to store a look-up value in the model.</p>
<p>However, when reading the model outside the context of the widget mapper, we need to know about the <code translate="no">typeModel</code> to make sense of these look-up values. It would be useful to be able to store both the data and the choices held by the <code translate="no">typeModel</code> in one place. This is covered by the <a href="./qtsql-sqlwidgetmapper-example.htm" translate="no">SQL Widget Mapper Example</a>.</p>
<p><a href="https://code.qt.io/cgit/qt/qtbase.git/tree/examples/widgets/itemviews/combowidgetmapper?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@itemviews/combowidgetmapper -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>