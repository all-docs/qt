<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NDEF Editor Example | Qt NFC</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtnfc-ndefeditor-example.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtnfc-index.htm" translate="no">Qt NFC</a></li>
                            <li><a>NDEF Editor Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">NDEF Editor Example</h1>
<span class="subtitle"></span>
<!-- $$$ndefeditor-brief -->
<p>An example about reading and writing NFC Data Exchange Format (NDEF) messages to NFC Forum Tags.</p>
<!-- @@@ndefeditor -->
<!-- $$$ndefeditor-description -->
<div class="descr"> <a name="details"></a>
<p>The NDEF Editor example reads and writes NFC Data Exchange Format (NDEF) messages to NFC Forum Tags. NDEF messages can be composed by adding records of supported types. Additionally, NDEF messages can be loaded/saved from/into a file located in the file system of the machine where the application is running.</p>
<p class="centerAlign"><img alt="" src="./images/ndefeditor.png"></p><a name="nfc-tag-detection"></a>
<h4 id="nfc-tag-detection">NFC Tag detection<a class="plink" href="#nfc-tag-detection" title="Direct link to this headline"></a></h4>
<p>The MainWindow class is able to detect if a NFC Tag is in the range for read/write operations. It can also detect if connectivity has been lost. This is achieved by connecting the MainWindow class private handlers to the signals <a href="./qnearfieldmanager.htm#targetDetected" translate="no">QNearFieldManager::targetDetected</a> and <a href="./qnearfieldmanager.htm#targetLost" translate="no">QNearFieldManager::targetLost</a>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">m_manager <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qnearfieldmanager.htm" translate="no">QNearFieldManager</a></span>(<span class="keyword">this</span>);
connect(m_manager<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qnearfieldmanager.htm" translate="no">QNearFieldManager</a></span><span class="operator">::</span>targetDetected<span class="operator">,</span>
        <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>targetDetected);
connect(m_manager<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qnearfieldmanager.htm" translate="no">QNearFieldManager</a></span><span class="operator">::</span>targetLost<span class="operator">,</span>
        <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>targetLost);</pre></div>
<p>Through the UI a user requests when to start the detection of a NFC Tag by calling the method <a href="./qnearfieldmanager.htm#startTargetDetection" translate="no">QNearFieldManager::startTargetDetection</a>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">m_manager<span class="operator">-</span><span class="operator">&gt;</span>startTargetDetection();</pre></div>
<p>Once the target is detected the MainWindow connects the following signals to its internal private slots: <a href="./qnearfieldtarget.htm#ndefMessageRead" translate="no">QNearFieldTarget::ndefMessageRead</a>, <a href="./qnearfieldtarget.htm#Error-enum" translate="no">QNearFieldTarget::NdefReadError</a>, <a href="./qnearfieldtarget.htm#ndefMessagesWritten" translate="no">QNearFieldTarget::ndefMessagesWritten</a>, <a href="./qnearfieldtarget.htm#Error-enum" translate="no">QNearFieldTarget::NdefWriteError</a> and <a href="./qnearfieldtarget.htm#error" translate="no">QNearFieldTarget::error</a></p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MainWindow<span class="operator">::</span>targetDetected(<span class="type"><a href="./qnearfieldtarget.htm" translate="no">QNearFieldTarget</a></span> <span class="operator">*</span>target)
{
    <span class="keyword">switch</span> (m_touchAction) {
    <span class="keyword">case</span> NoAction:
        <span class="keyword">break</span>;
    <span class="keyword">case</span> ReadNdef:
        connect(target<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qnearfieldtarget.htm" translate="no">QNearFieldTarget</a></span><span class="operator">::</span>ndefMessageRead<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>ndefMessageRead);
        connect(target<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qnearfieldtarget.htm" translate="no">QNearFieldTarget</a></span><span class="operator">::</span>error<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>targetError);

        m_request <span class="operator">=</span> target<span class="operator">-</span><span class="operator">&gt;</span>readNdefMessages();
        <span class="keyword">if</span> (<span class="operator">!</span>m_request<span class="operator">.</span>isValid()) <span class="comment">// cannot read messages</span>
            targetError(<span class="type"><a href="./qnearfieldtarget.htm" translate="no">QNearFieldTarget</a></span><span class="operator">::</span>NdefReadError<span class="operator">,</span> m_request);
        <span class="keyword">break</span>;
    <span class="keyword">case</span> WriteNdef:
        connect(target<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qnearfieldtarget.htm" translate="no">QNearFieldTarget</a></span><span class="operator">::</span>ndefMessagesWritten<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>ndefMessageWritten);
        connect(target<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qnearfieldtarget.htm" translate="no">QNearFieldTarget</a></span><span class="operator">::</span>error<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>targetError);

        m_request <span class="operator">=</span> target<span class="operator">-</span><span class="operator">&gt;</span>writeNdefMessages(<span class="type"><a href="./qlist.htm" translate="no">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="./qndefmessage.htm" translate="no">QNdefMessage</a></span><span class="operator">&gt;</span>() <span class="operator">&lt;</span><span class="operator">&lt;</span> ndefMessage());
        <span class="keyword">if</span> (<span class="operator">!</span>m_request<span class="operator">.</span>isValid()) <span class="comment">// cannot write messages</span>
            targetError(<span class="type"><a href="./qnearfieldtarget.htm" translate="no">QNearFieldTarget</a></span><span class="operator">::</span>NdefWriteError<span class="operator">,</span> m_request);
        <span class="keyword">break</span>;
    }
}</pre></div>
<p>If during the process of reading or writing to a NFC Tag the connection is lost, the MainWindow reacts to this event by scheduling the target deletion (<a href="./qobject.htm#deleteLater" translate="no">QObject::deleteLater</a>).</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> MainWindow<span class="operator">::</span>targetLost(<span class="type"><a href="./qnearfieldtarget.htm" translate="no">QNearFieldTarget</a></span> <span class="operator">*</span>target)
{
    target<span class="operator">-</span><span class="operator">&gt;</span>deleteLater();
}</pre></div>
<a name="record-creation"></a>
<h4 id="record-creation">Record creation<a class="plink" href="#record-creation" title="Direct link to this headline"></a></h4>
<p>The main window of the ndefeditor example manages the composition and creation of NFC records. The UI contains a QScrollArea where RecordEditors are added dynamically on a user requests basis. The following methods of the MainWindow class provide an interface towards each of the record editing classes managing the different types of records.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> addNfcTextRecord();
<span class="type">void</span> addNfcUriRecord();
<span class="type">void</span> addMimeImageRecord();
<span class="type">void</span> addEmptyRecord();</pre></div>
<p>The following sections explain each of the record editing classes.</p>
<a name="record-editing-classes"></a>
<h4 id="record-editing-classes">Record editing classes<a class="plink" href="#record-editing-classes" title="Direct link to this headline"></a></h4>
<a name="textrecordeditor"></a>
<h5 id="textrecordeditor">TextRecordEditor<a class="plink" href="#textrecordeditor" title="Direct link to this headline"></a></h5>
<p>The <a href="./qtnfc-ndefeditor-example.htm#textrecordeditor" translate="no">TextRecordEditor</a> is a QWidget that can handle editing the values of text record that has been requested by the user. For each text record, there is a new instance of this class.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> TextRecordEditor : <span class="keyword">public</span> <span class="type">QWidget</span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    <span class="keyword">explicit</span> TextRecordEditor(<span class="type">QWidget</span> <span class="operator">*</span>parent <span class="operator">=</span> <span class="number">0</span>);
    <span class="operator">~</span>TextRecordEditor();

    <span class="type">void</span> setRecord(<span class="keyword">const</span> <span class="type"><a href="./qndefnfctextrecord.htm" translate="no">QNdefNfcTextRecord</a></span> <span class="operator">&amp;</span>textRecord);
    <span class="type"><a href="./qndefnfctextrecord.htm" translate="no">QNdefNfcTextRecord</a></span> record() <span class="keyword">const</span>;

<span class="keyword">private</span>:
    Ui<span class="operator">::</span>TextRecordEditor <span class="operator">*</span>ui;
};</pre></div>
<a name="urirecordeditor"></a>
<h5 id="urirecordeditor">UriRecordEditor<a class="plink" href="#urirecordeditor" title="Direct link to this headline"></a></h5>
<p>The <a href="./qtnfc-ndefeditor-example.htm#urirecordeditor" translate="no">UriRecordEditor</a> is a QWidget that can handle editing the values of Uri record that has been requested by the user. For each new Uri record there is a new instance of this class.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> UriRecordEditor : <span class="keyword">public</span> <span class="type">QWidget</span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    <span class="keyword">explicit</span> UriRecordEditor(<span class="type">QWidget</span> <span class="operator">*</span>parent <span class="operator">=</span> <span class="number">0</span>);
    <span class="operator">~</span>UriRecordEditor();

    <span class="type">void</span> setRecord(<span class="keyword">const</span> <span class="type"><a href="./qndefnfcurirecord.htm" translate="no">QNdefNfcUriRecord</a></span> <span class="operator">&amp;</span>uriRecord);
    <span class="type"><a href="./qndefnfcurirecord.htm" translate="no">QNdefNfcUriRecord</a></span> record() <span class="keyword">const</span>;

<span class="keyword">private</span>:
    Ui<span class="operator">::</span>UriRecordEditor <span class="operator">*</span>ui;
};</pre></div>
<a name="mimeimagerecordeditor"></a>
<h5 id="mimeimagerecordeditor">MimeImageRecordEditor<a class="plink" href="#mimeimagerecordeditor" title="Direct link to this headline"></a></h5>
<p>The <a href="./qtnfc-ndefeditor-example.htm#urirecordeditor" translate="no">UriRecordEditor</a> is a QWidget that can handle editing the values of a Mime Image record that has been requested by the user. For each Mime Image record there is a new instance of this class.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> MimeImageRecordEditor : <span class="keyword">public</span> <span class="type">QWidget</span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    <span class="keyword">explicit</span> MimeImageRecordEditor(<span class="type">QWidget</span> <span class="operator">*</span>parent <span class="operator">=</span> <span class="number">0</span>);
    <span class="operator">~</span>MimeImageRecordEditor();

    <span class="type">void</span> setRecord(<span class="keyword">const</span> <span class="type"><a href="./qndefrecord.htm" translate="no">QNdefRecord</a></span> <span class="operator">&amp;</span>record);
    <span class="type"><a href="./qndefrecord.htm" translate="no">QNdefRecord</a></span> record() <span class="keyword">const</span>;

<span class="keyword">private</span>:
    Ui<span class="operator">::</span>MimeImageRecordEditor <span class="operator">*</span>ui;
    <span class="type"><a href="./qndefrecord.htm" translate="no">QNdefRecord</a></span> m_record;

<span class="keyword">private</span> <span class="keyword">slots</span>:
    <span class="type">void</span> on_mimeImageOpen_clicked();
};</pre></div>
<a name="running-the-example"></a>
<h4 id="running-the-example">Running the Example<a class="plink" href="#running-the-example" title="Direct link to this headline"></a></h4>
<p>To run the example from <a href="https://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b>Welcome</b> mode and select the example from <b>Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<p><a href="https://code.qt.io/cgit/qt/qtconnectivity.git/tree/examples/nfc/ndefeditor?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<p><b>See also </b><a href="./qtnfc-index.htm" translate="no">Qt NFC</a>.</p>
<!-- @@@ndefeditor -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>