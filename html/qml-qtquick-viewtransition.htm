<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ViewTransition QML Type | Qt Quick</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qml-qtquick-viewtransition.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtquick-index.htm" translate="no">Qt Quick</a></li>
                            <li><a href="./qtquick-qmlmodule.htm" translate="no">QML Types</a></li>
                            <li><a>ViewTransition QML Type</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title" translate="no">ViewTransition QML Type</h1>
<span class="subtitle" translate="no"></span>
<!-- $$$ViewTransition-brief -->
<p>Specifies items under transition in a view. <a href="#details">More...</a></p>
<!-- @@@ViewTransition -->
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> Import Statement:</td><td class="memItemRight bottomAlign"> import QtQuick 2.15</td></tr></tbody></table></div><ul>
<li><a href="./qml-qtquick-viewtransition-members.htm">List of all members, including inherited members</a></li>
</ul>
<a name="attached-properties"></a>
<h2 id="attached-properties">Attached Properties<a class="plink" href="#attached-properties" title="Direct link to this headline"></a></h2>
<ul>
<li class="fn" translate="no"><b><b><a href="./qml-qtquick-viewtransition.htm#destination-attached-prop" translate="no">destination</a></b></b> : point</li>
<li class="fn" translate="no"><b><b><a href="./qml-qtquick-viewtransition.htm#index-attached-prop" translate="no">index</a></b></b> : int</li>
<li class="fn" translate="no"><b><b><a href="./qml-qtquick-viewtransition.htm#item-attached-prop" translate="no">item</a></b></b> : item</li>
<li class="fn" translate="no"><b><b><a href="./qml-qtquick-viewtransition.htm#targetIndexes-attached-prop" translate="no">targetIndexes</a></b></b> : list</li>
<li class="fn" translate="no"><b><b><a href="./qml-qtquick-viewtransition.htm#targetItems-attached-prop" translate="no">targetItems</a></b></b> : list</li>
</ul>
<!-- $$$ViewTransition-description -->
<a name="details"></a>
<h2 id="details">Detailed Description<a class="plink" href="#details" title="Direct link to this headline"></a></h2>
<p>With <a href="./qml-qtquick-listview.htm" translate="no">ListView</a> and <a href="./qml-qtquick-gridview.htm" translate="no">GridView</a>, it is possible to specify transitions that should be applied whenever the items in the view change as a result of modifications to the view's model. They both have the following properties that can be set to the appropriate transitions to be run for various operations:</p>
<ul>
<li><code translate="no">populate</code> - the transition to apply to the items created initially for the view, or when the model changes</li>
<li><code translate="no">add</code> - the transition to apply to items that are added to the view after it has been created</li>
<li><code translate="no">remove</code> - the transition to apply to items that are removed from the view</li>
<li><code translate="no">move</code> - the transition to apply to items that are moved within the view (i.e. as a result of a move operation in the model)</li>
<li><code translate="no">displaced</code> - the generic transition to be applied to any items that are displaced by an add, move or remove operation</li>
<li><code translate="no">addDisplaced</code>, <code translate="no">removeDisplaced</code> and <code translate="no">moveDisplaced</code> - the transitions to be applied when items are displaced by add, move, or remove operations, respectively (these override the generic displaced transition if specified)</li>
</ul>
<p>For the <a href="./qml-qtquick-row.htm" translate="no">Row</a>, <a href="./qml-qtquick-column.htm" translate="no">Column</a>, <a href="./qml-qtquick-grid.htm" translate="no">Grid</a> and <a href="./qml-qtquick-flow.htm" translate="no">Flow</a> positioner types, which operate with collections of child items rather than data models, the following properties are used instead:</p>
<ul>
<li><code translate="no">populate</code> - the transition to apply to items that have been added to the positioner at the time of its creation</li>
<li><code translate="no">add</code> - the transition to apply to items that are added to or reparented to the positioner, or items that have become <a href="./qml-qtquick-item.htm#visible-prop" translate="no">visible</a></li>
<li><code translate="no">move</code> - the transition to apply to items that have moved within the positioner, including when they are displaced due to the addition or removal of other items, or when items are otherwise rearranged within the positioner, or when items are repositioned due to the resizing of other items in the positioner</li>
</ul>
<p>View transitions have access to a ViewTransition attached property that provides details of the items that are under transition and the operation that triggered the transition. Since view transitions are run once per item, these details can be used to customize each transition for each individual item.</p>
<p>The ViewTransition attached property provides the following properties specific to the item to which the transition is applied:</p>
<ul>
<li>ViewTransition.item - the item that is under transition</li>
<li>ViewTransition.index - the index of this item</li>
<li>ViewTransition.destination - the (x,y) point to which this item is moving for the relevant view operation</li>
</ul>
<p>In addition, ViewTransition provides properties specific to the items which are the target of the operation that triggered the transition:</p>
<ul>
<li>ViewTransition.<a href="./qml-qtquick-viewtransition.htm#targetIndexes-attached-prop" translate="no">targetIndexes</a> - the indexes of the target items</li>
<li>ViewTransition.<a href="./qml-qtquick-viewtransition.htm#targetItems-attached-prop" translate="no">targetItems</a> - the target items themselves</li>
</ul>
<p>(Note that for the <a href="./qml-qtquick-row.htm" translate="no">Row</a>, <a href="./qml-qtquick-column.htm" translate="no">Column</a>, <a href="./qml-qtquick-grid.htm" translate="no">Grid</a> and <a href="./qml-qtquick-flow.htm" translate="no">Flow</a> positioner types, the <code translate="no">move</code> transition only provides these two additional details when the transition is triggered by the addition of items to a positioner.)</p>
<p>View transitions can be written without referring to any of the attributes listed above. These attributes merely provide extra details that are useful for customising view transitions.</p>
<p>Following is an introduction to view transitions and the ways in which the ViewTransition attached property can be used to augment view transitions.</p>
<a name="view-transitions-a-simple-example"></a>
<h3 id="view-transitions-a-simple-example">View Transitions: a Simple Example<a class="plink" href="#view-transitions-a-simple-example" title="Direct link to this headline"></a></h3>
<p>Here is a basic example of the use of view transitions. The view below specifies transitions for the <code translate="no">add</code> and <code translate="no">displaced</code> properties, which will be run when items are added to the view:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtquick-listview.htm" translate="no">ListView</a></span> {
    <span class="name">width</span>: <span class="number">240</span>; <span class="name">height</span>: <span class="number">320</span>
    <span class="name">model</span>: <span class="name">ListModel</span> {}

    <span class="name">delegate</span>: <span class="name">Rectangle</span> {
        <span class="name">width</span>: <span class="number">100</span>; <span class="name">height</span>: <span class="number">30</span>
        <span class="name">border</span>.width: <span class="number">1</span>
        <span class="name">color</span>: <span class="string">"lightsteelblue"</span>
        <span class="type"><a href="./qml-qtquick-text.htm" translate="no">Text</a></span> {
            <span class="name">anchors</span>.centerIn: <span class="name">parent</span>
            <span class="name">text</span>: <span class="name">name</span>
        }
    }

    <span class="name">add</span>: <span class="name">Transition</span> {
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">property</span>: <span class="string">"opacity"</span>; <span class="name">from</span>: <span class="number">0</span>; <span class="name">to</span>: <span class="number">1.0</span>; <span class="name">duration</span>: <span class="number">400</span> }
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">property</span>: <span class="string">"scale"</span>; <span class="name">from</span>: <span class="number">0</span>; <span class="name">to</span>: <span class="number">1.0</span>; <span class="name">duration</span>: <span class="number">400</span> }
    }

    <span class="name">displaced</span>: <span class="name">Transition</span> {
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">properties</span>: <span class="string">"x,y"</span>; <span class="name">duration</span>: <span class="number">400</span>; <span class="name">easing</span>.type: <span class="name">Easing</span>.<span class="name">OutBounce</span> }
    }

    <span class="name">focus</span>: <span class="number">true</span>
    <span class="name">Keys</span>.onSpacePressed: <span class="name">model</span>.<span class="name">insert</span>(<span class="number">0</span>, { "name": <span class="string">"Item "</span> <span class="operator">+</span> <span class="name">model</span>.<span class="name">count</span> })
}</pre></div>
<p>When the space key is pressed, adding an item to the model, the new item will fade in and increase in scale over 400 milliseconds as it is added to the view. Also, any item that is displaced by the addition of a new item will animate to its new position in the view over 400 milliseconds, as specified by the <code translate="no">displaced</code> transition.</p>
<p>If five items were inserted in succession at index 0, the effect would be this:</p>
<p class="centerAlign"></p><div class="player" title="Click to play/pause the animation">
<video class="animation" loop="" preload="metadata">
<source src="videos/viewtransitions-basic.mp4" type="video/mp4">
<source src="videos/viewtransitions-basic.webm" type="video/webm">
<img alt="" src="./images/viewtransitions-basic.gif">
</video>
<div class="playcontrol"></div>
</div><p>Notice that the <a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a> objects above do not need to specify a <code translate="no">target</code> to animate the appropriate item. Also, the <a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a> in the <code translate="no">addTransition</code> does not need to specify the <code translate="no">to</code> value to move the item to its correct position in the view. This is because the view implicitly sets the <code translate="no">target</code> and <code translate="no">to</code> values with the correct item and final item position values if these properties are not explicitly defined.</p>
<p>At its simplest, a view transition may just animate an item to its new position following a view operation, just as the <code translate="no">displaced</code> transition does above, or animate some item properties, as in the <code translate="no">add</code> transition above. Additionally, a view transition may make use of the ViewTransition attached property to customize animation behavior for different items. Following are some examples of how this can be achieved.</p>
<a name="using-the-viewtransition-attached-property"></a>
<h3 id="using-the-viewtransition-attached-property">Using the ViewTransition Attached Property<a class="plink" href="#using-the-viewtransition-attached-property" title="Direct link to this headline"></a></h3>
<p>As stated, the various ViewTransition properties provide details specific to the individual item being transitioned as well as the operation that triggered the transition. In the animation above, five items are inserted in succession at index 0. When the fifth and final insertion takes place, adding "Item 4" to the view, the <code translate="no">add</code> transition is run once (for the inserted item) and the <code translate="no">displaced</code> transition is run four times (once for each of the four existing items in the view).</p>
<p>At this point, if we examined the <code translate="no">displaced</code> transition that was run for the bottom displaced item ("Item 0"), the ViewTransition property values provided to this transition would be as follows:</p>
<div class="table"><table class="generic">
<thead><tr class="qt-style"><th>Property</th><th>Value</th><th>Explanation</th></tr></thead>
<tbody><tr class="odd" valign="top"><td>ViewTransition.item</td><td>"Item 0" delegate instance</td><td>The "Item 0" <a href="./qml-qtquick-rectangle.htm" translate="no">Rectangle</a> object itself</td></tr>
<tr class="even" valign="top"><td>ViewTransition.index</td><td><code translate="no">int</code> value of 4</td><td>The index of "Item 0" within the model following the add operation</td></tr>
<tr class="odd" valign="top"><td>ViewTransition.destination</td><td><a href="./qml-point.htm" translate="no">point</a> value of (0, 120)</td><td>The position that "Item 0" is moving to</td></tr>
<tr class="even" valign="top"><td>ViewTransition.<a href="./qml-qtquick-viewtransition.htm#targetIndexes-attached-prop" translate="no">targetIndexes</a></td><td><code translate="no">int</code> array, just contains the integer "0" (zero)</td><td>The index of "Item 4", the new item added to the view</td></tr>
<tr class="odd" valign="top"><td>ViewTransition.<a href="./qml-qtquick-viewtransition.htm#targetItems-attached-prop" translate="no">targetItems</a></td><td>object array, just contains the "Item 4" delegate instance</td><td>The "Item 4" <a href="./qml-qtquick-rectangle.htm" translate="no">Rectangle</a> object - the new item added to the view</td></tr>
</tbody></table></div>
<p>The ViewTransition.<a href="./qml-qtquick-viewtransition.htm#targetIndexes-attached-prop" translate="no">targetIndexes</a> and ViewTransition.<a href="./qml-qtquick-viewtransition.htm#targetItems-attached-prop" translate="no">targetItems</a> lists provide the items and indexes of all delegate instances that are the targets of the relevant operation. For an add operation, these are all the items that are added into the view; for a remove, these are all the items removed from the view, and so on. (Note these lists will only contain references to items that have been created within the view or its cached items; targets that are not within the visible area of the view or within the item cache will not be accessible.)</p>
<p>So, while the ViewTransition.item, ViewTransition.index and ViewTransition.destination values vary for each individual transition that is run, the ViewTransition.<a href="./qml-qtquick-viewtransition.htm#targetIndexes-attached-prop" translate="no">targetIndexes</a> and ViewTransition.<a href="./qml-qtquick-viewtransition.htm#targetItems-attached-prop" translate="no">targetItems</a> values are the same for every <code translate="no">add</code> and <code translate="no">displaced</code> transition that is triggered by a particular add operation.</p>
<a name="delaying-animations-based-on-index"></a>
<h4 id="delaying-animations-based-on-index">Delaying Animations Based on Index<a class="plink" href="#delaying-animations-based-on-index" title="Direct link to this headline"></a></h4>
<p>Since each view transition is run once for each item affected by the transition, the ViewTransition properties can be used within a transition to define custom behavior for each item's transition. For example, the <a href="./qml-qtquick-listview.htm" translate="no">ListView</a> in the previous example could use this information to create a ripple-type effect on the movement of the displaced items.</p>
<p>This can be achieved by modifying the <code translate="no">displaced</code> transition so that it delays the animation of each displaced item based on the difference between its index (provided by ViewTransition.index) and the first removed index (provided by ViewTransition.<a href="./qml-qtquick-viewtransition.htm#targetIndexes-attached-prop" translate="no">targetIndexes</a>):</p>
<div class="pre"><pre class="qml prettyprint" translate="no">    <span class="name">displaced</span>: <span class="name">Transition</span> {
        <span class="name">id</span>: <span class="name">dispTrans</span>
        <span class="type"><a href="./qml-qtquick-sequentialanimation.htm" translate="no">SequentialAnimation</a></span> {
            <span class="type"><a href="./qml-qtquick-pauseanimation.htm" translate="no">PauseAnimation</a></span> {
                <span class="name">duration</span>: (<span class="name">dispTrans</span>.<span class="name">ViewTransition</span>.<span class="name">index</span> <span class="operator">-</span>
                        <span class="name">dispTrans</span>.<span class="name">ViewTransition</span>.<span class="name">targetIndexes</span>[<span class="number">0</span>]) <span class="operator">*</span> <span class="number">100</span>
            }
            <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">properties</span>: <span class="string">"x,y"</span>; <span class="name">duration</span>: <span class="number">400</span>; <span class="name">easing</span>.type: <span class="name">Easing</span>.<span class="name">OutBounce</span> }
        }
    }</pre></div>
<p>Each displaced item delays its animation by an additional 100 milliseconds, producing a subtle ripple-type effect when items are displaced by the add, like this:</p>
<p class="centerAlign"></p><div class="player" title="Click to play/pause the animation">
<video class="animation" loop="" preload="metadata">
<source src="videos/viewtransitions-delayedbyindex.mp4" type="video/mp4">
<source src="videos/viewtransitions-delayedbyindex.webm" type="video/webm">
<img alt="" src="./images/viewtransitions-delayedbyindex.gif">
</video>
<div class="playcontrol"></div>
</div><a name="animating-items-to-intermediate-positions"></a>
<h4 id="animating-items-to-intermediate-positions">Animating Items to Intermediate Positions<a class="plink" href="#animating-items-to-intermediate-positions" title="Direct link to this headline"></a></h4>
<p>The ViewTransition.item property gives a reference to the item to which the transition is being applied. This can be used to access any of the item's attributes, custom <code translate="no">property</code> values, and so on.</p>
<p>Below is a modification of the <code translate="no">displaced</code> transition from the previous example. It adds a <a href="./qml-qtquick-parallelanimation.htm" translate="no">ParallelAnimation</a> with nested <a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a> objects that reference ViewTransition.item to access each item's <code translate="no">x</code> and <code translate="no">y</code> values at the start of their transitions. This allows each item to animate to an intermediate position relative to its starting point for the transition, before animating to its final position in the view:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">    <span class="name">displaced</span>: <span class="name">Transition</span> {
        <span class="name">id</span>: <span class="name">dispTrans</span>
        <span class="type"><a href="./qml-qtquick-sequentialanimation.htm" translate="no">SequentialAnimation</a></span> {
            <span class="type"><a href="./qml-qtquick-pauseanimation.htm" translate="no">PauseAnimation</a></span> {
                <span class="name">duration</span>: (<span class="name">dispTrans</span>.<span class="name">ViewTransition</span>.<span class="name">index</span> <span class="operator">-</span>
                        <span class="name">dispTrans</span>.<span class="name">ViewTransition</span>.<span class="name">targetIndexes</span>[<span class="number">0</span>]) <span class="operator">*</span> <span class="number">100</span>
            }
            <span class="type"><a href="./qml-qtquick-parallelanimation.htm" translate="no">ParallelAnimation</a></span> {
                <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> {
                    <span class="name">property</span>: <span class="string">"x"</span>; <span class="name">to</span>: <span class="name">dispTrans</span>.<span class="name">ViewTransition</span>.<span class="name">item</span>.<span class="name">x</span> <span class="operator">+</span> <span class="number">20</span>
                    <span class="name">easing</span>.type: <span class="name">Easing</span>.<span class="name">OutQuad</span>
                }
                <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> {
                    <span class="name">property</span>: <span class="string">"y"</span>; <span class="name">to</span>: <span class="name">dispTrans</span>.<span class="name">ViewTransition</span>.<span class="name">item</span>.<span class="name">y</span> <span class="operator">+</span> <span class="number">50</span>
                    <span class="name">easing</span>.type: <span class="name">Easing</span>.<span class="name">OutQuad</span>
                }
            }
            <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">properties</span>: <span class="string">"x,y"</span>; <span class="name">duration</span>: <span class="number">500</span>; <span class="name">easing</span>.type: <span class="name">Easing</span>.<span class="name">OutBounce</span> }
        }
    }</pre></div>
<p>Now, a displaced item will first move to a position of (20, 50) relative to its starting position, and then to its final, correct position in the view:</p>
<p class="centerAlign"></p><div class="player" title="Click to play/pause the animation">
<video class="animation" loop="" preload="metadata">
<source src="videos/viewtransitions-intermediatemove.mp4" type="video/mp4">
<source src="videos/viewtransitions-intermediatemove.webm" type="video/webm">
<img alt="" src="./images/viewtransitions-intermediatemove.gif">
</video>
<div class="playcontrol"></div>
</div><p>Since the final <a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a> does not specify a <code translate="no">to</code> value, the view implicitly sets this value to the item's final position in the view, and so this last animation will move this item to the correct place. If the transition requires the final position of the item for some calculation, this is accessible through ViewTransition.destination.</p>
<p>Instead of using multiple NumberAnimations, you could use a <a href="./qtquick-animation-example.htm#pathanimation" translate="no">PathAnimation</a> to animate an item over a curved path. For example, the <code translate="no">add</code> transition in the previous example could be augmented with a <a href="./qtquick-animation-example.htm#pathanimation" translate="no">PathAnimation</a> as follows: to animate newly added items along a path:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">    <span class="name">add</span>: <span class="name">Transition</span> {
        <span class="name">id</span>: <span class="name">addTrans</span>
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">property</span>: <span class="string">"opacity"</span>; <span class="name">from</span>: <span class="number">0</span>; <span class="name">to</span>: <span class="number">1.0</span>; <span class="name">duration</span>: <span class="number">400</span> }
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">property</span>: <span class="string">"scale"</span>; <span class="name">from</span>: <span class="number">0</span>; <span class="name">to</span>: <span class="number">1.0</span>; <span class="name">duration</span>: <span class="number">400</span> }

        <span class="type"><a href="./qml-qtquick-pathanimation.htm" translate="no">PathAnimation</a></span> {
            <span class="name">duration</span>: <span class="number">1000</span>
            <span class="name">path</span>: <span class="name">Path</span> {
                <span class="name">startX</span>: <span class="name">addTrans</span>.<span class="name">ViewTransition</span>.<span class="name">destination</span>.<span class="name">x</span> <span class="operator">+</span> <span class="number">200</span>
                <span class="name">startY</span>: <span class="name">addTrans</span>.<span class="name">ViewTransition</span>.<span class="name">destination</span>.<span class="name">y</span> <span class="operator">+</span> <span class="number">200</span>
                <span class="type"><a href="./qml-qtquick-pathcurve.htm" translate="no">PathCurve</a></span> { <span class="name">relativeX</span>: -<span class="number">100</span>; <span class="name">relativeY</span>: -<span class="number">50</span> }
                <span class="type"><a href="./qml-qtquick-pathcurve.htm" translate="no">PathCurve</a></span> { <span class="name">relativeX</span>: <span class="number">50</span>; <span class="name">relativeY</span>: -<span class="number">150</span> }
                <span class="type"><a href="./qml-qtquick-pathcurve.htm" translate="no">PathCurve</a></span> {
                    <span class="name">x</span>: <span class="name">addTrans</span>.<span class="name">ViewTransition</span>.<span class="name">destination</span>.<span class="name">x</span>
                    <span class="name">y</span>: <span class="name">addTrans</span>.<span class="name">ViewTransition</span>.<span class="name">destination</span>.<span class="name">y</span>
                }
            }
        }
    }</pre></div>
<p>This animates newly added items along a path. Notice that each path is specified relative to each item's final destination point, so that items inserted at different indexes start their paths from different positions:</p>
<p class="centerAlign"></p><div class="player" title="Click to play/pause the animation">
<video class="animation" loop="" preload="metadata">
<source src="videos/viewtransitions-pathanim.mp4" type="video/mp4">
<source src="videos/viewtransitions-pathanim.webm" type="video/webm">
<img alt="" src="./images/viewtransitions-pathanim.gif">
</video>
<div class="playcontrol"></div>
</div><a name="handling-interrupted-animations"></a>
<h3 id="handling-interrupted-animations">Handling Interrupted Animations<a class="plink" href="#handling-interrupted-animations" title="Direct link to this headline"></a></h3>
<p>A view transition may be interrupted at any time if a different view transition needs to be applied while the original transition is in progress. For example, say Item A is inserted at index 0 and undergoes an "add" transition; then, Item B is inserted at index 0 in quick succession before Item A's transition has finished. Since Item B is inserted before Item A, it will displace Item A, causing the view to interrupt Item A's "add" transition mid-way and start a "displaced" transition on Item A instead.</p>
<p>For simple animations that simply animate an item's movement to its final destination, this interruption is unlikely to require additional consideration. However, if a transition changes other properties, this interruption may cause unwanted side effects. Consider the first example on this page, repeated below for convenience:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtquick-listview.htm" translate="no">ListView</a></span> {
    <span class="name">width</span>: <span class="number">240</span>; <span class="name">height</span>: <span class="number">320</span>
    <span class="name">model</span>: <span class="name">ListModel</span> {}

    <span class="name">delegate</span>: <span class="name">Rectangle</span> {
        <span class="name">width</span>: <span class="number">100</span>; <span class="name">height</span>: <span class="number">30</span>
        <span class="name">border</span>.width: <span class="number">1</span>
        <span class="name">color</span>: <span class="string">"lightsteelblue"</span>
        <span class="type"><a href="./qml-qtquick-text.htm" translate="no">Text</a></span> {
            <span class="name">anchors</span>.centerIn: <span class="name">parent</span>
            <span class="name">text</span>: <span class="name">name</span>
        }
    }

    <span class="name">add</span>: <span class="name">Transition</span> {
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">property</span>: <span class="string">"opacity"</span>; <span class="name">from</span>: <span class="number">0</span>; <span class="name">to</span>: <span class="number">1.0</span>; <span class="name">duration</span>: <span class="number">400</span> }
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">property</span>: <span class="string">"scale"</span>; <span class="name">from</span>: <span class="number">0</span>; <span class="name">to</span>: <span class="number">1.0</span>; <span class="name">duration</span>: <span class="number">400</span> }
    }

    <span class="name">displaced</span>: <span class="name">Transition</span> {
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">properties</span>: <span class="string">"x,y"</span>; <span class="name">duration</span>: <span class="number">400</span>; <span class="name">easing</span>.type: <span class="name">Easing</span>.<span class="name">OutBounce</span> }
    }

    <span class="name">focus</span>: <span class="number">true</span>
    <span class="name">Keys</span>.onSpacePressed: <span class="name">model</span>.<span class="name">insert</span>(<span class="number">0</span>, { "name": <span class="string">"Item "</span> <span class="operator">+</span> <span class="name">model</span>.<span class="name">count</span> })
}</pre></div>
<p>If multiple items are added in rapid succession, without waiting for a previous transition to finish, this is the result:</p>
<p class="centerAlign"></p><div class="player" title="Click to play/pause the animation">
<video class="animation" loop="" preload="metadata">
<source src="videos/viewtransitions-interruptedbad.mp4" type="video/mp4">
<source src="videos/viewtransitions-interruptedbad.webm" type="video/webm">
<img alt="" src="./images/viewtransitions-interruptedbad.gif">
</video>
<div class="playcontrol"></div>
</div><p>Each newly added item undergoes an <code translate="no">add</code> transition, but before the transition can finish, another item is added, displacing the previously added item. Because of this, the <code translate="no">add</code> transition on the previously added item is interrupted and a <code translate="no">displaced</code> transition is started on the item instead. Due to the interruption, the <code translate="no">opacity</code> and <code translate="no">scale</code> animations have not completed, thus producing items with opacity and scale that are below 1.0.</p>
<p>To fix this, the <code translate="no">displaced</code> transition should additionally ensure the item properties are set to the end values specified in the <code translate="no">add</code> transition, effectively resetting these values whenever an item is displaced. In this case, it means setting the item opacity and scale to 1.0:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">    <span class="name">displaced</span>: <span class="name">Transition</span> {
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">properties</span>: <span class="string">"x,y"</span>; <span class="name">duration</span>: <span class="number">400</span>; <span class="name">easing</span>.type: <span class="name">Easing</span>.<span class="name">OutBounce</span> }

        <span class="comment">// ensure opacity and scale values return to 1.0</span>
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">property</span>: <span class="string">"opacity"</span>; <span class="name">to</span>: <span class="number">1.0</span> }
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">property</span>: <span class="string">"scale"</span>; <span class="name">to</span>: <span class="number">1.0</span> }
    }</pre></div>
<p>Now, when an item's <code translate="no">add</code> transition is interrupted, its opacity and scale are animated to 1.0 upon displacement, avoiding the erroneous visual effects from before:</p>
<p class="centerAlign"></p><div class="player" title="Click to play/pause the animation">
<video class="animation" loop="" preload="metadata">
<source src="videos/viewtransitions-interruptedgood.mp4" type="video/mp4">
<source src="videos/viewtransitions-interruptedgood.webm" type="video/webm">
<img alt="" src="./images/viewtransitions-interruptedgood.gif">
</video>
<div class="playcontrol"></div>
</div><p>The same principle applies to any combination of view transitions. An added item may be moved before its add transition finishes, or a moved item may be removed before its moved transition finishes, and so on; so, the rule of thumb is that every transition should handle the same set of properties.</p>
<a name="restrictions-regarding-scriptaction"></a>
<h3 id="restrictions-regarding-scriptaction">Restrictions Regarding ScriptAction<a class="plink" href="#restrictions-regarding-scriptaction" title="Direct link to this headline"></a></h3>
<p>When a view transition is initialized, any property bindings that refer to the ViewTransition attached property are evaluated in preparation for the transition. Due to the nature of the internal construction of a view transition, the attributes of the ViewTransition attached property are only valid for the relevant item when the transition is initialized, and may not be valid when the transition is actually run.</p>
<p>Therefore, a <a href="./qml-qtquick-scriptaction.htm" translate="no">ScriptAction</a> within a view transition should not refer to the ViewTransition attached property, as it may not refer to the expected values at the time that the <a href="./qml-qtquick-scriptaction.htm" translate="no">ScriptAction</a> is actually invoked. Consider the following example:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtquick-listview.htm" translate="no">ListView</a></span> {
    <span class="name">width</span>: <span class="number">240</span>; <span class="name">height</span>: <span class="number">320</span>
    <span class="name">model</span>: <span class="name">ListModel</span> {
        <span class="name">Component</span>.onCompleted: {
            <span class="keyword">for</span> (var i=0; <span class="name">i</span><span class="operator">&lt;</span><span class="number">8</span>; i++)
                <span class="name">append</span>({"name": <span class="name">i</span>})
        }
    }

    <span class="name">delegate</span>: <span class="name">Rectangle</span> {
        <span class="name">width</span>: <span class="number">100</span>; <span class="name">height</span>: <span class="number">30</span>
        <span class="name">border</span>.width: <span class="number">1</span>
        <span class="name">color</span>: <span class="string">"lightsteelblue"</span>
        <span class="type"><a href="./qml-qtquick-text.htm" translate="no">Text</a></span> {
            <span class="name">anchors</span>.centerIn: <span class="name">parent</span>
            <span class="name">text</span>: <span class="name">name</span>
        }
        <span class="name">objectName</span>: <span class="name">name</span>
    }

    <span class="name">move</span>: <span class="name">Transition</span> {
        <span class="name">id</span>: <span class="name">moveTrans</span>
        <span class="type"><a href="./qml-qtquick-sequentialanimation.htm" translate="no">SequentialAnimation</a></span> {
            <span class="type"><a href="./qml-qtquick-coloranimation.htm" translate="no">ColorAnimation</a></span> { <span class="name">property</span>: <span class="string">"color"</span>; <span class="name">to</span>: <span class="string">"yellow"</span>; <span class="name">duration</span>: <span class="number">400</span> }
            <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">properties</span>: <span class="string">"x,y"</span>; <span class="name">duration</span>: <span class="number">800</span>; <span class="name">easing</span>.type: <span class="name">Easing</span>.<span class="name">OutBack</span> }
            <span class="type"><a href="./qml-qtquick-scriptaction.htm" translate="no">ScriptAction</a></span> { <span class="name">script</span>: <span class="name">moveTrans</span>.<span class="name">ViewTransition</span>.<span class="name">item</span>.<span class="name">color</span> <span class="operator">=</span> <span class="string">"lightsteelblue"</span> }
        }
    }

    <span class="name">displaced</span>: <span class="name">Transition</span> {
        <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">properties</span>: <span class="string">"x,y"</span>; <span class="name">duration</span>: <span class="number">400</span>; <span class="name">easing</span>.type: <span class="name">Easing</span>.<span class="name">OutBounce</span> }
    }

    <span class="name">focus</span>: <span class="number">true</span>
    <span class="name">Keys</span>.onSpacePressed: <span class="name">model</span>.<span class="name">move</span>(<span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>)
}</pre></div>
<p>When the space key is pressed, three items are moved from index 5 to index 1. For each moved item, the <code translate="no">moveTransition</code> sequence presumably animates the item's color to "yellow", then animates it to its final position, then changes the item color back to "lightsteelblue" using a <a href="./qml-qtquick-scriptaction.htm" translate="no">ScriptAction</a>. However, when run, the transition does not produce the intended result:</p>
<p class="centerAlign"></p><div class="player" title="Click to play/pause the animation">
<video class="animation" loop="" preload="metadata">
<source src="videos/viewtransitions-scriptactionbad.mp4" type="video/mp4">
<source src="videos/viewtransitions-scriptactionbad.webm" type="video/webm">
<img alt="" src="./images/viewtransitions-scriptactionbad.gif">
</video>
<div class="playcontrol"></div>
</div><p>Only the last moved item is returned to the "lightsteelblue" color; the others remain yellow. This is because the <a href="./qml-qtquick-scriptaction.htm" translate="no">ScriptAction</a> is not run until after the transition has already been initialized, by which time the ViewTransition.item value has changed to refer to a different item; the item that the script had intended to refer to is not the one held by ViewTransition.item at the time the <a href="./qml-qtquick-scriptaction.htm" translate="no">ScriptAction</a> is actually invoked.</p>
<p>In this instance, to avoid this issue, the view could set the property using a <a href="./qml-qtquick-propertyaction.htm" translate="no">PropertyAction</a> instead:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">    <span class="name">move</span>: <span class="name">Transition</span> {
        <span class="name">id</span>: <span class="name">moveTrans</span>
        <span class="type"><a href="./qml-qtquick-sequentialanimation.htm" translate="no">SequentialAnimation</a></span> {
            <span class="type"><a href="./qml-qtquick-coloranimation.htm" translate="no">ColorAnimation</a></span> { <span class="name">property</span>: <span class="string">"color"</span>; <span class="name">to</span>: <span class="string">"yellow"</span>; <span class="name">duration</span>: <span class="number">400</span> }
            <span class="type"><a href="./qml-qtquick-numberanimation.htm" translate="no">NumberAnimation</a></span> { <span class="name">properties</span>: <span class="string">"x,y"</span>; <span class="name">duration</span>: <span class="number">800</span>; <span class="name">easing</span>.type: <span class="name">Easing</span>.<span class="name">OutBack</span> }
            <span class="comment">//ScriptAction { script: moveTrans.ViewTransition.item.color = "lightsteelblue" } BAD!</span>

            <span class="type"><a href="./qml-qtquick-propertyaction.htm" translate="no">PropertyAction</a></span> { <span class="name">property</span>: <span class="string">"color"</span>; <span class="name">value</span>: <span class="string">"lightsteelblue"</span> }
        }
    }</pre></div>
<p>When the transition is initialized, the <a href="./qml-qtquick-propertyaction.htm" translate="no">PropertyAction</a> <code translate="no">target</code> will be set to the respective ViewTransition.item for the transition and will later run with the correct item target as expected.</p>
<!-- @@@ViewTransition -->
<h2>Attached Property Documentation</h2>
<!-- $$$destination -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="destination-attached-prop" valign="top">
<td class="tblQmlPropNode"><p>
<a name="destination-attached-prop"></a><span class="name">ViewTransition.destination</span> : <span class="type"><a href="./qml-point.htm" translate="no">point</a></span><a class="plink" href="#destination-attached-prop" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>This attached property holds the final destination position for the transitioned item within the view.</p>
<p>This property value is a <a href="./qml-point.htm" translate="no">point</a> with <code translate="no">x</code> and <code translate="no">y</code> properties.</p>
</div></div><!-- @@@destination -->
<br>
<!-- $$$index -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="index-attached-prop" valign="top">
<td class="tblQmlPropNode"><p>
<a name="index-attached-prop"></a><span class="name">ViewTransition.index</span> : <span class="type"><a href="./qml-int.htm" translate="no">int</a></span><a class="plink" href="#index-attached-prop" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>This attached property holds the index of the item that is being transitioned.</p>
<p>Note that if the item is being moved, this property holds the index that the item is moving to, not from.</p>
</div></div><!-- @@@index -->
<br>
<!-- $$$item -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="item-attached-prop" valign="top">
<td class="tblQmlPropNode"><p>
<a name="item-attached-prop"></a><span class="name">ViewTransition.item</span> : <span class="type">item</span><a class="plink" href="#item-attached-prop" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>This attached property holds the item that is being transitioned.</p>
<div class="admonition warning">
<p><b>Warning: </b>This item should not be kept and referred to outside of the transition as it may become invalid as the view changes.</p>
</div>
</div></div><!-- @@@item -->
<br>
<!-- $$$targetIndexes -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="targetIndexes-attached-prop" valign="top">
<td class="tblQmlPropNode"><p>
<a name="targetIndexes-attached-prop"></a><span class="name">ViewTransition.targetIndexes</span> : <span class="type"><a href="./qml-list.htm" translate="no">list</a></span><a class="plink" href="#targetIndexes-attached-prop" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>This attached property holds a list of the indexes of the items in view that are the target of the relevant operation.</p>
<p>The targets are the items that are the subject of the operation. For an add operation, these are the items being added; for a remove, these are the items being removed; for a move, these are the items being moved.</p>
<p>For example, if the transition was triggered by an insert operation that added two items at index 1 and 2, this targetIndexes list would have the value [1,2].</p>
<div class="admonition note">
<p><b>Note: </b>The targetIndexes list only contains the indexes of items that are actually in view, or will be in the view once the relevant operation completes.</p>
</div>
<p><b>See also </b><a href="./qml-qtquick-viewtransition.htm#targetItems-attached-prop" translate="no">QtQuick::ViewTransition::targetItems</a>.</p>
</div></div><!-- @@@targetIndexes -->
<br>
<!-- $$$targetItems -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="targetItems-attached-prop" valign="top">
<td class="tblQmlPropNode"><p>
<a name="targetItems-attached-prop"></a><span class="name">ViewTransition.targetItems</span> : <span class="type"><a href="./qml-list.htm" translate="no">list</a></span><a class="plink" href="#targetItems-attached-prop" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>This attached property holds the list of items in view that are the target of the relevant operation.</p>
<p>The targets are the items that are the subject of the operation. For an add operation, these are the items being added; for a remove, these are the items being removed; for a move, these are the items being moved.</p>
<p>For example, if the transition was triggered by an insert operation that added two items at index 1 and 2, this targetItems list would contain these two items.</p>
<div class="admonition note">
<p><b>Note: </b>The targetItems list only contains items that are actually in view, or will be in the view once the relevant operation completes.</p>
</div>
<div class="admonition warning">
<p><b>Warning: </b>The objects in this list should not be kept and referred to outside of the transition as the items may become invalid. The targetItems are only valid when the Transition is initially created; this also means they should not be used by <a href="./qml-qtquick-scriptaction.htm" translate="no">ScriptAction</a> objects in the Transition, which are not evaluated until the transition is run.</p>
</div>
<p><b>See also </b><a href="./qml-qtquick-viewtransition.htm#targetIndexes-attached-prop" translate="no">QtQuick::ViewTransition::targetIndexes</a>.</p>
</div></div><!-- @@@targetItems -->
<br>
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>