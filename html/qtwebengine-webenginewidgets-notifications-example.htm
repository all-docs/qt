<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WebEngine Notifications Example | Qt WebEngine</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtwebengine-webenginewidgets-notifications-example.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtwebengine-index.htm" translate="no">Qt WebEngine</a></li>
                            <li><a href="./webengine-widgetexamples.htm" translate="no">Qt WebEngine Widgets Examples</a></li>
                            <li><a>WebEngine Notifications Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">WebEngine Notifications Example</h1>
<span class="subtitle"></span>
<!-- $$$webenginewidgets/notifications-brief -->
<p>Demonstrates how to pass HTML5 web notifications to users.</p>
<!-- @@@webenginewidgets/notifications -->
<!-- $$$webenginewidgets/notifications-description -->
<div class="descr"> <a name="details"></a>
<p class="centerAlign"><img alt="" src="./images/notifications-example.png"></p><p><i>WebEngine Notifications</i> demonstrates how to use the QWebEngineProfile::setNotificationPresenter() method and <a href="./qwebenginenotification.htm" translate="no">QWebEngineNotification</a> class to show an HTML5 web notification to the user.</p>
<a name="running-the-example"></a>
<h4 id="running-the-example">Running the Example<a class="plink" href="#running-the-example" title="Direct link to this headline"></a></h4>
<p>To run the example from <a href="http://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b>Welcome</b> mode and select the example from <b>Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<a name="html-page"></a>
<h4 id="html-page">HTML Page<a class="plink" href="#html-page" title="Direct link to this headline"></a></h4>
<p>In this example, we create an internal HTML page that is added through a resource collection file (.qrc). The page displays buttons for requesting permissions and contains necessary JavaScript code to trigger this request:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">            Notification.requestPermission().then(function (permission) {
                if (permission == 'granted')
                    createNotification()
            })</pre></div>
<p>Also page contains a button for creating a notification. The following JavaScript constructions are executed on the press event:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    function createNotification() {
        let title = 'Notification #' + ++notificationsCreated
        let options = { body: 'Visit doc.qt.io for more info!', icon: 'icon.png', }

        let notification = new Notification(title, options)
    }</pre></div>
<a name="main-function"></a>
<h4 id="main-function">Main Function<a class="plink" href="#main-function" title="Direct link to this headline"></a></h4>
<p>In the <code translate="no">main</code> function, we instantiate a <a href="./qwebengineview.htm" translate="no">QWebEngineView</a>, load our internal HTML page, and set up the required callbacks for notifications handling.</p>
<a name="requesting-feature-permissions"></a>
<h5 id="requesting-feature-permissions">Requesting Feature Permissions<a class="plink" href="#requesting-feature-permissions" title="Direct link to this headline"></a></h5>
<p>We then use the <a href="./qwebenginepage.htm#featurePermissionRequested" translate="no">QWebEnginePage::featurePermissionRequested</a>() call to request the user's permission to show notifications on their device.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qobject.htm" translate="no">QObject</a></span><span class="operator">::</span>connect(view<span class="operator">.</span>page()<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>featurePermissionRequested<span class="operator">,</span>
                     <span class="operator">[</span><span class="operator">&amp;</span><span class="operator">]</span> (<span class="keyword">const</span> <span class="type"><a href="./qurl.htm" translate="no">QUrl</a></span> <span class="operator">&amp;</span>origin<span class="operator">,</span> <span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>Feature feature) {
                         <span class="keyword">if</span> (feature <span class="operator">!</span><span class="operator">=</span> <span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>Notifications)
                             <span class="keyword">return</span>;
                         view<span class="operator">.</span>page()<span class="operator">-</span><span class="operator">&gt;</span>setFeaturePermission(origin<span class="operator">,</span> feature<span class="operator">,</span> <span class="type"><a href="./qwebenginepage.htm" translate="no">QWebEnginePage</a></span><span class="operator">::</span>PermissionGrantedByUser);
                     });</pre></div>
<a name="handling-new-notifications"></a>
<h5 id="handling-new-notifications">Handling New Notifications<a class="plink" href="#handling-new-notifications" title="Direct link to this headline"></a></h5>
<p>We then construct a <code translate="no">NotificationPopup</code> that encapsulates the data of the HTML web notification. We also use the QWebEngineProfile::setNotificationPresenter() call to set our handler, which we use in conjunction with our <code translate="no">popup</code> to handle all new notifications.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="keyword">auto</span> popup <span class="operator">=</span> <span class="keyword">new</span> NotificationPopup(<span class="operator">&amp;</span>view);
    profile<span class="operator">-</span><span class="operator">&gt;</span>setNotificationPresenter(<span class="operator">[</span><span class="operator">&amp;</span><span class="operator">]</span> (std<span class="operator">::</span>unique_ptr<span class="operator">&lt;</span><span class="type"><a href="./qwebenginenotification.htm" translate="no">QWebEngineNotification</a></span><span class="operator">&gt;</span> notification)
                                      { popup<span class="operator">-</span><span class="operator">&gt;</span>present(notification); });</pre></div>
<a name="presenting-notifications-to-users"></a>
<h4 id="presenting-notifications-to-users">Presenting Notifications to Users<a class="plink" href="#presenting-notifications-to-users" title="Direct link to this headline"></a></h4>
<p>The <code translate="no">NotificationPopup</code> class in this example is a simple <a href="./qwidget.htm" translate="no">QWidget</a>-based class that uses multiple <a href="./qlabel.htm" translate="no">QLabel</a> instances for displaying the notification's title, message, and icon.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> NotificationPopup : <span class="keyword">public</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span>
{
    Q_OBJECT

    <span class="type"><a href="./qlabel.htm" translate="no">QLabel</a></span> m_icon<span class="operator">,</span> m_title<span class="operator">,</span> m_message;
    std<span class="operator">::</span>unique_ptr<span class="operator">&lt;</span><span class="type"><a href="./qwebenginenotification.htm" translate="no">QWebEngineNotification</a></span><span class="operator">&gt;</span> notification;</pre></div>
<a name="presenting-notifications"></a>
<h5 id="presenting-notifications">Presenting Notifications<a class="plink" href="#presenting-notifications" title="Direct link to this headline"></a></h5>
<p>Inside the <code translate="no">present</code> method, we first close and release the previous notification if we have one and then take ownership of a new notification by calling the <code translate="no">std::unique_ptr::swap</code> method on our internal notification instance.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type">void</span> present(std<span class="operator">::</span>unique_ptr<span class="operator">&lt;</span><span class="type"><a href="./qwebenginenotification.htm" translate="no">QWebEngineNotification</a></span><span class="operator">&gt;</span> <span class="operator">&amp;</span>newNotification)
    {
        <span class="keyword">if</span> (notification) {
            notification<span class="operator">-</span><span class="operator">&gt;</span>close();
            notification<span class="operator">.</span>reset();
        }

        notification<span class="operator">.</span>swap(newNotification);</pre></div>
<p>Then we query the notification instance for a title, a message, and an icon by calling <a href="./qwebenginenotification.htm#title-prop" translate="no">QWebEngineNotification::title</a>(), <a href="./qwebenginenotification.htm#message-prop" translate="no">QWebEngineNotification::message</a>(), <a href="./qwebenginenotification.htm#icon" translate="no">QWebEngineNotification::icon</a>() and set up the appropriate labels in our popup.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">        m_title<span class="operator">.</span>setText(<span class="string">"&lt;b&gt;"</span> <span class="operator">+</span> notification<span class="operator">-</span><span class="operator">&gt;</span>title() <span class="operator">+</span> <span class="string">"&lt;/b&gt;"</span>);
        m_message<span class="operator">.</span>setText(notification<span class="operator">-</span><span class="operator">&gt;</span>message());
        m_icon<span class="operator">.</span>setPixmap(<span class="type"><a href="./qpixmap.htm" translate="no">QPixmap</a></span><span class="operator">::</span>fromImage(notification<span class="operator">-</span><span class="operator">&gt;</span>icon())<span class="operator">.</span>scaledToHeight(m_icon<span class="operator">.</span>height()));</pre></div>
<p>After that we are ready to display our notification to the user by calling the <a href="./qwidget.htm#show" translate="no">QWidget::show</a>() method. On this step we also call the <a href="./qwebenginenotification.htm#show" translate="no">QWebEngineNotification::show</a>() method to notify <code translate="no">JavaScript</code> code about our <i>show</i> event.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">        show();
        notification<span class="operator">-</span><span class="operator">&gt;</span>show();</pre></div>
<p>Finally, we set up a callback to handle the <i>close</i> event from the <code translate="no">JavaScript</code> side by connecting to the <a href="./qwebenginenotification.htm#closed" translate="no">QWebEngineNotification::closed</a>() signal. We also schedule a timer event to close our active notification automatically.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">        connect(notification<span class="operator">.</span>get()<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qwebenginenotification.htm" translate="no">QWebEngineNotification</a></span><span class="operator">::</span>closed<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>NotificationPopup<span class="operator">::</span>onClosed);
        <span class="type"><a href="./qtimer.htm" translate="no">QTimer</a></span><span class="operator">::</span>singleShot(<span class="number">10000</span><span class="operator">,</span> notification<span class="operator">.</span>get()<span class="operator">,</span> <span class="operator">[</span><span class="operator">&amp;</span><span class="operator">]</span> () { onClosed(); });

    }</pre></div>
<a name="closing-active-notification"></a>
<h5 id="closing-active-notification">Closing Active Notification<a class="plink" href="#closing-active-notification" title="Direct link to this headline"></a></h5>
<p>We execute the <i>close</i> step for the currently active notification either by timeout or by handling the <code translate="no">JavaScript</code> event. First, we hide the popup widget itself by calling <a href="./qwidget.htm#hide" translate="no">QWidget::hide</a>(). Then, we notify the <code translate="no">JavaScript</code> code by calling the <a href="./qwebenginenotification.htm#close" translate="no">QWebEngineNotification::close</a>() method. Finally, we destroy the notification object through the <code translate="no">std::unique_ptr::reset()</code> method.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type">void</span> onClosed()
    {
        hide();
        notification<span class="operator">-</span><span class="operator">&gt;</span>close();
        notification<span class="operator">.</span>reset();
    }</pre></div>
<a name="implementing-user-interaction"></a>
<h5 id="implementing-user-interaction">Implementing User Interaction<a class="plink" href="#implementing-user-interaction" title="Direct link to this headline"></a></h5>
<p>To implement the <i>click</i> step for a notification, we handle mouse interaction through <a href="./qwidget.htm#mouseReleaseEvent" translate="no">QWidget::mouseReleaseEvent</a>(). On this event, the <code translate="no">JavaScript</code> code is notified by calling the <a href="./qwebenginenotification.htm#click" translate="no">QWebEngineNotification::click</a>() method. Then we automatically perform the <i>close</i> step as a notification is considered fully handled and no longer needed, and therefore can be destroyed.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type">void</span> mouseReleaseEvent(<span class="type"><a href="./qmouseevent.htm" translate="no">QMouseEvent</a></span> <span class="operator">*</span>event) override
    {
        <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span><span class="operator">::</span>mouseReleaseEvent(event);
        <span class="keyword">if</span> (notification <span class="operator">&amp;</span><span class="operator">&amp;</span> event<span class="operator">-</span><span class="operator">&gt;</span>button() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>LeftButton) {
            notification<span class="operator">-</span><span class="operator">&gt;</span>click();
            onClosed();
        }
    }</pre></div>
<p><a href="https://code.qt.io/cgit/qt/qtwebengine.git/tree/examples/webenginewidgets/notifications?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@webenginewidgets/notifications -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>