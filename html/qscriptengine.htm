<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QScriptEngine | Qt Script</title>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtscript-index.htm" translate="no">Qt Script</a></li>
                            <li><a href="./qtscript-module.htm" translate="no">C++ Classes</a></li>
                            <li><a>QScriptEngine</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title" translate="no">QScriptEngine Class</h1>
<!-- $$$QScriptEngine-brief -->
<p>The QScriptEngine class provides an environment for evaluating Qt Script code. <a href="#details">More...</a></p>
<!-- @@@QScriptEngine -->
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign"> <span class="preprocessor">#include &lt;QScriptEngine&gt;</span>
</td></tr><tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> QT += script</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 4.3</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <a href="./qobject.htm" translate="no">QObject</a></td></tr></tbody></table></div><p>This class was introduced in Qt 4.3.</p>
<ul>
<li><a href="./qscriptengine-members.htm">List of all members, including inherited members</a></li>
<li><a href="./qscriptengine-obsolete.htm">Obsolete members</a></li>
</ul>
<p><b>Note:</b> All functions in this class are <a href="./threads-reentrancy.htm" translate="no">reentrant</a>.</p>
<a name="public-types"></a>
<h2 id="public-types">Public Types<a class="plink" href="#public-types" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> typedef </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#FunctionSignature-typedef" translate="no">FunctionSignature</a></b></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> typedef </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#FunctionWithArgSignature-typedef" translate="no">FunctionWithArgSignature</a></b></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> enum </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#QObjectWrapOption-enum" translate="no">QObjectWrapOption</a></b> { ExcludeChildObjects, ExcludeSuperClassMethods, ExcludeSuperClassProperties, ExcludeSuperClassContents, ExcludeDeleteLater, â€¦, SkipMethodsInEnumeration }</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> flags </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#QObjectWrapOption-enum" translate="no">QObjectWrapOptions</a></b></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> enum </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#ValueOwnership-enum" translate="no">ValueOwnership</a></b> { QtOwnership, ScriptOwnership, AutoOwnership }</td></tr>
</tbody></table></div>
<a name="public-functions"></a>
<h2 id="public-functions">Public Functions<a class="plink" href="#public-functions" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#QScriptEngine-1" translate="no">QScriptEngine</a></b>(QObject *<i>parent</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#dtor.QScriptEngine" translate="no">~QScriptEngine</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#abortEvaluation" translate="no">abortEvaluation</a></b>(const QScriptValue &amp;<i>result</i> = QScriptValue())</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptEngineAgent *</td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#agent" translate="no">agent</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QStringList </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#availableExtensions" translate="no">availableExtensions</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#clearExceptions" translate="no">clearExceptions</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#collectGarbage" translate="no">collectGarbage</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptContext *</td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#currentContext" translate="no">currentContext</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#defaultPrototype" translate="no">defaultPrototype</a></b>(int <i>metaTypeId</i>) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a></b>(const QString &amp;<i>program</i>, const QString &amp;<i>fileName</i> = QString(), int <i>lineNumber</i> = 1)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#evaluate-1" translate="no">evaluate</a></b>(const QScriptProgram &amp;<i>program</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> T </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#fromScriptValue" translate="no">fromScriptValue</a></b>(const QScriptValue &amp;<i>value</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#globalObject" translate="no">globalObject</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#hasUncaughtException" translate="no">hasUncaughtException</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#importExtension" translate="no">importExtension</a></b>(const QString &amp;<i>extension</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QStringList </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#importedExtensions" translate="no">importedExtensions</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#installTranslatorFunctions" translate="no">installTranslatorFunctions</a></b>(const QScriptValue &amp;<i>object</i> = QScriptValue())</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#isEvaluating" translate="no">isEvaluating</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newArray" translate="no">newArray</a></b>(uint <i>length</i> = 0)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newDate" translate="no">newDate</a></b>(qsreal <i>value</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newDate-1" translate="no">newDate</a></b>(const QDateTime &amp;<i>value</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newFunction" translate="no">newFunction</a></b>(QScriptEngine::FunctionSignature <i>fun</i>, int <i>length</i> = 0)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newFunction-1" translate="no">newFunction</a></b>(QScriptEngine::FunctionSignature <i>fun</i>, const QScriptValue &amp;<i>prototype</i>, int <i>length</i> = 0)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newObject" translate="no">newObject</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newObject-1" translate="no">newObject</a></b>(QScriptClass *<i>scriptClass</i>, const QScriptValue &amp;<i>data</i> = QScriptValue())</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newQMetaObject" translate="no">newQMetaObject</a></b>(const QMetaObject *<i>metaObject</i>, const QScriptValue &amp;<i>ctor</i> = QScriptValue())</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newQObject" translate="no">newQObject</a></b>(QObject *<i>object</i>, QScriptEngine::ValueOwnership <i>ownership</i> = QtOwnership, const QScriptEngine::QObjectWrapOptions &amp;<i>options</i> = QObjectWrapOptions())</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newQObject-1" translate="no">newQObject</a></b>(const QScriptValue &amp;<i>scriptObject</i>, QObject *<i>qtObject</i>, QScriptEngine::ValueOwnership <i>ownership</i> = QtOwnership, const QScriptEngine::QObjectWrapOptions &amp;<i>options</i> = QObjectWrapOptions())</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newRegExp" translate="no">newRegExp</a></b>(const QRegExp &amp;<i>regexp</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newRegExp-1" translate="no">newRegExp</a></b>(const QString &amp;<i>pattern</i>, const QString &amp;<i>flags</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newVariant" translate="no">newVariant</a></b>(const QVariant &amp;<i>value</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#newVariant-1" translate="no">newVariant</a></b>(const QScriptValue &amp;<i>object</i>, const QVariant &amp;<i>value</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#nullValue" translate="no">nullValue</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#popContext" translate="no">popContext</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> int </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#processEventsInterval" translate="no">processEventsInterval</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptContext *</td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#pushContext" translate="no">pushContext</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#reportAdditionalMemoryCost" translate="no">reportAdditionalMemoryCost</a></b>(int <i>size</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#scriptValueFromQMetaObject" translate="no">scriptValueFromQMetaObject</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#setAgent" translate="no">setAgent</a></b>(QScriptEngineAgent *<i>agent</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#setDefaultPrototype" translate="no">setDefaultPrototype</a></b>(int <i>metaTypeId</i>, const QScriptValue &amp;<i>prototype</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#setGlobalObject" translate="no">setGlobalObject</a></b>(const QScriptValue &amp;<i>object</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#setProcessEventsInterval" translate="no">setProcessEventsInterval</a></b>(int <i>interval</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#toObject" translate="no">toObject</a></b>(const QScriptValue &amp;<i>value</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#toScriptValue" translate="no">toScriptValue</a></b>(const T &amp;<i>value</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptString </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#toStringHandle" translate="no">toStringHandle</a></b>(const QString &amp;<i>str</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#uncaughtException" translate="no">uncaughtException</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QStringList </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#uncaughtExceptionBacktrace" translate="no">uncaughtExceptionBacktrace</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> int </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#uncaughtExceptionLineNumber" translate="no">uncaughtExceptionLineNumber</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#undefinedValue" translate="no">undefinedValue</a></b>()</td></tr>
</tbody></table></div>
<a name="signals"></a>
<h2 id="signals">Signals<a class="plink" href="#signals" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#signalHandlerException" translate="no">signalHandlerException</a></b>(const QScriptValue &amp;<i>exception</i>)</td></tr>
</tbody></table></div>
<a name="static-public-members"></a>
<h2 id="static-public-members">Static Public Members<a class="plink" href="#static-public-members" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> QScriptSyntaxCheckResult </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#checkSyntax" translate="no">checkSyntax</a></b>(const QString &amp;<i>program</i>)</td></tr>
</tbody></table></div>
<a name="related-non-members"></a>
<h2 id="related-non-members">Related Non-Members<a class="plink" href="#related-non-members" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#qScriptConnect" translate="no">qScriptConnect</a></b>(QObject *<i>sender</i>, const char *<i>signal</i>, const QScriptValue &amp;<i>receiver</i>, const QScriptValue &amp;<i>function</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#qScriptDisconnect" translate="no">qScriptDisconnect</a></b>(QObject *<i>sender</i>, const char *<i>signal</i>, const QScriptValue &amp;<i>receiver</i>, const QScriptValue &amp;<i>function</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> int </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#qScriptRegisterMetaType" translate="no">qScriptRegisterMetaType</a></b>(QScriptEngine *<i>eng</i>, QScriptValue (*)(QScriptEngine *, const T &amp;) <i>toScriptValue</i>, void (*)(const QScriptValue &amp;, T &amp;) <i>fromScriptValue</i>, const QScriptValue &amp;<i>prototype</i> = QScriptValue(), <i>T *</i> = 0)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> int </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#qScriptRegisterSequenceMetaType" translate="no">qScriptRegisterSequenceMetaType</a></b>(QScriptEngine *<i>engine</i>, const QScriptValue &amp;<i>prototype</i> = QScriptValue(), <i>T *</i> = 0)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QScriptValue </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#qScriptValueFromSequence" translate="no">qScriptValueFromSequence</a></b>(QScriptEngine *<i>engine</i>, const Container &amp;<i>container</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#qScriptValueToSequence" translate="no">qScriptValueToSequence</a></b>(const QScriptValue &amp;<i>value</i>, Container &amp;<i>container</i>)</td></tr>
</tbody></table></div>
<a name="macros"></a>
<h2 id="macros">Macros<a class="plink" href="#macros" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="./qscriptengine.htm#Q_SCRIPT_DECLARE_QMETAOBJECT" translate="no">Q_SCRIPT_DECLARE_QMETAOBJECT</a></b>(<i>QMetaObject</i>, <i>ArgType</i>)</td></tr>
</tbody></table></div>
<a name="details"></a>
<!-- $$$QScriptEngine-description -->
<div class="descr">
<h2 id="details">Detailed Description<a class="plink" href="#details" title="Direct link to this headline"></a></h2>
<p>See the <a href="./qtscript-index.htm" translate="no">Qt Script</a> documentation for information about the Qt Script language, and how to get started with scripting your C++ application.</p>
<a name="evaluating-scripts"></a>
<h3 id="evaluating-scripts">Evaluating Scripts<a class="plink" href="#evaluating-scripts" title="Direct link to this headline"></a></h3>
<p>Use <a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>() to evaluate script code; this is the C++ equivalent of the built-in script function <code translate="no">eval()</code>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> myEngine;
<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> three <span class="operator">=</span> myEngine<span class="operator">.</span>evaluate(<span class="string">"1 + 2"</span>);</pre></div>
<p><a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>() returns a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> that holds the result of the evaluation. The <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> class provides functions for converting the result to various C++ types (e.g. <a href="./qscriptvalue.htm#toString" translate="no">QScriptValue::toString</a>() and <a href="./qscriptvalue.htm#toNumber" translate="no">QScriptValue::toNumber</a>()).</p>
<p>The following code snippet shows how a script function can be defined and then invoked from C++ using <a href="./qscriptvalue.htm#call" translate="no">QScriptValue::call</a>():</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> fun <span class="operator">=</span> myEngine<span class="operator">.</span>evaluate(<span class="string">"(function(a, b) { return a + b; })"</span>);
<span class="type">QScriptValueList</span> args;
args <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">1</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">2</span>;
<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> threeAgain <span class="operator">=</span> fun<span class="operator">.</span>call(<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span>()<span class="operator">,</span> args);</pre></div>
<p>As can be seen from the above snippets, a script is provided to the engine in the form of a string. One common way of loading scripts is by reading the contents of a file and passing it to <a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>():</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qstring.htm" translate="no">QString</a></span> fileName <span class="operator">=</span> <span class="string">"helloworld.qs"</span>;
<span class="type"><a href="./qfile.htm" translate="no">QFile</a></span> scriptFile(fileName);
<span class="keyword">if</span> (<span class="operator">!</span>scriptFile<span class="operator">.</span>open(<span class="type"><a href="./qiodevice.htm" translate="no">QIODevice</a></span><span class="operator">::</span>ReadOnly))
    <span class="comment">// handle error</span>
<span class="type"><a href="./qtextstream.htm" translate="no">QTextStream</a></span> stream(<span class="operator">&amp;</span>scriptFile);
<span class="type"><a href="./qstring.htm" translate="no">QString</a></span> contents <span class="operator">=</span> stream<span class="operator">.</span>readAll();
scriptFile<span class="operator">.</span>close();
myEngine<span class="operator">.</span>evaluate(contents<span class="operator">,</span> fileName);</pre></div>
<p>Here we pass the name of the file as the second argument to <a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>(). This does not affect evaluation in any way; the second argument is a general-purpose string that is used to identify the script for debugging purposes (for example, our filename will now show up in any <a href="./qscriptengine.htm#uncaughtExceptionBacktrace" translate="no">uncaughtExceptionBacktrace</a>() involving the script).</p>
<a name="engine-configuration"></a>
<h3 id="engine-configuration">Engine Configuration<a class="plink" href="#engine-configuration" title="Direct link to this headline"></a></h3>
<p>The <a href="./qscriptengine.htm#globalObject" translate="no">globalObject</a>() function returns the <b>Global Object</b> associated with the script engine. Properties of the Global Object are accessible from any script code (i.e. they are global variables). Typically, before evaluating "user" scripts, you will want to configure a script engine by adding one or more properties to the Global Object:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">myEngine<span class="operator">.</span>globalObject()<span class="operator">.</span>setProperty(<span class="string">"myNumber"</span><span class="operator">,</span> <span class="number">123</span>);
<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> myNumberPlusOne <span class="operator">=</span> myEngine<span class="operator">.</span>evaluate(<span class="string">"myNumber + 1"</span>);</pre></div>
<p>Adding custom properties to the scripting environment is one of the standard means of providing a scripting API that is specific to your application. Usually these custom properties are objects created by the <a href="./qscriptengine.htm#newQObject" translate="no">newQObject</a>() or <a href="./qscriptengine.htm#newObject" translate="no">newObject</a>() functions, or constructor functions created by <a href="./qscriptengine.htm#newFunction" translate="no">newFunction</a>().</p>
<a name="script-exceptions"></a>
<h3 id="script-exceptions">Script Exceptions<a class="plink" href="#script-exceptions" title="Direct link to this headline"></a></h3>
<p><a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>() can throw a script exception (e.g. due to a syntax error); in that case, the return value is the value that was thrown (typically an <code translate="no">Error</code> object). You can check whether the evaluation caused an exception by calling <a href="./qscriptengine.htm#hasUncaughtException" translate="no">hasUncaughtException</a>(). In that case, you can call toString() on the error object to obtain an error message. The current uncaught exception is also available through <a href="./qscriptengine.htm#uncaughtException" translate="no">uncaughtException</a>(). Calling <a href="./qscriptengine.htm#clearExceptions" translate="no">clearExceptions</a>() will cause any uncaught exceptions to be cleared.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> result <span class="operator">=</span> myEngine<span class="operator">.</span>evaluate(<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>);
<span class="keyword">if</span> (myEngine<span class="operator">.</span>hasUncaughtException()) {
    <span class="type">int</span> line <span class="operator">=</span> myEngine<span class="operator">.</span>uncaughtExceptionLineNumber();
    <a href="./qtglobal.htm#qDebug" translate="no">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"uncaught exception at line"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> line <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">":"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> result<span class="operator">.</span>toString();
}</pre></div>
<p>The <a href="./qscriptengine.htm#checkSyntax" translate="no">checkSyntax</a>() function can be used to determine whether code can be usefully passed to <a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>().</p>
<a name="script-object-creation"></a>
<h3 id="script-object-creation">Script Object Creation<a class="plink" href="#script-object-creation" title="Direct link to this headline"></a></h3>
<p>Use <a href="./qscriptengine.htm#newObject" translate="no">newObject</a>() to create a standard Qt Script object; this is the C++ equivalent of the script statement <code translate="no">new Object()</code>. You can use the object-specific functionality in <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> to manipulate the script object (e.g. <a href="./qscriptvalue.htm#setProperty" translate="no">QScriptValue::setProperty</a>()). Similarly, use <a href="./qscriptengine.htm#newArray" translate="no">newArray</a>() to create a Qt Script array object. Use <a href="./qscriptengine.htm#newDate" translate="no">newDate</a>() to create a <code translate="no">Date</code> object, and <a href="./qscriptengine.htm#newRegExp" translate="no">newRegExp</a>() to create a <code translate="no">RegExp</code> object.</p>
<a name="qobject-integration"></a>
<h3 id="qobject-integration">QObject Integration<a class="plink" href="#qobject-integration" title="Direct link to this headline"></a></h3>
<p>Use <a href="./qscriptengine.htm#newQObject" translate="no">newQObject</a>() to wrap a <a href="./qobject.htm" translate="no">QObject</a> (or subclass) pointer. <a href="./qscriptengine.htm#newQObject" translate="no">newQObject</a>() returns a proxy script object; properties, children, and signals and slots of the <a href="./qobject.htm" translate="no">QObject</a> are available as properties of the proxy object. No binding code is needed because it is done dynamically using the Qt meta object system.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qpushbutton.htm" translate="no">QPushButton</a></span> button;
<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> scriptButton <span class="operator">=</span> myEngine<span class="operator">.</span>newQObject(<span class="operator">&amp;</span>button);
myEngine<span class="operator">.</span>globalObject()<span class="operator">.</span>setProperty(<span class="string">"button"</span><span class="operator">,</span> scriptButton);

myEngine<span class="operator">.</span>evaluate(<span class="string">"button.checkable = true"</span>);

<a href="./qtglobal.htm#qDebug" translate="no">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> scriptButton<span class="operator">.</span>property(<span class="string">"checkable"</span>)<span class="operator">.</span>toBoolean();
scriptButton<span class="operator">.</span>property(<span class="string">"show"</span>)<span class="operator">.</span>call(); <span class="comment">// call the show() slot</span></pre></div>
<p>Use <a href="./qscriptengine.htm#qScriptConnect" translate="no">qScriptConnect</a>() to connect a C++ signal to a script function; this is the Qt Script equivalent of <a href="./qobject.htm#connect" translate="no">QObject::connect</a>(). When a script function is invoked in response to a C++ signal, it can cause a script exception; you can connect to the <a href="./qscriptengine.htm#signalHandlerException" translate="no">signalHandlerException</a>() signal to catch such an exception.</p>
<p>Use <a href="./qscriptengine.htm#newQMetaObject" translate="no">newQMetaObject</a>() to wrap a <a href="./qmetaobject.htm" translate="no">QMetaObject</a>; this gives you a "script representation" of a <a href="./qobject.htm" translate="no">QObject</a>-based class. <a href="./qscriptengine.htm#newQMetaObject" translate="no">newQMetaObject</a>() returns a proxy script object; enum values of the class are available as properties of the proxy object. You can also specify a function that will be used to construct objects of the class (e.g. when the constructor is invoked from a script). For classes that have a "standard" Qt constructor, Qt Script can provide a default script constructor for you; see <a href="./qscriptengine.htm#scriptValueFromQMetaObject" translate="no">scriptValueFromQMetaObject</a>().</p>
<p>See <a href="./qtjavascript.htm" translate="no">Making Applications Scriptable</a> for more information on the <a href="./qobject.htm" translate="no">QObject</a> integration.</p>
<a name="support-for-custom-c-types"></a>
<h3 id="support-for-custom-c-types">Support for Custom C++ Types<a class="plink" href="#support-for-custom-c-types" title="Direct link to this headline"></a></h3>
<p>Use <a href="./qscriptengine.htm#newVariant" translate="no">newVariant</a>() to wrap a <a href="./qvariant.htm" translate="no">QVariant</a>. This can be used to store values of custom (non-<a href="./qobject.htm" translate="no">QObject</a>) C++ types that have been registered with the Qt meta-type system. To make such types scriptable, you typically associate a prototype (delegate) object with the C++ type by calling <a href="./qscriptengine.htm#setDefaultPrototype" translate="no">setDefaultPrototype</a>(); the prototype object defines the scripting API for the C++ type. Unlike the <a href="./qobject.htm" translate="no">QObject</a> integration, there is no automatic binding possible here; i.e. you have to create the scripting API yourself, for example by using the <a href="./qscriptable.htm" translate="no">QScriptable</a> class.</p>
<p>Use <a href="./qscriptengine.htm#fromScriptValue" translate="no">fromScriptValue</a>() to cast from a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> to another type, and <a href="./qscriptengine.htm#toScriptValue" translate="no">toScriptValue</a>() to create a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> from another value. You can specify how the conversion of C++ types is to be performed with <a href="./qscriptengine.htm#qScriptRegisterMetaType" translate="no">qScriptRegisterMetaType</a>() and <a href="./qscriptengine.htm#qScriptRegisterSequenceMetaType" translate="no">qScriptRegisterSequenceMetaType</a>(). By default, Qt Script will use <a href="./qvariant.htm" translate="no">QVariant</a> to store values of custom types.</p>
<a name="importing-extensions"></a>
<h3 id="importing-extensions">Importing Extensions<a class="plink" href="#importing-extensions" title="Direct link to this headline"></a></h3>
<p>Use <a href="./qscriptengine.htm#importExtension" translate="no">importExtension</a>() to import plugin-based extensions into the engine. Call <a href="./qscriptengine.htm#availableExtensions" translate="no">availableExtensions</a>() to obtain a list naming all the available extensions, and <a href="./qscriptengine.htm#importedExtensions" translate="no">importedExtensions</a>() to obtain a list naming only those extensions that have been imported.</p>
<p>Call <a href="./qscriptengine.htm#pushContext" translate="no">pushContext</a>() to open up a new variable scope, and <a href="./qscriptengine.htm#popContext" translate="no">popContext</a>() to close the current scope. This is useful if you are implementing an extension that evaluates script code containing temporary variable definitions (e.g. <code translate="no">var foo = 123;</code>) that are safe to discard when evaluation has completed.</p>
<a name="native-functions"></a>
<h3 id="native-functions">Native Functions<a class="plink" href="#native-functions" title="Direct link to this headline"></a></h3>
<p>Use <a href="./qscriptengine.htm#newFunction" translate="no">newFunction</a>() to wrap native (C++) functions, including constructors for your own custom types, so that these can be invoked from script code. Such functions must have the signature <a href="./qscriptengine.htm#FunctionSignature-typedef" translate="no">QScriptEngine::FunctionSignature</a>. You may then pass the function as argument to <a href="./qscriptengine.htm#newFunction" translate="no">newFunction</a>(). Here is an example of a function that returns the sum of its first two arguments:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> myAdd(<span class="type"><a href="./qscriptcontext.htm" translate="no">QScriptContext</a></span> <span class="operator">*</span>context<span class="operator">,</span> <span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> <span class="operator">*</span>engine)
{
   <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> a <span class="operator">=</span> context<span class="operator">-</span><span class="operator">&gt;</span>argument(<span class="number">0</span>);
   <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> b <span class="operator">=</span> context<span class="operator">-</span><span class="operator">&gt;</span>argument(<span class="number">1</span>);
   <span class="keyword">return</span> a<span class="operator">.</span>toNumber() <span class="operator">+</span> b<span class="operator">.</span>toNumber();
}</pre></div>
<p>To expose this function to script code, you can set it as a property of the Global Object:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> fun <span class="operator">=</span> myEngine<span class="operator">.</span>newFunction(myAdd);
myEngine<span class="operator">.</span>globalObject()<span class="operator">.</span>setProperty(<span class="string">"myAdd"</span><span class="operator">,</span> fun);</pre></div>
<p>Once this is done, script code can call your function in the exact same manner as a "normal" script function:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> result <span class="operator">=</span> myEngine<span class="operator">.</span>evaluate(<span class="string">"myAdd(myNumber, 1)"</span>);</pre></div>
<a name="long-running-scripts"></a>
<h3 id="long-running-scripts">Long-running Scripts<a class="plink" href="#long-running-scripts" title="Direct link to this headline"></a></h3>
<p>If you need to evaluate possibly long-running scripts from the main (GUI) thread, you should first call <a href="./qscriptengine.htm#setProcessEventsInterval" translate="no">setProcessEventsInterval</a>() to make sure that the GUI stays responsive. You can abort a currently running script by calling <a href="./qscriptengine.htm#abortEvaluation" translate="no">abortEvaluation</a>(). You can determine whether an engine is currently running a script by calling <a href="./qscriptengine.htm#isEvaluating" translate="no">isEvaluating</a>().</p>
<a name="garbage-collection"></a>
<h3 id="garbage-collection">Garbage Collection<a class="plink" href="#garbage-collection" title="Direct link to this headline"></a></h3>
<p>Qt Script objects may be garbage collected when they are no longer referenced. There is no guarantee as to when automatic garbage collection will take place.</p>
<p>The <a href="./qscriptengine.htm#collectGarbage" translate="no">collectGarbage</a>() function can be called to explicitly request garbage collection.</p>
<p>The <a href="./qscriptengine.htm#reportAdditionalMemoryCost" translate="no">reportAdditionalMemoryCost</a>() function can be called to indicate that a Qt Script object occupies memory that isn't managed by the scripting environment. Reporting the additional cost makes it more likely that the garbage collector will be triggered. This can be useful, for example, when many custom, native Qt Script objects are allocated.</p>
<a name="core-debugging-tracing-facilities"></a>
<h3 id="core-debugging-tracing-facilities">Core Debugging/Tracing Facilities<a class="plink" href="#core-debugging-tracing-facilities" title="Direct link to this headline"></a></h3>
<p>Since Qt 4.4, you can be notified of events pertaining to script execution (e.g. script function calls and statement execution) through the <a href="./qscriptengineagent.htm" translate="no">QScriptEngineAgent</a> interface; see the <a href="./qscriptengine.htm#setAgent" translate="no">setAgent</a>() function. This can be used to implement debugging and profiling of a QScriptEngine.</p>
</div>
<p><b>See also </b><a href="./qscriptvalue.htm" translate="no">QScriptValue</a>, <a href="./qscriptcontext.htm" translate="no">QScriptContext</a>, and <a href="./qscriptengineagent.htm" translate="no">QScriptEngineAgent</a>.</p>
<!-- @@@QScriptEngine -->
<div class="types">
<h2>Member Type Documentation</h2>
<!-- $$$FunctionSignature -->
<h3 class="fn" id="FunctionSignature-typedef" translate="no"><a name="FunctionSignature-typedef"></a>typedef QScriptEngine::<span class="name">FunctionSignature</span><a class="plink" href="#FunctionSignature-typedef" title="Direct link to this headline"></a></h3>
<p>The function signature <code translate="no">QScriptValue f(QScriptContext *, QScriptEngine *)</code>.</p>
<p>A function with such a signature can be passed to <a href="./qscriptengine.htm#newFunction" translate="no">QScriptEngine::newFunction</a>() to wrap the function.</p>
<!-- @@@FunctionSignature -->
<!-- $$$FunctionWithArgSignature -->
<h3 class="fn" id="FunctionWithArgSignature-typedef" translate="no"><a name="FunctionWithArgSignature-typedef"></a>typedef QScriptEngine::<span class="name">FunctionWithArgSignature</span><a class="plink" href="#FunctionWithArgSignature-typedef" title="Direct link to this headline"></a></h3>
<p>The function signature <code translate="no">QScriptValue f(QScriptContext *, QScriptEngine *, void *)</code>.</p>
<p>A function with such a signature can be passed to <a href="./qscriptengine.htm#newFunction" translate="no">QScriptEngine::newFunction</a>() to wrap the function.</p>
<!-- @@@FunctionWithArgSignature -->
<!-- $$$QObjectWrapOption$$$ExcludeChildObjects$$$ExcludeSuperClassMethods$$$ExcludeSuperClassProperties$$$ExcludeSuperClassContents$$$SkipMethodsInEnumeration$$$ExcludeDeleteLater$$$ExcludeSlots$$$AutoCreateDynamicProperties$$$PreferExistingWrapperObject -->
<h3 class="flags" id="QObjectWrapOption-enum"><a name="QObjectWrapOption-enum"></a>enum QScriptEngine::<span class="name">QObjectWrapOption</span><br>flags QScriptEngine::<span class="name">QObjectWrapOptions</span><a class="plink" href="#QObjectWrapOption-enum" title="Direct link to this headline"></a></h3>
<p>These flags specify options when wrapping a <a href="./qobject.htm" translate="no">QObject</a> pointer with <a href="./qscriptengine.htm#newQObject" translate="no">newQObject</a>().</p>
<div class="table"><table class="valuelist"><tbody><tr class="odd" valign="top"><th class="tblConst">Constant</th><th class="tblval">Value</th><th class="tbldscr">Description</th></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::ExcludeChildObjects</code></td><td class="topAlign tblval"><code translate="no">0x0001</code></td><td class="topAlign">The script object will not expose child objects as properties.</td></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::ExcludeSuperClassMethods</code></td><td class="topAlign tblval"><code translate="no">0x0002</code></td><td class="topAlign">The script object will not expose signals and slots inherited from the superclass.</td></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::ExcludeSuperClassProperties</code></td><td class="topAlign tblval"><code translate="no">0x0004</code></td><td class="topAlign">The script object will not expose properties inherited from the superclass.</td></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::ExcludeSuperClassContents</code></td><td class="topAlign tblval"><code translate="no">0x0006</code></td><td class="topAlign">Shorthand form for ExcludeSuperClassMethods | ExcludeSuperClassProperties</td></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::ExcludeDeleteLater</code></td><td class="topAlign tblval"><code translate="no">0x0010</code></td><td class="topAlign">The script object will not expose the <a href="./qobject.htm#deleteLater" translate="no">QObject::deleteLater</a>() slot.</td></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::ExcludeSlots</code></td><td class="topAlign tblval"><code translate="no">0x0020</code></td><td class="topAlign">The script object will not expose the <a href="./qobject.htm" translate="no">QObject</a>'s slots.</td></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::AutoCreateDynamicProperties</code></td><td class="topAlign tblval"><code translate="no">0x0100</code></td><td class="topAlign">Properties that don't already exist in the <a href="./qobject.htm" translate="no">QObject</a> will be created as dynamic properties of that object, rather than as properties of the script object.</td></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::PreferExistingWrapperObject</code></td><td class="topAlign tblval"><code translate="no">0x0200</code></td><td class="topAlign">If a wrapper object with the requested configuration already exists, return that object.</td></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::SkipMethodsInEnumeration</code></td><td class="topAlign tblval"><code translate="no">0x0008</code></td><td class="topAlign">Don't include methods (signals and slots) when enumerating the object's properties.</td></tr>
</tbody></table></div>
<p>The QObjectWrapOptions type is a typedef for <a href="./qflags.htm">QFlags</a>&lt;QObjectWrapOption&gt;. It stores an OR combination of QObjectWrapOption values.</p>
<!-- @@@QObjectWrapOption -->
<!-- $$$ValueOwnership$$$QtOwnership$$$ScriptOwnership$$$AutoOwnership -->
<h3 class="fn" id="ValueOwnership-enum" translate="no"><a name="ValueOwnership-enum"></a>enum QScriptEngine::<span class="name">ValueOwnership</span><a class="plink" href="#ValueOwnership-enum" title="Direct link to this headline"></a></h3>
<p>This enum specifies the ownership when wrapping a C++ value, e.g. by using <a href="./qscriptengine.htm#newQObject" translate="no">newQObject</a>().</p>
<div class="table"><table class="valuelist"><tbody><tr class="odd" valign="top"><th class="tblConst">Constant</th><th class="tblval">Value</th><th class="tbldscr">Description</th></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::QtOwnership</code></td><td class="topAlign tblval"><code translate="no">0</code></td><td class="topAlign">The standard Qt ownership rules apply, i.e. the associated object will never be explicitly deleted by the script engine. This is the default. (<a href="./qobject.htm" translate="no">QObject</a> ownership is explained in <a href="./objecttrees.htm" translate="no">Object Trees &amp; Ownership</a>.)</td></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::ScriptOwnership</code></td><td class="topAlign tblval"><code translate="no">1</code></td><td class="topAlign">The value is owned by the script environment. The associated data will be deleted when appropriate (i.e. after the garbage collector has discovered that there are no more live references to the value).</td></tr>
<tr><td class="topAlign"><code translate="no">QScriptEngine::AutoOwnership</code></td><td class="topAlign tblval"><code translate="no">2</code></td><td class="topAlign">If the associated object has a parent, the Qt ownership rules apply (QtOwnership); otherwise, the object is owned by the script environment (ScriptOwnership).</td></tr>
</tbody></table></div>
<!-- @@@ValueOwnership -->
</div>
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QScriptEngine$$$QScriptEngineQObject* -->
<h3 class="fn" id="QScriptEngine-1" translate="no"><a name="QScriptEngine-1"></a>QScriptEngine::<span class="name">QScriptEngine</span>(<span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span> *<i>parent</i>)<a class="plink" href="#QScriptEngine-1" title="Direct link to this headline"></a></h3>
<p>Constructs a QScriptEngine object with the given <i translate="no">parent</i>.</p>
<p>The <a href="./qscriptengine.htm#globalObject" translate="no">globalObject</a>() is initialized to have properties as described in <a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm" translate="no">ECMA-262</a>, Section 15.1.</p>
<!-- @@@QScriptEngine -->
<!-- $$$QScriptEngine[overload1]$$$QScriptEngine -->
<h3 class="fn" id="QScriptEngine" translate="no"><a name="QScriptEngine"></a>QScriptEngine::<span class="name">QScriptEngine</span>()<a class="plink" href="#QScriptEngine" title="Direct link to this headline"></a></h3>
<p>Constructs a QScriptEngine object.</p>
<p>The <a href="./qscriptengine.htm#globalObject" translate="no">globalObject</a>() is initialized to have properties as described in <a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm" translate="no">ECMA-262</a>, Section 15.1.</p>
<!-- @@@QScriptEngine -->
<!-- $$$signalHandlerException[overload1]$$$signalHandlerExceptionconstQScriptValue& -->
<h3 class="fn" id="signalHandlerException" translate="no"><a name="signalHandlerException"></a><code translate="no">[signal] </code><span class="type">void</span> QScriptEngine::<span class="name">signalHandlerException</span>(const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>exception</i>)<a class="plink" href="#signalHandlerException" title="Direct link to this headline"></a></h3>
<p>This signal is emitted when a script function connected to a signal causes an <i translate="no">exception</i>.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#qScriptConnect" translate="no">qScriptConnect</a>().</p>
<!-- @@@signalHandlerException -->
<!-- $$$~QScriptEngine[overload1]$$$~QScriptEngine -->
<h3 class="fn" id="dtor.QScriptEngine" translate="no"><a name="dtor.QScriptEngine"></a><code translate="no">[virtual] </code>QScriptEngine::<span class="name">~QScriptEngine</span>()<a class="plink" href="#dtor.QScriptEngine" title="Direct link to this headline"></a></h3>
<p>Destroys this <a href="./qscriptengine.htm" translate="no">QScriptEngine</a>.</p>
<!-- @@@~QScriptEngine -->
<!-- $$$abortEvaluation[overload1]$$$abortEvaluationconstQScriptValue& -->
<h3 class="fn" id="abortEvaluation" translate="no"><a name="abortEvaluation"></a><span class="type">void</span> QScriptEngine::<span class="name">abortEvaluation</span>(const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>result</i> = QScriptValue())<a class="plink" href="#abortEvaluation" title="Direct link to this headline"></a></h3>
<p>Aborts any script evaluation currently taking place in this engine. The given <i translate="no">result</i> is passed back as the result of the evaluation (i.e. it is returned from the call to <a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>() being aborted).</p>
<p>If the engine isn't evaluating a script (i.e. <a href="./qscriptengine.htm#isEvaluating" translate="no">isEvaluating</a>() returns false), this function does nothing.</p>
<p>Call this function if you need to abort a running script for some reason, e.g. when you have detected that the script has been running for several seconds without completing.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>(), <a href="./qscriptengine.htm#isEvaluating" translate="no">isEvaluating</a>(), and <a href="./qscriptengine.htm#setProcessEventsInterval" translate="no">setProcessEventsInterval</a>().</p>
<!-- @@@abortEvaluation -->
<!-- $$$agent[overload1]$$$agent -->
<h3 class="fn" id="agent" translate="no"><a name="agent"></a><span class="type"><a href="./qscriptengineagent.htm" translate="no">QScriptEngineAgent</a></span> *QScriptEngine::<span class="name">agent</span>() const<a class="plink" href="#agent" title="Direct link to this headline"></a></h3>
<p>Returns the agent currently installed on this engine, or 0 if no agent is installed.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#setAgent" translate="no">setAgent</a>().</p>
<!-- @@@agent -->
<!-- $$$availableExtensions[overload1]$$$availableExtensions -->
<h3 class="fn" id="availableExtensions" translate="no"><a name="availableExtensions"></a><span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> QScriptEngine::<span class="name">availableExtensions</span>() const<a class="plink" href="#availableExtensions" title="Direct link to this headline"></a></h3>
<p>Returns a list naming the available extensions that can be imported using the <a href="./qscriptengine.htm#importExtension" translate="no">importExtension</a>() function. This list includes extensions that have been imported.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#importExtension" translate="no">importExtension</a>() and <a href="./qscriptengine.htm#importedExtensions" translate="no">importedExtensions</a>().</p>
<!-- @@@availableExtensions -->
<!-- $$$checkSyntax[overload1]$$$checkSyntaxconstQString& -->
<h3 class="fn" id="checkSyntax" translate="no"><a name="checkSyntax"></a><code translate="no">[static] </code><span class="type"><a href="./qscriptsyntaxcheckresult.htm" translate="no">QScriptSyntaxCheckResult</a></span> QScriptEngine::<span class="name">checkSyntax</span>(const <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> &amp;<i>program</i>)<a class="plink" href="#checkSyntax" title="Direct link to this headline"></a></h3>
<p>Checks the syntax of the given <i translate="no">program</i>. Returns a <a href="./qscriptsyntaxcheckresult.htm" translate="no">QScriptSyntaxCheckResult</a> object that contains the result of the check.</p>
<p>This function was introduced in Qt 4.5.</p>
<!-- @@@checkSyntax -->
<!-- $$$clearExceptions[overload1]$$$clearExceptions -->
<h3 class="fn" id="clearExceptions" translate="no"><a name="clearExceptions"></a><span class="type">void</span> QScriptEngine::<span class="name">clearExceptions</span>()<a class="plink" href="#clearExceptions" title="Direct link to this headline"></a></h3>
<p>Clears any uncaught exceptions in this engine.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#hasUncaughtException" translate="no">hasUncaughtException</a>().</p>
<!-- @@@clearExceptions -->
<!-- $$$collectGarbage[overload1]$$$collectGarbage -->
<h3 class="fn" id="collectGarbage" translate="no"><a name="collectGarbage"></a><span class="type">void</span> QScriptEngine::<span class="name">collectGarbage</span>()<a class="plink" href="#collectGarbage" title="Direct link to this headline"></a></h3>
<p>Runs the garbage collector.</p>
<p>The garbage collector will attempt to reclaim memory by locating and disposing of objects that are no longer reachable in the script environment.</p>
<p>Normally you don't need to call this function; the garbage collector will automatically be invoked when the <a href="./qscriptengine.htm" translate="no">QScriptEngine</a> decides that it's wise to do so (i.e. when a certain number of new objects have been created). However, you can call this function to explicitly request that garbage collection should be performed as soon as possible.</p>
<p><b>See also </b><a href="./qscriptengine.htm#reportAdditionalMemoryCost" translate="no">reportAdditionalMemoryCost</a>().</p>
<!-- @@@collectGarbage -->
<!-- $$$currentContext[overload1]$$$currentContext -->
<h3 class="fn" id="currentContext" translate="no"><a name="currentContext"></a><span class="type"><a href="./qscriptcontext.htm" translate="no">QScriptContext</a></span> *QScriptEngine::<span class="name">currentContext</span>() const<a class="plink" href="#currentContext" title="Direct link to this headline"></a></h3>
<p>Returns the current context.</p>
<p>The current context is typically accessed to retrieve the arguments and `this' object in native functions; for convenience, it is available as the first argument in <a href="./qscriptengine.htm#FunctionSignature-typedef" translate="no">QScriptEngine::FunctionSignature</a>.</p>
<!-- @@@currentContext -->
<!-- $$$defaultPrototype[overload1]$$$defaultPrototypeint -->
<h3 class="fn" id="defaultPrototype" translate="no"><a name="defaultPrototype"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">defaultPrototype</span>(<span class="type">int</span> <i>metaTypeId</i>) const<a class="plink" href="#defaultPrototype" title="Direct link to this headline"></a></h3>
<p>Returns the default prototype associated with the given <i translate="no">metaTypeId</i>, or an invalid <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> if no default prototype has been set.</p>
<p><b>See also </b><a href="./qscriptengine.htm#setDefaultPrototype" translate="no">setDefaultPrototype</a>().</p>
<!-- @@@defaultPrototype -->
<!-- $$$evaluate[overload1]$$$evaluateconstQString&constQString&int -->
<h3 class="fn" id="evaluate" translate="no"><a name="evaluate"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">evaluate</span>(const <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> &amp;<i>program</i>, const <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> &amp;<i>fileName</i> = QString(), <span class="type">int</span> <i>lineNumber</i> = 1)<a class="plink" href="#evaluate" title="Direct link to this headline"></a></h3>
<p>Evaluates <i translate="no">program</i>, using <i translate="no">lineNumber</i> as the base line number, and returns the result of the evaluation.</p>
<p>The script code will be evaluated in the current context.</p>
<p>The evaluation of <i translate="no">program</i> can cause an exception in the engine; in this case the return value will be the exception that was thrown (typically an <code translate="no">Error</code> object). You can call <a href="./qscriptengine.htm#hasUncaughtException" translate="no">hasUncaughtException</a>() to determine if an exception occurred in the last call to evaluate().</p>
<p><i translate="no">lineNumber</i> is used to specify a starting line number for <i translate="no">program</i>; line number information reported by the engine that pertain to this evaluation (e.g. <a href="./qscriptengine.htm#uncaughtExceptionLineNumber" translate="no">uncaughtExceptionLineNumber</a>()) will be based on this argument. For example, if <i translate="no">program</i> consists of two lines of code, and the statement on the second line causes a script exception, <a href="./qscriptengine.htm#uncaughtExceptionLineNumber" translate="no">uncaughtExceptionLineNumber</a>() would return the given <i translate="no">lineNumber</i> plus one. When no starting line number is specified, line numbers will be 1-based.</p>
<p><i translate="no">fileName</i> is used for error reporting. For example in error objects the file name is accessible through the "fileName" property if it's provided with this function.</p>
<p><b>See also </b><a href="./qscriptengine-obsolete.htm#canEvaluate" translate="no">canEvaluate</a>(), <a href="./qscriptengine.htm#hasUncaughtException" translate="no">hasUncaughtException</a>(), <a href="./qscriptengine.htm#isEvaluating" translate="no">isEvaluating</a>(), and <a href="./qscriptengine.htm#abortEvaluation" translate="no">abortEvaluation</a>().</p>
<!-- @@@evaluate -->
<!-- $$$evaluate$$$evaluateconstQScriptProgram& -->
<h3 class="fn" id="evaluate-1" translate="no"><a name="evaluate-1"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">evaluate</span>(const <span class="type"><a href="./qscriptprogram.htm" translate="no">QScriptProgram</a></span> &amp;<i>program</i>)<a class="plink" href="#evaluate-1" title="Direct link to this headline"></a></h3>
<p>Evaluates the given <i translate="no">program</i> and returns the result of the evaluation.</p>
<p>This function was introduced in Qt 4.7.</p>
<!-- @@@evaluate -->
<!-- $$$fromScriptValue[overload1]$$$fromScriptValueconstQScriptValue& -->
<h3 class="fn" id="fromScriptValue" translate="no"><a name="fromScriptValue"></a>template &lt;typename T&gt; <span class="type">T</span> QScriptEngine::<span class="name">fromScriptValue</span>(const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>value</i>)<a class="plink" href="#fromScriptValue" title="Direct link to this headline"></a></h3>
<p>Returns the given <i translate="no">value</i> converted to the template type <code translate="no">T</code>.</p>
<p>Note that <code translate="no">T</code> must be known to <a href="./qmetatype.htm" translate="no">QMetaType</a>.</p>
<p>See <a href="./qtscript-index.htm#conversion-between-qt-script-and-c-types" translate="no">Conversion Between Qt Script and C++ Types</a> for a description of the built-in type conversion provided by Qt Script.</p>
<p><b>See also </b><a href="./qscriptengine.htm#toScriptValue" translate="no">toScriptValue</a>() and <a href="./qscriptengine.htm#qScriptRegisterMetaType" translate="no">qScriptRegisterMetaType</a>().</p>
<!-- @@@fromScriptValue -->
<!-- $$$globalObject[overload1]$$$globalObject -->
<h3 class="fn" id="globalObject" translate="no"><a name="globalObject"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">globalObject</span>() const<a class="plink" href="#globalObject" title="Direct link to this headline"></a></h3>
<p>Returns this engine's Global Object.</p>
<p>By default, the Global Object contains the built-in objects that are part of <a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm" translate="no">ECMA-262</a>, such as Math, Date and String. Additionally, you can set properties of the Global Object to make your own extensions available to all script code. Non-local variables in script code will be created as properties of the Global Object, as well as local variables in global code.</p>
<p><b>See also </b><a href="./qscriptengine.htm#setGlobalObject" translate="no">setGlobalObject</a>().</p>
<!-- @@@globalObject -->
<!-- $$$hasUncaughtException[overload1]$$$hasUncaughtException -->
<h3 class="fn" id="hasUncaughtException" translate="no"><a name="hasUncaughtException"></a><span class="type">bool</span> QScriptEngine::<span class="name">hasUncaughtException</span>() const<a class="plink" href="#hasUncaughtException" title="Direct link to this headline"></a></h3>
<p>Returns true if the last script evaluation resulted in an uncaught exception; otherwise returns false.</p>
<p>The exception state is cleared when <a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>() is called.</p>
<p><b>See also </b><a href="./qscriptengine.htm#uncaughtException" translate="no">uncaughtException</a>() and <a href="./qscriptengine.htm#uncaughtExceptionLineNumber" translate="no">uncaughtExceptionLineNumber</a>().</p>
<!-- @@@hasUncaughtException -->
<!-- $$$importExtension[overload1]$$$importExtensionconstQString& -->
<h3 class="fn" id="importExtension" translate="no"><a name="importExtension"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">importExtension</span>(const <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> &amp;<i>extension</i>)<a class="plink" href="#importExtension" title="Direct link to this headline"></a></h3>
<p>Imports the given <i translate="no">extension</i> into this <a href="./qscriptengine.htm" translate="no">QScriptEngine</a>. Returns <a href="./qscriptengine.htm#undefinedValue" translate="no">undefinedValue</a>() if the extension was successfully imported. You can call <a href="./qscriptengine.htm#hasUncaughtException" translate="no">hasUncaughtException</a>() to check if an error occurred; in that case, the return value is the value that was thrown by the exception (usually an <code translate="no">Error</code> object).</p>
<p><a href="./qscriptengine.htm" translate="no">QScriptEngine</a> ensures that a particular extension is only imported once; subsequent calls to importExtension() with the same extension name will do nothing and return <a href="./qscriptengine.htm#undefinedValue" translate="no">undefinedValue</a>().</p>
<p><b>See also </b><a href="./qscriptengine.htm#availableExtensions" translate="no">availableExtensions</a>(), <a href="./qscriptextensionplugin.htm" translate="no">QScriptExtensionPlugin</a>, and <a href="./qtscriptextensions.htm" translate="no">Creating Qt Script Extensions</a>.</p>
<!-- @@@importExtension -->
<!-- $$$importedExtensions[overload1]$$$importedExtensions -->
<h3 class="fn" id="importedExtensions" translate="no"><a name="importedExtensions"></a><span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> QScriptEngine::<span class="name">importedExtensions</span>() const<a class="plink" href="#importedExtensions" title="Direct link to this headline"></a></h3>
<p>Returns a list naming the extensions that have been imported using the <a href="./qscriptengine.htm#importExtension" translate="no">importExtension</a>() function.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#availableExtensions" translate="no">availableExtensions</a>().</p>
<!-- @@@importedExtensions -->
<!-- $$$installTranslatorFunctions[overload1]$$$installTranslatorFunctionsconstQScriptValue& -->
<h3 class="fn" id="installTranslatorFunctions" translate="no"><a name="installTranslatorFunctions"></a><span class="type">void</span> QScriptEngine::<span class="name">installTranslatorFunctions</span>(const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>object</i> = QScriptValue())<a class="plink" href="#installTranslatorFunctions" title="Direct link to this headline"></a></h3>
<p>Installs translator functions on the given <i translate="no">object</i>, or on the Global Object if no object is specified.</p>
<p>The relation between Qt Script translator functions and C++ translator functions is described in the following table:</p>
<div class="table"><table class="generic">
<thead><tr class="qt-style"><th>Script Function</th><th>Corresponding C++ Function</th></tr></thead>
<tbody><tr class="odd" valign="top"><td>qsTr()</td><td><a href="./qobject.htm#tr" translate="no">QObject::tr</a>()</td></tr>
<tr class="even" valign="top"><td><a href="./qtglobal.htm#QT_TR_NOOP" translate="no">QT_TR_NOOP</a>()</td><td><a href="./qtglobal.htm#QT_TR_NOOP" translate="no">QT_TR_NOOP</a>()</td></tr>
<tr class="odd" valign="top"><td>qsTranslate()</td><td><a href="./qcoreapplication.htm#translate" translate="no">QCoreApplication::translate</a>()</td></tr>
<tr class="even" valign="top"><td><a href="./qtglobal.htm#QT_TRANSLATE_NOOP" translate="no">QT_TRANSLATE_NOOP</a>()</td><td><a href="./qtglobal.htm#QT_TRANSLATE_NOOP" translate="no">QT_TRANSLATE_NOOP</a>()</td></tr>
<tr class="odd" valign="top"><td>qsTrId() (since 4.7)</td><td><a href="./qtglobal.htm#qtTrId" translate="no">qtTrId</a>()</td></tr>
<tr class="even" valign="top"><td><a href="./qtglobal.htm#QT_TRID_NOOP" translate="no">QT_TRID_NOOP</a>() (since 4.7)</td><td><a href="./qtglobal.htm#QT_TRID_NOOP" translate="no">QT_TRID_NOOP</a>()</td></tr>
</tbody></table></div>
<p>This function was introduced in Qt 4.5.</p>
<p><b>See also </b><a href="./internationalization.htm" translate="no">Internationalization with Qt</a>.</p>
<!-- @@@installTranslatorFunctions -->
<!-- $$$isEvaluating[overload1]$$$isEvaluating -->
<h3 class="fn" id="isEvaluating" translate="no"><a name="isEvaluating"></a><span class="type">bool</span> QScriptEngine::<span class="name">isEvaluating</span>() const<a class="plink" href="#isEvaluating" title="Direct link to this headline"></a></h3>
<p>Returns true if this engine is currently evaluating a script, otherwise returns false.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>() and <a href="./qscriptengine.htm#abortEvaluation" translate="no">abortEvaluation</a>().</p>
<!-- @@@isEvaluating -->
<!-- $$$newArray[overload1]$$$newArrayuint -->
<h3 class="fn" id="newArray" translate="no"><a name="newArray"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newArray</span>(<span class="type"><a href="./qtglobal.htm#uint-typedef" translate="no">uint</a></span> <i>length</i> = 0)<a class="plink" href="#newArray" title="Direct link to this headline"></a></h3>
<p>Creates a Qt Script object of class Array with the given <i translate="no">length</i>.</p>
<p><b>See also </b><a href="./qscriptengine.htm#newObject" translate="no">newObject</a>().</p>
<!-- @@@newArray -->
<!-- $$$newDate[overload1]$$$newDateqsreal -->
<h3 class="fn" id="newDate" translate="no"><a name="newDate"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newDate</span>(<span class="type">qsreal</span> <i>value</i>)<a class="plink" href="#newDate" title="Direct link to this headline"></a></h3>
<p>Creates a Qt Script object of class Date with the given <i translate="no">value</i> (the number of milliseconds since 01 January 1970, UTC).</p>
<!-- @@@newDate -->
<!-- $$$newDate$$$newDateconstQDateTime& -->
<h3 class="fn" id="newDate-1" translate="no"><a name="newDate-1"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newDate</span>(const <span class="type"><a href="./qdatetime.htm" translate="no">QDateTime</a></span> &amp;<i>value</i>)<a class="plink" href="#newDate-1" title="Direct link to this headline"></a></h3>
<p>Creates a Qt Script object of class Date from the given <i translate="no">value</i>.</p>
<p><b>See also </b><a href="./qscriptvalue.htm#toDateTime" translate="no">QScriptValue::toDateTime</a>().</p>
<!-- @@@newDate -->
<!-- $$$newFunction[overload1]$$$newFunctionQScriptEngine::FunctionSignatureint -->
<h3 class="fn" id="newFunction" translate="no"><a name="newFunction"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newFunction</span>(<span class="type"><a href="./qscriptengine.htm#FunctionSignature-typedef" translate="no">QScriptEngine::FunctionSignature</a></span> <i>fun</i>, <span class="type">int</span> <i>length</i> = 0)<a class="plink" href="#newFunction" title="Direct link to this headline"></a></h3>
<p>Creates a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> that wraps a native (C++) function. <i translate="no">fun</i> must be a C++ function with signature <a href="./qscriptengine.htm#FunctionSignature-typedef" translate="no">QScriptEngine::FunctionSignature</a>. <i translate="no">length</i> is the number of arguments that <i translate="no">fun</i> expects; this becomes the <code translate="no">length</code> property of the created <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>.</p>
<p>Note that <i translate="no">length</i> only gives an indication of the number of arguments that the function expects; an actual invocation of a function can include any number of arguments. You can check the <a href="./qscriptcontext.htm#argumentCount" translate="no">argumentCount()</a> of the <a href="./qscriptcontext.htm" translate="no">QScriptContext</a> associated with the invocation to determine the actual number of arguments passed.</p>
<p>A <code translate="no">prototype</code> property is automatically created for the resulting function object, to provide for the possibility that the function will be used as a constructor.</p>
<p>By combining newFunction() and the property flags <a href="./qscriptvalue.htm#PropertyFlag-enum" translate="no">QScriptValue::PropertyGetter</a> and <a href="./qscriptvalue.htm#PropertyFlag-enum" translate="no">QScriptValue::PropertySetter</a>, you can create script object properties that behave like normal properties in script code, but are in fact accessed through functions (analogous to how properties work in <a href="./properties.htm" translate="no">Qt's Property System</a>). Example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">static</span> <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> getSetFoo(<span class="type"><a href="./qscriptcontext.htm" translate="no">QScriptContext</a></span> <span class="operator">*</span>context<span class="operator">,</span> <span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> <span class="operator">*</span>engine)
{
    <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> callee <span class="operator">=</span> context<span class="operator">-</span><span class="operator">&gt;</span>callee();
    <span class="keyword">if</span> (context<span class="operator">-</span><span class="operator">&gt;</span>argumentCount() <span class="operator">=</span><span class="operator">=</span> <span class="number">1</span>) <span class="comment">// writing?</span>
        callee<span class="operator">.</span>setProperty(<span class="string">"value"</span><span class="operator">,</span> context<span class="operator">-</span><span class="operator">&gt;</span>argument(<span class="number">0</span>));
    <span class="keyword">return</span> callee<span class="operator">.</span>property(<span class="string">"value"</span>);
}

<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>

<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> object <span class="operator">=</span> engine<span class="operator">.</span>newObject();
object<span class="operator">.</span>setProperty(<span class="string">"foo"</span><span class="operator">,</span> engine<span class="operator">.</span>newFunction(getSetFoo)<span class="operator">,</span>
    <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span><span class="operator">::</span>PropertyGetter <span class="operator">|</span> <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span><span class="operator">::</span>PropertySetter);</pre></div>
<p>When the property <code translate="no">foo</code> of the script object is subsequently accessed in script code, <code translate="no">getSetFoo()</code> will be invoked to handle the access. In this particular case, we chose to store the "real" value of <code translate="no">foo</code> as a property of the accessor function itself; you are of course free to do whatever you like in this function.</p>
<p>In the above example, a single native function was used to handle both reads and writes to the property; the argument count is used to determine if we are handling a read or write. You can also use two separate functions; just specify the relevant flag (<a href="./qscriptvalue.htm#PropertyFlag-enum" translate="no">QScriptValue::PropertyGetter</a> or <a href="./qscriptvalue.htm#PropertyFlag-enum" translate="no">QScriptValue::PropertySetter</a>) when setting the property, e.g.:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> object <span class="operator">=</span> engine<span class="operator">.</span>newObject();
object<span class="operator">.</span>setProperty(<span class="string">"foo"</span><span class="operator">,</span> engine<span class="operator">.</span>newFunction(getFoo)<span class="operator">,</span> <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span><span class="operator">::</span>PropertyGetter);
object<span class="operator">.</span>setProperty(<span class="string">"foo"</span><span class="operator">,</span> engine<span class="operator">.</span>newFunction(setFoo)<span class="operator">,</span> <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span><span class="operator">::</span>PropertySetter);</pre></div>
<p><b>See also </b><a href="./qscriptvalue.htm#call" translate="no">QScriptValue::call</a>().</p>
<!-- @@@newFunction -->
<!-- $$$newFunction$$$newFunctionQScriptEngine::FunctionSignatureconstQScriptValue&int -->
<h3 class="fn" id="newFunction-1" translate="no"><a name="newFunction-1"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newFunction</span>(<span class="type"><a href="./qscriptengine.htm#FunctionSignature-typedef" translate="no">QScriptEngine::FunctionSignature</a></span> <i>fun</i>, const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>prototype</i>, <span class="type">int</span> <i>length</i> = 0)<a class="plink" href="#newFunction-1" title="Direct link to this headline"></a></h3>
<p>Creates a constructor function from <i translate="no">fun</i>, with the given <i translate="no">length</i>. The <code translate="no">prototype</code> property of the resulting function is set to be the given <i translate="no">prototype</i>. The <code translate="no">constructor</code> property of <i translate="no">prototype</i> is set to be the resulting function.</p>
<p>When a function is called as a constructor (e.g. <code translate="no">new Foo()</code>), the `this' object associated with the function call is the new object that the function is expected to initialize; the prototype of this default constructed object will be the function's public <code translate="no">prototype</code> property. If you always want the function to behave as a constructor (e.g. <code translate="no">Foo()</code> should also create a new object), or if you need to create your own object rather than using the default `this' object, you should make sure that the prototype of your object is set correctly; either by setting it manually, or, when wrapping a custom type, by having registered the <a href="./qscriptengine.htm#defaultPrototype" translate="no">defaultPrototype</a>() of that type. Example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> Foo(<span class="type"><a href="./qscriptcontext.htm" translate="no">QScriptContext</a></span> <span class="operator">*</span>context<span class="operator">,</span> <span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> <span class="operator">*</span>engine)
{
    <span class="keyword">if</span> (context<span class="operator">-</span><span class="operator">&gt;</span>calledAsConstructor()) {
        <span class="comment">// initialize the new object</span>
        context<span class="operator">-</span><span class="operator">&gt;</span>thisObject()<span class="operator">.</span>setProperty(<span class="string">"bar"</span><span class="operator">,</span> <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>);
        <span class="comment">// ...</span>
        <span class="comment">// return a non-object value to indicate that the</span>
        <span class="comment">// thisObject() should be the result of the "new Foo()" expression</span>
        <span class="keyword">return</span> engine<span class="operator">-</span><span class="operator">&gt;</span>undefinedValue();
    } <span class="keyword">else</span> {
        <span class="comment">// not called as "new Foo()", just "Foo()"</span>
        <span class="comment">// create our own object and return that one</span>
        <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> object <span class="operator">=</span> engine<span class="operator">-</span><span class="operator">&gt;</span>newObject();
        object<span class="operator">.</span>setPrototype(context<span class="operator">-</span><span class="operator">&gt;</span>callee()<span class="operator">.</span>property(<span class="string">"prototype"</span>));
        object<span class="operator">.</span>setProperty(<span class="string">"baz"</span><span class="operator">,</span> <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>);
        <span class="keyword">return</span> object;
    }
}

<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>

<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> fooProto <span class="operator">=</span> engine<span class="operator">-</span><span class="operator">&gt;</span>newObject();
fooProto<span class="operator">.</span>setProperty(<span class="string">"whatever"</span><span class="operator">,</span> <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>);
engine<span class="operator">-</span><span class="operator">&gt;</span>globalObject()<span class="operator">.</span>setProperty(<span class="string">"Foo"</span><span class="operator">,</span> engine<span class="operator">-</span><span class="operator">&gt;</span>newFunction(Foo<span class="operator">,</span> fooProto));</pre></div>
<p>To wrap a custom type and provide a constructor for it, you'd typically do something like this:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> Bar { <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span> };

Q_DECLARE_METATYPE(Bar)

<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> constructBar(<span class="type"><a href="./qscriptcontext.htm" translate="no">QScriptContext</a></span> <span class="operator">*</span>context<span class="operator">,</span> <span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> <span class="operator">*</span>engine)
{
    Bar bar;
    <span class="comment">// initialize from arguments in context, if desired</span>
    <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
    <span class="keyword">return</span> engine<span class="operator">-</span><span class="operator">&gt;</span>toScriptValue(bar);
}

<span class="keyword">class</span> BarPrototype : <span class="keyword">public</span> <span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span><span class="operator">,</span> <span class="keyword">public</span> <span class="type"><a href="./qscriptable.htm" translate="no">QScriptable</a></span>
{
<span class="comment">// provide the scriptable interface of this type using slots and properties</span>
<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
};

<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>

<span class="comment">// create and register the Bar prototype and constructor in the engine</span>
BarPrototype <span class="operator">*</span>barPrototypeObject <span class="operator">=</span> <span class="keyword">new</span> BarPrototype(<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>);
<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> barProto <span class="operator">=</span> engine<span class="operator">-</span><span class="operator">&gt;</span>newQObject(barPrototypeObject);
engine<span class="operator">-</span><span class="operator">&gt;</span>setDefaultPrototype(<a href="./qmetatype.htm#qMetaTypeId" translate="no">qMetaTypeId</a><span class="operator">&lt;</span>Bar<span class="operator">&gt;</span><span class="operator">,</span> barProto);
<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> barCtor <span class="operator">=</span> engine<span class="operator">-</span><span class="operator">&gt;</span>newFunction(constructBar<span class="operator">,</span> barProto);
engine<span class="operator">-</span><span class="operator">&gt;</span>globalObject()<span class="operator">.</span>setProperty(<span class="string">"Bar"</span><span class="operator">,</span> barCtor);</pre></div>
<!-- @@@newFunction -->
<!-- $$$newObject[overload1]$$$newObject -->
<h3 class="fn" id="newObject" translate="no"><a name="newObject"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newObject</span>()<a class="plink" href="#newObject" title="Direct link to this headline"></a></h3>
<p>Creates a Qt Script object of class Object.</p>
<p>The prototype of the created object will be the Object prototype object.</p>
<p><b>See also </b><a href="./qscriptengine.htm#newArray" translate="no">newArray</a>() and <a href="./qscriptvalue.htm#setProperty" translate="no">QScriptValue::setProperty</a>().</p>
<!-- @@@newObject -->
<!-- $$$newObject$$$newObjectQScriptClass*constQScriptValue& -->
<h3 class="fn" id="newObject-1" translate="no"><a name="newObject-1"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newObject</span>(<span class="type"><a href="./qscriptclass.htm" translate="no">QScriptClass</a></span> *<i>scriptClass</i>, const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>data</i> = QScriptValue())<a class="plink" href="#newObject-1" title="Direct link to this headline"></a></h3>
<p>This is an overloaded function.</p>
<p>Creates a Qt Script Object of the given class, <i translate="no">scriptClass</i>.</p>
<p>The prototype of the created object will be the Object prototype object.</p>
<p><i translate="no">data</i>, if specified, is set as the internal data of the new object (using <a href="./qscriptvalue.htm#setData" translate="no">QScriptValue::setData</a>()).</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptvalue.htm#scriptClass" translate="no">QScriptValue::scriptClass</a>() and <a href="./qscriptengine.htm#reportAdditionalMemoryCost" translate="no">reportAdditionalMemoryCost</a>().</p>
<!-- @@@newObject -->
<!-- $$$newQMetaObject[overload1]$$$newQMetaObjectconstQMetaObject*constQScriptValue& -->
<h3 class="fn" id="newQMetaObject" translate="no"><a name="newQMetaObject"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newQMetaObject</span>(const <span class="type"><a href="./qmetaobject.htm" translate="no">QMetaObject</a></span> *<i>metaObject</i>, const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>ctor</i> = QScriptValue())<a class="plink" href="#newQMetaObject" title="Direct link to this headline"></a></h3>
<p>Creates a Qt Script object that represents a <a href="./qobject.htm" translate="no">QObject</a> class, using the the given <i translate="no">metaObject</i> and constructor <i translate="no">ctor</i>.</p>
<p>Enums of <i translate="no">metaObject</i> (declared with Q_ENUMS) are available as properties of the created <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>. When the class is called as a function, <i translate="no">ctor</i> will be called to create a new instance of the class.</p>
<p>Example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> mySpecialQObjectConstructor(<span class="type"><a href="./qscriptcontext.htm" translate="no">QScriptContext</a></span> <span class="operator">*</span>context<span class="operator">,</span>
                                         <span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> <span class="operator">*</span>engine)
{
    <span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span> <span class="operator">*</span>parent <span class="operator">=</span> context<span class="operator">-</span><span class="operator">&gt;</span>argument(<span class="number">0</span>)<span class="operator">.</span>toQObject();
    <span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span> <span class="operator">*</span>object <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span>(parent);
    <span class="keyword">return</span> engine<span class="operator">-</span><span class="operator">&gt;</span>newQObject(object<span class="operator">,</span> <span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span><span class="operator">::</span>ScriptOwnership);
}

<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>

<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> ctor <span class="operator">=</span> engine<span class="operator">.</span>newFunction(mySpecialQObjectConstructor);
<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> metaObject <span class="operator">=</span> engine<span class="operator">.</span>newQMetaObject(<span class="operator">&amp;</span><span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span><span class="operator">::</span>staticMetaObject<span class="operator">,</span> ctor);
engine<span class="operator">.</span>globalObject()<span class="operator">.</span>setProperty(<span class="string">"QObject"</span><span class="operator">,</span> metaObject);

<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> result <span class="operator">=</span> engine<span class="operator">.</span>evaluate(<span class="string">"new QObject()"</span>);</pre></div>
<p><b>See also </b><a href="./qscriptengine.htm#newQObject" translate="no">newQObject</a>() and <a href="./qscriptengine.htm#scriptValueFromQMetaObject" translate="no">scriptValueFromQMetaObject</a>().</p>
<!-- @@@newQMetaObject -->
<!-- $$$newQObject[overload1]$$$newQObjectQObject*QScriptEngine::ValueOwnershipconstQScriptEngine::QObjectWrapOptions& -->
<h3 class="fn" id="newQObject" translate="no"><a name="newQObject"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newQObject</span>(<span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span> *<i>object</i>, <span class="type"><a href="./qscriptengine.htm#ValueOwnership-enum" translate="no">QScriptEngine::ValueOwnership</a></span> <i>ownership</i> = QtOwnership, const <span class="type"><a href="./qscriptengine.htm#QObjectWrapOption-enum" translate="no">QScriptEngine::QObjectWrapOptions</a></span> &amp;<i>options</i> = QObjectWrapOptions())<a class="plink" href="#newQObject" title="Direct link to this headline"></a></h3>
<p>Creates a Qt Script object that wraps the given <a href="./qobject.htm" translate="no">QObject</a> <i translate="no">object</i>, using the given <i translate="no">ownership</i>. The given <i translate="no">options</i> control various aspects of the interaction with the resulting script object.</p>
<p>Signals and slots, properties and children of <i translate="no">object</i> are available as properties of the created <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>. For more information, see the <a href="./qtscript-index.htm" translate="no">Qt Script</a> documentation.</p>
<p>If <i translate="no">object</i> is a null pointer, this function returns <a href="./qscriptengine.htm#nullValue" translate="no">nullValue</a>().</p>
<p>If a default prototype has been registered for the <i translate="no">object</i>'s class (or its superclass, recursively), the prototype of the new script object will be set to be that default prototype.</p>
<p>If the given <i translate="no">object</i> is deleted outside of Qt Script's control, any attempt to access the deleted <a href="./qobject.htm" translate="no">QObject</a>'s members through the Qt Script wrapper object (either by script code or C++) will result in a script exception.</p>
<p><b>See also </b><a href="./qscriptvalue.htm#toQObject" translate="no">QScriptValue::toQObject</a>() and <a href="./qscriptengine.htm#reportAdditionalMemoryCost" translate="no">reportAdditionalMemoryCost</a>().</p>
<!-- @@@newQObject -->
<!-- $$$newQObject$$$newQObjectconstQScriptValue&QObject*QScriptEngine::ValueOwnershipconstQScriptEngine::QObjectWrapOptions& -->
<h3 class="fn" id="newQObject-1" translate="no"><a name="newQObject-1"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newQObject</span>(const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>scriptObject</i>, <span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span> *<i>qtObject</i>, <span class="type"><a href="./qscriptengine.htm#ValueOwnership-enum" translate="no">QScriptEngine::ValueOwnership</a></span> <i>ownership</i> = QtOwnership, const <span class="type"><a href="./qscriptengine.htm#QObjectWrapOption-enum" translate="no">QScriptEngine::QObjectWrapOptions</a></span> &amp;<i>options</i> = QObjectWrapOptions())<a class="plink" href="#newQObject-1" title="Direct link to this headline"></a></h3>
<p>This is an overloaded function.</p>
<p>Initializes the given <i translate="no">scriptObject</i> to hold the given <i translate="no">qtObject</i>, and returns the <i translate="no">scriptObject</i>.</p>
<p>This function enables you to "promote" a plain Qt Script object (created by the <a href="./qscriptengine.htm#newObject" translate="no">newObject</a>() function) to a <a href="./qobject.htm" translate="no">QObject</a> proxy, or to replace the <a href="./qobject.htm" translate="no">QObject</a> contained inside an object previously created by the newQObject() function.</p>
<p>The prototype() of the <i translate="no">scriptObject</i> will remain unchanged.</p>
<p>If <i translate="no">scriptObject</i> is not an object, this function behaves like the normal newQObject(), i.e. it creates a new script object and returns it.</p>
<p>This function is useful when you want to provide a script constructor for a <a href="./qobject.htm" translate="no">QObject</a>-based class. If your constructor is invoked in a <code translate="no">new</code> expression (<a href="./qscriptcontext.htm#isCalledAsConstructor" translate="no">QScriptContext::isCalledAsConstructor</a>() returns true), you can pass <a href="./qscriptcontext.htm#thisObject" translate="no">QScriptContext::thisObject</a>() (the default constructed script object) to this function to initialize the new object.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#reportAdditionalMemoryCost" translate="no">reportAdditionalMemoryCost</a>().</p>
<!-- @@@newQObject -->
<!-- $$$newRegExp[overload1]$$$newRegExpconstQRegExp& -->
<h3 class="fn" id="newRegExp" translate="no"><a name="newRegExp"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newRegExp</span>(const <span class="type"><a href="./qregexp.htm" translate="no">QRegExp</a></span> &amp;<i>regexp</i>)<a class="plink" href="#newRegExp" title="Direct link to this headline"></a></h3>
<p>Creates a Qt Script object of class RegExp with the given <i translate="no">regexp</i>.</p>
<p><b>See also </b><a href="./qscriptvalue.htm#toRegExp" translate="no">QScriptValue::toRegExp</a>().</p>
<!-- @@@newRegExp -->
<!-- $$$newRegExp$$$newRegExpconstQString&constQString& -->
<h3 class="fn" id="newRegExp-1" translate="no"><a name="newRegExp-1"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newRegExp</span>(const <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> &amp;<i>pattern</i>, const <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> &amp;<i>flags</i>)<a class="plink" href="#newRegExp-1" title="Direct link to this headline"></a></h3>
<p>Creates a Qt Script object of class RegExp with the given <i translate="no">pattern</i> and <i translate="no">flags</i>.</p>
<p>The legal flags are 'g' (global), 'i' (ignore case), and 'm' (multiline).</p>
<!-- @@@newRegExp -->
<!-- $$$newVariant[overload1]$$$newVariantconstQVariant& -->
<h3 class="fn" id="newVariant" translate="no"><a name="newVariant"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newVariant</span>(const <span class="type"><a href="./qvariant.htm" translate="no">QVariant</a></span> &amp;<i>value</i>)<a class="plink" href="#newVariant" title="Direct link to this headline"></a></h3>
<p>Creates a Qt Script object holding the given variant <i translate="no">value</i>.</p>
<p>If a default prototype has been registered with the meta type id of <i translate="no">value</i>, then the prototype of the created object will be that prototype; otherwise, the prototype will be the Object prototype object.</p>
<p><b>See also </b><a href="./qscriptengine.htm#setDefaultPrototype" translate="no">setDefaultPrototype</a>(), <a href="./qscriptvalue.htm#toVariant" translate="no">QScriptValue::toVariant</a>(), and <a href="./qscriptengine.htm#reportAdditionalMemoryCost" translate="no">reportAdditionalMemoryCost</a>().</p>
<!-- @@@newVariant -->
<!-- $$$newVariant$$$newVariantconstQScriptValue&constQVariant& -->
<h3 class="fn" id="newVariant-1" translate="no"><a name="newVariant-1"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">newVariant</span>(const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>object</i>, const <span class="type"><a href="./qvariant.htm" translate="no">QVariant</a></span> &amp;<i>value</i>)<a class="plink" href="#newVariant-1" title="Direct link to this headline"></a></h3>
<p>This is an overloaded function.</p>
<p>Initializes the given Qt Script <i translate="no">object</i> to hold the given variant <i translate="no">value</i>, and returns the <i translate="no">object</i>.</p>
<p>This function enables you to "promote" a plain Qt Script object (created by the <a href="./qscriptengine.htm#newObject" translate="no">newObject</a>() function) to a variant, or to replace the variant contained inside an object previously created by the newVariant() function.</p>
<p>The prototype() of the <i translate="no">object</i> will remain unchanged.</p>
<p>If <i translate="no">object</i> is not an object, this function behaves like the normal newVariant(), i.e. it creates a new script object and returns it.</p>
<p>This function is useful when you want to provide a script constructor for a C++ type. If your constructor is invoked in a <code translate="no">new</code> expression (<a href="./qscriptcontext.htm#isCalledAsConstructor" translate="no">QScriptContext::isCalledAsConstructor</a>() returns true), you can pass <a href="./qscriptcontext.htm#thisObject" translate="no">QScriptContext::thisObject</a>() (the default constructed script object) to this function to initialize the new object.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#reportAdditionalMemoryCost" translate="no">reportAdditionalMemoryCost</a>().</p>
<!-- @@@newVariant -->
<!-- $$$nullValue[overload1]$$$nullValue -->
<h3 class="fn" id="nullValue" translate="no"><a name="nullValue"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">nullValue</span>()<a class="plink" href="#nullValue" title="Direct link to this headline"></a></h3>
<p>Returns a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> of the primitive type Null.</p>
<p><b>See also </b><a href="./qscriptengine.htm#undefinedValue" translate="no">undefinedValue</a>().</p>
<!-- @@@nullValue -->
<!-- $$$popContext[overload1]$$$popContext -->
<h3 class="fn" id="popContext" translate="no"><a name="popContext"></a><span class="type">void</span> QScriptEngine::<span class="name">popContext</span>()<a class="plink" href="#popContext" title="Direct link to this headline"></a></h3>
<p>Pops the current execution context and restores the previous one. This function must be used in conjunction with <a href="./qscriptengine.htm#pushContext" translate="no">pushContext</a>().</p>
<p><b>See also </b><a href="./qscriptengine.htm#pushContext" translate="no">pushContext</a>().</p>
<!-- @@@popContext -->
<!-- $$$processEventsInterval[overload1]$$$processEventsInterval -->
<h3 class="fn" id="processEventsInterval" translate="no"><a name="processEventsInterval"></a><span class="type">int</span> QScriptEngine::<span class="name">processEventsInterval</span>() const<a class="plink" href="#processEventsInterval" title="Direct link to this headline"></a></h3>
<p>Returns the interval in milliseconds between calls to <a href="./qcoreapplication.htm#processEvents" translate="no">QCoreApplication::processEvents</a>() while the interpreter is running.</p>
<p><b>See also </b><a href="./qscriptengine.htm#setProcessEventsInterval" translate="no">setProcessEventsInterval</a>().</p>
<!-- @@@processEventsInterval -->
<!-- $$$pushContext[overload1]$$$pushContext -->
<h3 class="fn" id="pushContext" translate="no"><a name="pushContext"></a><span class="type"><a href="./qscriptcontext.htm" translate="no">QScriptContext</a></span> *QScriptEngine::<span class="name">pushContext</span>()<a class="plink" href="#pushContext" title="Direct link to this headline"></a></h3>
<p>Enters a new execution context and returns the associated <a href="./qscriptcontext.htm" translate="no">QScriptContext</a> object.</p>
<p>Once you are done with the context, you should call <a href="./qscriptengine.htm#popContext" translate="no">popContext</a>() to restore the old context.</p>
<p>By default, the `this' object of the new context is the Global Object. The context's <a href="./qscriptcontext.htm#callee" translate="no">callee</a>() will be invalid.</p>
<p>This function is useful when you want to evaluate script code as if it were the body of a function. You can use the context's <a href="./qscriptcontext.htm#activationObject" translate="no">activationObject</a>() to initialize local variables that will be available to scripts. Example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> engine;
<span class="type"><a href="./qscriptcontext.htm" translate="no">QScriptContext</a></span> <span class="operator">*</span>context <span class="operator">=</span> engine<span class="operator">.</span>pushContext();
context<span class="operator">-</span><span class="operator">&gt;</span>activationObject()<span class="operator">.</span>setProperty(<span class="string">"myArg"</span><span class="operator">,</span> <span class="number">123</span>);
engine<span class="operator">.</span>evaluate(<span class="string">"var tmp = myArg + 42"</span>);
<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
engine<span class="operator">.</span>popContext();</pre></div>
<p>In the above example, the new variable "tmp" defined in the script will be local to the context; in other words, the script doesn't have any effect on the global environment.</p>
<p>Returns 0 in case of stack overflow</p>
<p><b>See also </b><a href="./qscriptengine.htm#popContext" translate="no">popContext</a>().</p>
<!-- @@@pushContext -->
<!-- $$$reportAdditionalMemoryCost[overload1]$$$reportAdditionalMemoryCostint -->
<h3 class="fn" id="reportAdditionalMemoryCost" translate="no"><a name="reportAdditionalMemoryCost"></a><span class="type">void</span> QScriptEngine::<span class="name">reportAdditionalMemoryCost</span>(<span class="type">int</span> <i>size</i>)<a class="plink" href="#reportAdditionalMemoryCost" title="Direct link to this headline"></a></h3>
<p>Reports an additional memory cost of the given <i translate="no">size</i>, measured in bytes, to the garbage collector.</p>
<p>This function can be called to indicate that a Qt Script object has memory associated with it that isn't managed by Qt Script itself. Reporting the additional cost makes it more likely that the garbage collector will be triggered.</p>
<p>Note that if the additional memory is shared with objects outside the scripting environment, the cost should not be reported, since collecting the Qt Script object would not cause the memory to be freed anyway.</p>
<p>Negative <i translate="no">size</i> values are ignored, i.e. this function can't be used to report that the additional memory has been deallocated.</p>
<p>This function was introduced in Qt 4.7.</p>
<p><b>See also </b><a href="./qscriptengine.htm#collectGarbage" translate="no">collectGarbage</a>().</p>
<!-- @@@reportAdditionalMemoryCost -->
<!-- $$$scriptValueFromQMetaObject[overload1]$$$scriptValueFromQMetaObject -->
<h3 class="fn" id="scriptValueFromQMetaObject" translate="no"><a name="scriptValueFromQMetaObject"></a>template &lt;typename T&gt; <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">scriptValueFromQMetaObject</span>()<a class="plink" href="#scriptValueFromQMetaObject" title="Direct link to this headline"></a></h3>
<p>Creates a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> that represents the Qt class <code translate="no">T</code>.</p>
<p>This function is used in combination with one of the <a href="./qscriptengine.htm#Q_SCRIPT_DECLARE_QMETAOBJECT" translate="no">Q_SCRIPT_DECLARE_QMETAOBJECT</a>() macro. Example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">Q_SCRIPT_DECLARE_QMETAOBJECT(<span class="type"><a href="./qlineedit.htm" translate="no">QLineEdit</a></span><span class="operator">,</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span><span class="operator">*</span>)

<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>

<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> lineEditClass <span class="operator">=</span> engine<span class="operator">.</span>scriptValueFromQMetaObject<span class="operator">&lt;</span><span class="type"><a href="./qlineedit.htm" translate="no">QLineEdit</a></span><span class="operator">&gt;</span>();
engine<span class="operator">.</span>globalObject()<span class="operator">.</span>setProperty(<span class="string">"QLineEdit"</span><span class="operator">,</span> lineEditClass);</pre></div>
<p><b>See also </b><a href="./qscriptengine.htm#newQMetaObject" translate="no">QScriptEngine::newQMetaObject</a>().</p>
<!-- @@@scriptValueFromQMetaObject -->
<!-- $$$setAgent[overload1]$$$setAgentQScriptEngineAgent* -->
<h3 class="fn" id="setAgent" translate="no"><a name="setAgent"></a><span class="type">void</span> QScriptEngine::<span class="name">setAgent</span>(<span class="type"><a href="./qscriptengineagent.htm" translate="no">QScriptEngineAgent</a></span> *<i>agent</i>)<a class="plink" href="#setAgent" title="Direct link to this headline"></a></h3>
<p>Installs the given <i translate="no">agent</i> on this engine. The agent will be notified of various events pertaining to script execution. This is useful when you want to find out exactly what the engine is doing, e.g. when <a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>() is called. The agent interface is the basis of tools like debuggers and profilers.</p>
<p>The engine maintains ownership of the <i translate="no">agent</i>.</p>
<p>Calling this function will replace the existing agent, if any.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#agent" translate="no">agent</a>().</p>
<!-- @@@setAgent -->
<!-- $$$setDefaultPrototype[overload1]$$$setDefaultPrototypeintconstQScriptValue& -->
<h3 class="fn" id="setDefaultPrototype" translate="no"><a name="setDefaultPrototype"></a><span class="type">void</span> QScriptEngine::<span class="name">setDefaultPrototype</span>(<span class="type">int</span> <i>metaTypeId</i>, const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>prototype</i>)<a class="plink" href="#setDefaultPrototype" title="Direct link to this headline"></a></h3>
<p>Sets the default prototype of the C++ type identified by the given <i translate="no">metaTypeId</i> to <i translate="no">prototype</i>.</p>
<p>The default prototype provides a script interface for values of type <i translate="no">metaTypeId</i> when a value of that type is accessed from script code. Whenever the script engine (implicitly or explicitly) creates a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> from a value of type <i translate="no">metaTypeId</i>, the default prototype will be set as the <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>'s prototype.</p>
<p>The <i translate="no">prototype</i> object itself may be constructed using one of two principal techniques; the simplest is to subclass <a href="./qscriptable.htm" translate="no">QScriptable</a>, which enables you to define the scripting API of the type through <a href="./qobject.htm" translate="no">QObject</a> properties and slots. Another possibility is to create a script object by calling <a href="./qscriptengine.htm#newObject" translate="no">newObject</a>(), and populate the object with the desired properties (e.g. native functions wrapped with <a href="./qscriptengine.htm#newFunction" translate="no">newFunction</a>()).</p>
<p><b>See also </b><a href="./qscriptengine.htm#defaultPrototype" translate="no">defaultPrototype</a>(), <a href="./qscriptengine.htm#qScriptRegisterMetaType" translate="no">qScriptRegisterMetaType</a>(), <a href="./qscriptable.htm" translate="no">QScriptable</a>, and <a href="./qtscript-script-defaultprototypes-example.htm" translate="no">Default Prototypes Example</a>.</p>
<!-- @@@setDefaultPrototype -->
<!-- $$$setGlobalObject[overload1]$$$setGlobalObjectconstQScriptValue& -->
<h3 class="fn" id="setGlobalObject" translate="no"><a name="setGlobalObject"></a><span class="type">void</span> QScriptEngine::<span class="name">setGlobalObject</span>(const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>object</i>)<a class="plink" href="#setGlobalObject" title="Direct link to this headline"></a></h3>
<p>Sets this engine's Global Object to be the given <i translate="no">object</i>. If <i translate="no">object</i> is not a valid script object, this function does nothing.</p>
<p>When setting a custom global object, you may want to use <a href="./qscriptvalueiterator.htm" translate="no">QScriptValueIterator</a> to copy the properties of the standard Global Object; alternatively, you can set the internal prototype of your custom object to be the original Global Object.</p>
<p>This function was introduced in Qt 4.5.</p>
<p><b>See also </b><a href="./qscriptengine.htm#globalObject" translate="no">globalObject</a>().</p>
<!-- @@@setGlobalObject -->
<!-- $$$setProcessEventsInterval[overload1]$$$setProcessEventsIntervalint -->
<h3 class="fn" id="setProcessEventsInterval" translate="no"><a name="setProcessEventsInterval"></a><span class="type">void</span> QScriptEngine::<span class="name">setProcessEventsInterval</span>(<span class="type">int</span> <i>interval</i>)<a class="plink" href="#setProcessEventsInterval" title="Direct link to this headline"></a></h3>
<p>Sets the interval between calls to <a href="./qcoreapplication.htm#processEvents" translate="no">QCoreApplication::processEvents</a> to <i translate="no">interval</i> milliseconds.</p>
<p>While the interpreter is running, all event processing is by default blocked. This means for instance that the gui will not be updated and timers will not be fired. To allow event processing during interpreter execution one can specify the processing interval to be a positive value, indicating the number of milliseconds between each time <a href="./qcoreapplication.htm#processEvents" translate="no">QCoreApplication::processEvents</a>() is called.</p>
<p>The default value is -1, which disables event processing during interpreter execution.</p>
<p>You can use <a href="./qcoreapplication.htm#postEvent" translate="no">QCoreApplication::postEvent</a>() to post an event that performs custom processing at the next interval. For example, you could keep track of the total running time of the script and call <a href="./qscriptengine.htm#abortEvaluation" translate="no">abortEvaluation</a>() when you detect that the script has been running for a long time without completing.</p>
<p><b>See also </b><a href="./qscriptengine.htm#processEventsInterval" translate="no">processEventsInterval</a>().</p>
<!-- @@@setProcessEventsInterval -->
<!-- $$$toObject[overload1]$$$toObjectconstQScriptValue& -->
<h3 class="fn" id="toObject" translate="no"><a name="toObject"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">toObject</span>(const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>value</i>)<a class="plink" href="#toObject" title="Direct link to this headline"></a></h3>
<p>Converts the given <i translate="no">value</i> to an object, if such a conversion is possible; otherwise returns an invalid <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>. The conversion is performed according to the following table:</p>
<div class="table"><table class="generic">
<thead><tr class="qt-style"><th>Input Type</th><th>Result</th></tr></thead>
<tbody><tr class="odd" valign="top"><td>Undefined</td><td>An invalid <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>.</td></tr>
<tr class="even" valign="top"><td>Null</td><td>An invalid <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>.</td></tr>
<tr class="odd" valign="top"><td>Boolean</td><td>A new Boolean object whose internal value is set to the value of the boolean.</td></tr>
<tr class="even" valign="top"><td>Number</td><td>A new Number object whose internal value is set to the value of the number.</td></tr>
<tr class="odd" valign="top"><td>String</td><td>A new String object whose internal value is set to the value of the string.</td></tr>
<tr class="even" valign="top"><td>Object</td><td>The result is the object itself (no conversion).</td></tr>
</tbody></table></div>
<p>This function was introduced in Qt 4.5.</p>
<p><b>See also </b><a href="./qscriptengine.htm#newObject" translate="no">newObject</a>().</p>
<!-- @@@toObject -->
<!-- $$$toScriptValue[overload1]$$$toScriptValueconstT& -->
<h3 class="fn" id="toScriptValue" translate="no"><a name="toScriptValue"></a>template &lt;typename T&gt; <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">toScriptValue</span>(const <span class="type">T</span> &amp;<i>value</i>)<a class="plink" href="#toScriptValue" title="Direct link to this headline"></a></h3>
<p>Creates a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> with the given <i translate="no">value</i>.</p>
<p>Note that the template type <code translate="no">T</code> must be known to <a href="./qmetatype.htm" translate="no">QMetaType</a>.</p>
<p>See <a href="./qtscript-index.htm#conversion-between-qt-script-and-c-types" translate="no">Conversion Between Qt Script and C++ Types</a> for a description of the built-in type conversion provided by Qt Script. By default, the types that are not specially handled by Qt Script are represented as QVariants (e.g. the <i translate="no">value</i> is passed to <a href="./qscriptengine.htm#newVariant" translate="no">newVariant</a>()); you can change this behavior by installing your own type conversion functions with <a href="./qscriptengine.htm#qScriptRegisterMetaType" translate="no">qScriptRegisterMetaType</a>().</p>
<p><b>See also </b><a href="./qscriptengine.htm#fromScriptValue" translate="no">fromScriptValue</a>() and <a href="./qscriptengine.htm#qScriptRegisterMetaType" translate="no">qScriptRegisterMetaType</a>().</p>
<!-- @@@toScriptValue -->
<!-- $$$toStringHandle[overload1]$$$toStringHandleconstQString& -->
<h3 class="fn" id="toStringHandle" translate="no"><a name="toStringHandle"></a><span class="type"><a href="./qscriptstring.htm" translate="no">QScriptString</a></span> QScriptEngine::<span class="name">toStringHandle</span>(const <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> &amp;<i>str</i>)<a class="plink" href="#toStringHandle" title="Direct link to this headline"></a></h3>
<p>Returns a handle that represents the given string, <i translate="no">str</i>.</p>
<p><a href="./qscriptstring.htm" translate="no">QScriptString</a> can be used to quickly look up properties, and compare property names, of script objects.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptvalue.htm#property" translate="no">QScriptValue::property</a>().</p>
<!-- @@@toStringHandle -->
<!-- $$$uncaughtException[overload1]$$$uncaughtException -->
<h3 class="fn" id="uncaughtException" translate="no"><a name="uncaughtException"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">uncaughtException</span>() const<a class="plink" href="#uncaughtException" title="Direct link to this headline"></a></h3>
<p>Returns the current uncaught exception, or an invalid <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> if there is no uncaught exception.</p>
<p>The exception value is typically an <code translate="no">Error</code> object; in that case, you can call toString() on the return value to obtain an error message.</p>
<p><b>See also </b><a href="./qscriptengine.htm#hasUncaughtException" translate="no">hasUncaughtException</a>() and <a href="./qscriptengine.htm#uncaughtExceptionLineNumber" translate="no">uncaughtExceptionLineNumber</a>().</p>
<!-- @@@uncaughtException -->
<!-- $$$uncaughtExceptionBacktrace[overload1]$$$uncaughtExceptionBacktrace -->
<h3 class="fn" id="uncaughtExceptionBacktrace" translate="no"><a name="uncaughtExceptionBacktrace"></a><span class="type"><a href="./qstringlist.htm" translate="no">QStringList</a></span> QScriptEngine::<span class="name">uncaughtExceptionBacktrace</span>() const<a class="plink" href="#uncaughtExceptionBacktrace" title="Direct link to this headline"></a></h3>
<p>Returns a human-readable backtrace of the last uncaught exception.</p>
<p>It is in the form <code translate="no">&lt;function-name&gt;() at &lt;file-name&gt;:&lt;line-number&gt;</code>.</p>
<p><b>See also </b><a href="./qscriptengine.htm#uncaughtException" translate="no">uncaughtException</a>().</p>
<!-- @@@uncaughtExceptionBacktrace -->
<!-- $$$uncaughtExceptionLineNumber[overload1]$$$uncaughtExceptionLineNumber -->
<h3 class="fn" id="uncaughtExceptionLineNumber" translate="no"><a name="uncaughtExceptionLineNumber"></a><span class="type">int</span> QScriptEngine::<span class="name">uncaughtExceptionLineNumber</span>() const<a class="plink" href="#uncaughtExceptionLineNumber" title="Direct link to this headline"></a></h3>
<p>Returns the line number where the last uncaught exception occurred.</p>
<p>Line numbers are 1-based, unless a different base was specified as the second argument to <a href="./qscriptengine.htm#evaluate" translate="no">evaluate</a>().</p>
<p><b>See also </b><a href="./qscriptengine.htm#hasUncaughtException" translate="no">hasUncaughtException</a>().</p>
<!-- @@@uncaughtExceptionLineNumber -->
<!-- $$$undefinedValue[overload1]$$$undefinedValue -->
<h3 class="fn" id="undefinedValue" translate="no"><a name="undefinedValue"></a><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> QScriptEngine::<span class="name">undefinedValue</span>()<a class="plink" href="#undefinedValue" title="Direct link to this headline"></a></h3>
<p>Returns a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> of the primitive type Undefined.</p>
<p><b>See also </b><a href="./qscriptengine.htm#nullValue" translate="no">nullValue</a>().</p>
<!-- @@@undefinedValue -->
</div>
<div class="relnonmem">
<h2>Related Non-Members</h2>
<!-- $$$qScriptConnect[overload1]$$$qScriptConnectQObject*constchar*constQScriptValue&constQScriptValue& -->
<h3 class="fn" id="qScriptConnect" translate="no"><a name="qScriptConnect"></a><span class="type">bool</span> <span class="name">qScriptConnect</span>(<span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span> *<i>sender</i>, const <span class="type">char</span> *<i>signal</i>, const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>receiver</i>, const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>function</i>)<a class="plink" href="#qScriptConnect" title="Direct link to this headline"></a></h3>
<p>Creates a connection from the <i translate="no">signal</i> in the <i translate="no">sender</i> to the given <i translate="no">function</i>. If <i translate="no">receiver</i> is an object, it will act as the `this' object when the signal handler function is invoked. Returns true if the connection succeeds; otherwise returns false.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#qScriptDisconnect" translate="no">qScriptDisconnect</a>() and <a href="./qscriptengine.htm#signalHandlerException" translate="no">QScriptEngine::signalHandlerException</a>().</p>
<!-- @@@qScriptConnect -->
<!-- $$$qScriptDisconnect[overload1]$$$qScriptDisconnectQObject*constchar*constQScriptValue&constQScriptValue& -->
<h3 class="fn" id="qScriptDisconnect" translate="no"><a name="qScriptDisconnect"></a><span class="type">bool</span> <span class="name">qScriptDisconnect</span>(<span class="type"><a href="./qobject.htm#QObject" translate="no">QObject</a></span> *<i>sender</i>, const <span class="type">char</span> *<i>signal</i>, const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>receiver</i>, const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>function</i>)<a class="plink" href="#qScriptDisconnect" title="Direct link to this headline"></a></h3>
<p>Disconnects the <i translate="no">signal</i> in the <i translate="no">sender</i> from the given (<i translate="no">receiver</i>, <i translate="no">function</i>) pair. Returns true if the connection is successfully broken; otherwise returns false.</p>
<p>This function was introduced in Qt 4.4.</p>
<p><b>See also </b><a href="./qscriptengine.htm#qScriptConnect" translate="no">qScriptConnect</a>().</p>
<!-- @@@qScriptDisconnect -->
<!-- $$$qScriptRegisterMetaType[overload1]$$$qScriptRegisterMetaTypeQScriptEngine*QScriptValue(*)(QScriptEngine*,constT&)void(*)(constQScriptValue&,T&)constQScriptValue&T* -->
<h3 class="fn" id="qScriptRegisterMetaType" translate="no"><a name="qScriptRegisterMetaType"></a>template &lt;typename T&gt; <span class="type">int</span> <span class="name">qScriptRegisterMetaType</span>(<span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> *<i>eng</i>, <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> (*)(<span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> *, const <span class="type">T</span> &amp;) <i>toScriptValue</i>, <span class="type">void</span> (*)(const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;, <span class="type">T</span> &amp;) <i>fromScriptValue</i>, const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>prototype</i> = QScriptValue(), <i>T *</i> = 0)<a class="plink" href="#qScriptRegisterMetaType" title="Direct link to this headline"></a></h3>
<p>Registers the type <code translate="no">T</code> in the given <i translate="no">eng</i>. <i translate="no">toScriptValue</i> must be a function that will convert from a value of type <code translate="no">T</code> to a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>, and <i translate="no">fromScriptValue</i> a function that does the opposite. <i translate="no">prototype</i>, if valid, is the prototype that's set on QScriptValues returned by <i translate="no">toScriptValue</i>.</p>
<p>Returns the internal ID used by <a href="./qmetatype.htm" translate="no">QMetaType</a>.</p>
<p>You only need to call this function if you want to provide custom conversion of values of type <code translate="no">T</code>, i.e. if the default <a href="./qvariant.htm" translate="no">QVariant</a>-based representation and conversion is not appropriate. (Note that custom <a href="./qobject.htm" translate="no">QObject</a>-derived types also fall in this category; e.g. for a <a href="./qobject.htm" translate="no">QObject</a>-derived class called MyObject, you probably want to define conversion functions for MyObject* that utilize <a href="./qscriptengine.htm#newQObject" translate="no">QScriptEngine::newQObject</a>() and <a href="./qscriptvalue.htm#toQObject" translate="no">QScriptValue::toQObject</a>().)</p>
<p>If you only want to define a common script interface for values of type <code translate="no">T</code>, and don't care how those values are represented (i.e. storing them in QVariants is fine), use <a href="./qscriptengine.htm#setDefaultPrototype" translate="no">setDefaultPrototype</a>() instead; this will minimize conversion costs.</p>
<p>You need to declare the custom type first with <a href="./qmetatype.htm#Q_DECLARE_METATYPE" translate="no">Q_DECLARE_METATYPE</a>().</p>
<p>After a type has been registered, you can convert from a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> to that type using <a href="./qscriptengine.htm#fromScriptValue" translate="no">fromScriptValue</a>(), and create a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> from a value of that type using <a href="./qscriptengine.htm#toScriptValue" translate="no">toScriptValue</a>(). The engine will take care of calling the proper conversion function when calling C++ slots, and when getting or setting a C++ property; i.e. the custom type may be used seamlessly on both the C++ side and the script side.</p>
<p>The following is an example of how to use this function. We will specify custom conversion of our type <code translate="no">MyStruct</code>. Here's the C++ type:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">struct</span> MyStruct {
    <span class="type">int</span> x;
    <span class="type">int</span> y;
};</pre></div>
<p>We must declare it so that the type will be known to <a href="./qmetatype.htm" translate="no">QMetaType</a>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">Q_DECLARE_METATYPE(MyStruct)</pre></div>
<p>Next, the <code translate="no">MyStruct</code> conversion functions. We represent the <code translate="no">MyStruct</code> value as a script object and just copy the properties:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> toScriptValue(<span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> <span class="operator">*</span>engine<span class="operator">,</span> <span class="keyword">const</span> MyStruct <span class="operator">&amp;</span>s)
{
  <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> obj <span class="operator">=</span> engine<span class="operator">-</span><span class="operator">&gt;</span>newObject();
  obj<span class="operator">.</span>setProperty(<span class="string">"x"</span><span class="operator">,</span> s<span class="operator">.</span>x);
  obj<span class="operator">.</span>setProperty(<span class="string">"y"</span><span class="operator">,</span> s<span class="operator">.</span>y);
  <span class="keyword">return</span> obj;
}

<span class="type">void</span> fromScriptValue(<span class="keyword">const</span> <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> <span class="operator">&amp;</span>obj<span class="operator">,</span> MyStruct <span class="operator">&amp;</span>s)
{
  s<span class="operator">.</span>x <span class="operator">=</span> obj<span class="operator">.</span>property(<span class="string">"x"</span>)<span class="operator">.</span>toInt32();
  s<span class="operator">.</span>y <span class="operator">=</span> obj<span class="operator">.</span>property(<span class="string">"y"</span>)<span class="operator">.</span>toInt32();
}</pre></div>
<p>Now we can register <code translate="no">MyStruct</code> with the engine:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">qScriptRegisterMetaType(engine<span class="operator">,</span> toScriptValue<span class="operator">,</span> fromScriptValue);</pre></div>
<p>Working with <code translate="no">MyStruct</code> values is now easy:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">MyStruct s <span class="operator">=</span> qscriptvalue_cast<span class="operator">&lt;</span>MyStruct<span class="operator">&gt;</span>(context<span class="operator">-</span><span class="operator">&gt;</span>argument(<span class="number">0</span>));
<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
MyStruct s2;
s2<span class="operator">.</span>x <span class="operator">=</span> s<span class="operator">.</span>x <span class="operator">+</span> <span class="number">10</span>;
s2<span class="operator">.</span>y <span class="operator">=</span> s<span class="operator">.</span>y <span class="operator">+</span> <span class="number">20</span>;
<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> v <span class="operator">=</span> engine<span class="operator">-</span><span class="operator">&gt;</span>toScriptValue(s2);</pre></div>
<p>If you want to be able to construct values of your custom type from script code, you have to register a constructor function for the type. For example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> createMyStruct(<span class="type"><a href="./qscriptcontext.htm" translate="no">QScriptContext</a></span> <span class="operator">*</span><span class="operator">,</span> <span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> <span class="operator">*</span>engine)
{
    MyStruct s;
    s<span class="operator">.</span>x <span class="operator">=</span> <span class="number">123</span>;
    s<span class="operator">.</span>y <span class="operator">=</span> <span class="number">456</span>;
    <span class="keyword">return</span> engine<span class="operator">-</span><span class="operator">&gt;</span>toScriptValue(s);
}
<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> ctor <span class="operator">=</span> engine<span class="operator">.</span>newFunction(createMyStruct);
engine<span class="operator">.</span>globalObject()<span class="operator">.</span>setProperty(<span class="string">"MyStruct"</span><span class="operator">,</span> ctor);</pre></div>
<p><b>See also </b><a href="./qscriptengine.htm#qScriptRegisterSequenceMetaType" translate="no">qScriptRegisterSequenceMetaType</a>() and <a href="./qmetatype.htm#qRegisterMetaType-1" translate="no">qRegisterMetaType</a>().</p>
<!-- @@@qScriptRegisterMetaType -->
<!-- $$$qScriptRegisterSequenceMetaType[overload1]$$$qScriptRegisterSequenceMetaTypeQScriptEngine*constQScriptValue&T* -->
<h3 class="fn" id="qScriptRegisterSequenceMetaType" translate="no"><a name="qScriptRegisterSequenceMetaType"></a>template &lt;typename T&gt; <span class="type">int</span> <span class="name">qScriptRegisterSequenceMetaType</span>(<span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> *<i>engine</i>, const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>prototype</i> = QScriptValue(), <i>T *</i> = 0)<a class="plink" href="#qScriptRegisterSequenceMetaType" title="Direct link to this headline"></a></h3>
<p>Registers the sequence type <code translate="no">T</code> in the given <i translate="no">engine</i>. This function provides conversion functions that convert between <code translate="no">T</code> and Qt Script <code translate="no">Array</code> objects. <code translate="no">T</code> must provide a const_iterator class and begin(), end() and push_back() functions. If <i translate="no">prototype</i> is valid, it will be set as the prototype of <code translate="no">Array</code> objects due to conversion from <code translate="no">T</code>; otherwise, the standard <code translate="no">Array</code> prototype will be used.</p>
<p>Returns the internal ID used by <a href="./qmetatype.htm" translate="no">QMetaType</a>.</p>
<p>You need to declare the container type first with <a href="./qmetatype.htm#Q_DECLARE_METATYPE" translate="no">Q_DECLARE_METATYPE</a>(). If the element type isn't a standard Qt/C++ type, it must be declared using <a href="./qmetatype.htm#Q_DECLARE_METATYPE" translate="no">Q_DECLARE_METATYPE</a>() as well. Example:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">Q_DECLARE_METATYPE(<span class="type"><a href="./qvector.htm" translate="no">QVector</a></span><span class="operator">&lt;</span><span class="type">int</span><span class="operator">&gt;</span>)

<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>

qScriptRegisterSequenceMetaType<span class="operator">&lt;</span><span class="type"><a href="./qvector.htm" translate="no">QVector</a></span><span class="operator">&lt;</span><span class="type">int</span><span class="operator">&gt;</span> <span class="operator">&gt;</span>(engine);
<span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
<span class="type"><a href="./qvector.htm" translate="no">QVector</a></span><span class="operator">&lt;</span><span class="type">int</span><span class="operator">&gt;</span> v <span class="operator">=</span> qscriptvalue_cast<span class="operator">&lt;</span><span class="type"><a href="./qvector.htm" translate="no">QVector</a></span><span class="operator">&lt;</span><span class="type">int</span><span class="operator">&gt;</span> <span class="operator">&gt;</span>(engine<span class="operator">-</span><span class="operator">&gt;</span>evaluate(<span class="string">"[5, 1, 3, 2]"</span>));
std<span class="operator">::</span>sort(v<span class="operator">.</span>begin()<span class="operator">,</span> v<span class="operator">.</span>end());
<span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> a <span class="operator">=</span> engine<span class="operator">-</span><span class="operator">&gt;</span>toScriptValue(v);
<a href="./qtglobal.htm#qDebug" translate="no">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> a<span class="operator">.</span>toString(); <span class="comment">// outputs "[1, 2, 3, 5]"</span></pre></div>
<p><b>See also </b><a href="./qscriptengine.htm#qScriptRegisterMetaType" translate="no">qScriptRegisterMetaType</a>().</p>
<!-- @@@qScriptRegisterSequenceMetaType -->
<!-- $$$qScriptValueFromSequence[overload1]$$$qScriptValueFromSequenceQScriptEngine*constContainer& -->
<h3 class="fn" id="qScriptValueFromSequence" translate="no"><a name="qScriptValueFromSequence"></a>template &lt;typename Container&gt; <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> <span class="name">qScriptValueFromSequence</span>(<span class="type"><a href="./qscriptengine.htm#QScriptEngine" translate="no">QScriptEngine</a></span> *<i>engine</i>, const <span class="type">Container</span> &amp;<i>container</i>)<a class="plink" href="#qScriptValueFromSequence" title="Direct link to this headline"></a></h3>
<p>Creates an array in the form of a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a> using the given <i translate="no">engine</i> with the given <i translate="no">container</i> of template type <code translate="no">Container</code>.</p>
<p>The <code translate="no">Container</code> type must provide a <code translate="no">const_iterator</code> class to enable the contents of the container to be copied into the array.</p>
<p>Additionally, the type of each element in the sequence should be suitable for conversion to a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>. See <a href="./qtscript-index.htm#conversion-between-qt-script-and-c-types" translate="no">Conversion Between Qt Script and C++ Types</a> for more information about the restrictions on types that can be used with <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>.</p>
<p>This function was introduced in Qt 4.3.</p>
<p><b>See also </b><a href="./qscriptengine.htm#fromScriptValue" translate="no">QScriptEngine::fromScriptValue</a>().</p>
<!-- @@@qScriptValueFromSequence -->
<!-- $$$qScriptValueToSequence[overload1]$$$qScriptValueToSequenceconstQScriptValue&Container& -->
<h3 class="fn" id="qScriptValueToSequence" translate="no"><a name="qScriptValueToSequence"></a>template &lt;typename Container&gt; <span class="type">void</span> <span class="name">qScriptValueToSequence</span>(const <span class="type"><a href="./qscriptvalue.htm" translate="no">QScriptValue</a></span> &amp;<i>value</i>, <span class="type">Container</span> &amp;<i>container</i>)<a class="plink" href="#qScriptValueToSequence" title="Direct link to this headline"></a></h3>
<p>Copies the elements in the sequence specified by <i translate="no">value</i> to the given <i translate="no">container</i> of template type <code translate="no">Container</code>.</p>
<p>The <i translate="no">value</i> used is typically an array, but any container can be copied as long as it provides a <code translate="no">length</code> property describing how many elements it contains.</p>
<p>Additionally, the type of each element in the sequence must be suitable for conversion to a C++ type from a <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>. See <a href="./qtscript-index.htm#conversion-between-qt-script-and-c-types" translate="no">Conversion Between Qt Script and C++ Types</a> for more information about the restrictions on types that can be used with <a href="./qscriptvalue.htm" translate="no">QScriptValue</a>.</p>
<p>This function was introduced in Qt 4.3.</p>
<p><b>See also </b><a href="./qscriptvalue.htm#qscriptvalue_cast" translate="no">qscriptvalue_cast</a>().</p>
<!-- @@@qScriptValueToSequence -->
</div>
<div class="macros">
<h2>Macro Documentation</h2>
<!-- $$$Q_SCRIPT_DECLARE_QMETAOBJECT[overload1]$$$Q_SCRIPT_DECLARE_QMETAOBJECT -->
<h3 class="fn" id="Q_SCRIPT_DECLARE_QMETAOBJECT" translate="no"><a name="Q_SCRIPT_DECLARE_QMETAOBJECT"></a><span class="name">Q_SCRIPT_DECLARE_QMETAOBJECT</span>(<i>QMetaObject</i>, <i>ArgType</i>)<a class="plink" href="#Q_SCRIPT_DECLARE_QMETAOBJECT" title="Direct link to this headline"></a></h3>
<p>Declares the given <i translate="no">QMetaObject</i>. Used in combination with <a href="./qscriptengine.htm#scriptValueFromQMetaObject" translate="no">QScriptEngine::scriptValueFromQMetaObject</a>() to make enums and instantiation of <i translate="no">QMetaObject</i> available to script code. The constructor generated by this macro takes a single argument of type <i translate="no">ArgType</i>; typically the argument is the parent type of the new instance, in which case <i translate="no">ArgType</i> is <code translate="no">QWidget*</code> or <code translate="no">QObject*</code>. Objects created by the constructor will have <a href="./qscriptengine.htm#ValueOwnership-enum" translate="no">QScriptEngine::AutoOwnership</a> ownership.</p>
<p>This function was introduced in Qt 4.3.</p>
<!-- @@@Q_SCRIPT_DECLARE_QMETAOBJECT -->
</div>
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>