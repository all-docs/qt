<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QMacCocoaViewContainer | Qt Widgets</title>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtwidgets-index.htm" translate="no">Qt Widgets</a></li>
                            <li><a href="./qtwidgets-module.htm" translate="no">C++ Classes</a></li>
                            <li><a>QMacCocoaViewContainer</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title" translate="no">QMacCocoaViewContainer Class</h1>
<!-- $$$QMacCocoaViewContainer-brief -->
<p>The QMacCocoaViewContainer class provides a widget for macOS that can be used to wrap arbitrary Cocoa views (i.e., NSView subclasses) and insert them into Qt hierarchies. <a href="#details">More...</a></p>
<!-- @@@QMacCocoaViewContainer -->
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign"> <span class="preprocessor">#include &lt;QMacCocoaViewContainer&gt;</span>
</td></tr><tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> QT += widgets</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 4.5</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <a href="./qwidget.htm" translate="no">QWidget</a></td></tr></tbody></table></div><p><b>This class is obsolete.</b> It is provided to keep old source code working. We strongly advise against using it in new code.</p>
<p>This class was introduced in Qt 4.5.</p>
<ul>
<li><a href="./qmaccocoaviewcontainer-members.htm">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h2 id="public-functions">Public Functions<a class="plink" href="#public-functions" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="./qmaccocoaviewcontainer.htm#QMacCocoaViewContainer" translate="no">QMacCocoaViewContainer</a></b>(NSView *<i>view</i>, QWidget *<i>parent</i> = nullptr)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual </td><td class="memItemRight bottomAlign"><b><a href="./qmaccocoaviewcontainer.htm#dtor.QMacCocoaViewContainer" translate="no">~QMacCocoaViewContainer</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> NSView *</td><td class="memItemRight bottomAlign"><b><a href="./qmaccocoaviewcontainer.htm#cocoaView" translate="no">cocoaView</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="./qmaccocoaviewcontainer.htm#setCocoaView" translate="no">setCocoaView</a></b>(NSView *<i>view</i>)</td></tr>
</tbody></table></div>
<a name="details"></a>
<!-- $$$QMacCocoaViewContainer-description -->
<div class="descr">
<h2 id="details">Detailed Description<a class="plink" href="#details" title="Direct link to this headline"></a></h2>
<p>Use <a href="./qwidget.htm#createWindowContainer" translate="no">QWidget::createWindowContainer</a>() and <a href="./qwindow.htm#fromWinId" translate="no">QWindow::fromWinId</a>() instead.</p>
<p>While Qt offers a lot of classes for writing your application, Apple's Cocoa frameworks offer functionality that is not currently available (or may never end up) in Qt. Using QMacCocoaViewContainer, it is possible to take an arbitrary NSView-derived class from Cocoa and put it in a Qt widgets hierarchy. Depending on the level of integration you need, you can use QMacCocoaViewContainer directly or subclass it to wrap more functionality of the underlying NSView.</p>
<p>It should be also noted that, at the Cocoa level, there is a difference between top-level windows and views (widgets that are inside a window). For this reason, make sure that the NSView that you are wrapping doesn't end up as a top-level window. The best way to ensure this is to make sure QMacCocoaViewContainer's parent widget is not null.</p>
<p>If you are using QMacCocoaViewContainer as a subclass and are accessing Cocoa API, it is probably simpler to have your file end with <code translate="no">.mm</code> instead of <code translate="no">.cpp</code>. Most Apple tools will correctly identify the source as Objective-C++.</p>
<p>QMacCocoaViewContainer requires knowledge of how Cocoa works, especially in regard to its reference counting (retain/release) nature. It is noted in the functions below if there is any change in the reference count. Cocoa views often generate temporary objects that are released by an autorelease pool. If this is done outside of a running event loop, it is up to the developer to provide the autorelease pool.</p>
<p>The following is a snippet showing how to subclass QMacCocoaViewContainer to wrap an NSSearchField.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">SearchWidget<span class="operator">::</span>SearchWidget(<span class="type"><a href="./qwidget.htm#QWidget" translate="no">QWidget</a></span> <span class="operator">*</span>parent)
: <span class="type"><a href="./qmaccocoaviewcontainer.htm#QMacCocoaViewContainer" translate="no">QMacCocoaViewContainer</a></span>(<span class="number">0</span><span class="operator">,</span> parent)
{
    <span class="comment">// Many Cocoa objects create temporary autorelease objects,</span>
    <span class="comment">// so create a pool to catch them.</span>
    NSAutoreleasePool <span class="operator">*</span>pool <span class="operator">=</span> <span class="operator">[</span><span class="operator">[</span>NSAutoreleasePool alloc<span class="operator">]</span> init<span class="operator">]</span>;

    <span class="comment">// Create the NSSearchField, set it on the QCocoaViewContainer.</span>
    NSSearchField <span class="operator">*</span>search <span class="operator">=</span> <span class="operator">[</span><span class="operator">[</span>NSSearchField alloc<span class="operator">]</span> init<span class="operator">]</span>;
    setCocoaView(search);

    <span class="comment">// Use a Qt menu for the search field menu.</span>
    <span class="type"><a href="./qmenu.htm" translate="no">QMenu</a></span> <span class="operator">*</span>qtMenu <span class="operator">=</span> createMenu(<span class="keyword">this</span>);
    NSMenu <span class="operator">*</span>nsMenu <span class="operator">=</span> qtMenu<span class="operator">-</span><span class="operator">&gt;</span>macMenu(<span class="number">0</span>);
    <span class="operator">[</span><span class="operator">[</span>search cell<span class="operator">]</span> setSearchMenuTemplate:nsMenu<span class="operator">]</span>;

    <span class="comment">// Release our reference, since our super class takes ownership and we</span>
    <span class="comment">// don't need it anymore.</span>
    <span class="operator">[</span>search release<span class="operator">]</span>;

    <span class="comment">// Clean up our pool as we no longer need it.</span>
    <span class="operator">[</span>pool release<span class="operator">]</span>;
}</pre></div>
</div>
<!-- @@@QMacCocoaViewContainer -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QMacCocoaViewContainer[overload1]$$$QMacCocoaViewContainerNSView*QWidget* -->
<h3 class="fn" id="QMacCocoaViewContainer" translate="no"><a name="QMacCocoaViewContainer"></a>QMacCocoaViewContainer::<span class="name">QMacCocoaViewContainer</span>(<span class="type">NSView</span> *<i>view</i>, <span class="type"><a href="./qwidget.htm#QWidget" translate="no">QWidget</a></span> *<i>parent</i> = nullptr)<a class="plink" href="#QMacCocoaViewContainer" title="Direct link to this headline"></a></h3>
<p>Create a new QMacCocoaViewContainer using the NSView pointer in the <i translate="no">view</i> with parent, <i translate="no">parent</i>. QMacCocoaViewContainer will retain the <i translate="no">view</i>.</p>
<!-- @@@QMacCocoaViewContainer -->
<!-- $$$~QMacCocoaViewContainer[overload1]$$$~QMacCocoaViewContainer -->
<h3 class="fn" id="dtor.QMacCocoaViewContainer" translate="no"><a name="dtor.QMacCocoaViewContainer"></a><code translate="no">[virtual] </code>QMacCocoaViewContainer::<span class="name">~QMacCocoaViewContainer</span>()<a class="plink" href="#dtor.QMacCocoaViewContainer" title="Direct link to this headline"></a></h3>
<p>Destroy the <a class="obsolete" href="./qmaccocoaviewcontainer.htm" translate="no">QMacCocoaViewContainer</a> and release the wrapped view.</p>
<!-- @@@~QMacCocoaViewContainer -->
<!-- $$$cocoaView[overload1]$$$cocoaView -->
<h3 class="fn" id="cocoaView" translate="no"><a name="cocoaView"></a><span class="type">NSView</span> *QMacCocoaViewContainer::<span class="name">cocoaView</span>() const<a class="plink" href="#cocoaView" title="Direct link to this headline"></a></h3>
<p>Returns the NSView that has been set on this container.</p>
<p><b>See also </b><a href="./qmaccocoaviewcontainer.htm#setCocoaView" translate="no">setCocoaView</a>().</p>
<!-- @@@cocoaView -->
<!-- $$$setCocoaView[overload1]$$$setCocoaViewNSView* -->
<h3 class="fn" id="setCocoaView" translate="no"><a name="setCocoaView"></a><span class="type">void</span> QMacCocoaViewContainer::<span class="name">setCocoaView</span>(<span class="type">NSView</span> *<i>view</i>)<a class="plink" href="#setCocoaView" title="Direct link to this headline"></a></h3>
<p>Sets <i translate="no">view</i> as the NSView to contain and retains it. If this container already had a view set, it will release the previously set view.</p>
<p><b>See also </b><a href="./qmaccocoaviewcontainer.htm#cocoaView" translate="no">cocoaView</a>().</p>
<!-- @@@setCocoaView -->
</div>
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>