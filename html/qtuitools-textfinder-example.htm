<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Text Finder Example | Qt UI Tools</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtuitools-textfinder-example.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtuitools-index.htm" translate="no">Qt UI Tools</a></li>
                            <li><a href="./examples-qtuitools.htm" translate="no">Qt UI Tools Examples</a></li>
                            <li><a>Text Finder Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">Text Finder Example</h1>
<span class="subtitle"></span>
<!-- $$$textfinder-brief -->
<p>Dynamically loading .ui files using <a href="./quiloader.htm" translate="no">QUiLoader</a>.</p>
<!-- @@@textfinder -->
<!-- $$$textfinder-description -->
<div class="descr"> <a name="details"></a>
<p>The TextFinder example shows how to load and setup a <code translate="no">.ui</code> file dynamically using the <a href="./quiloader.htm" translate="no">QUiLoader</a> class that is part of the <a href="./qtuitools-index.htm" translate="no">Qt UI Tools</a> library.</p>
<p>The program allows the user to look up a particular word within the contents of a text. The visual elements and layout of the user interface is loaded at runtime, from a the program resources.</p>
<div class="table"><table class="generic">
<tbody><tr class="odd" valign="top"><td><img alt="" src="./images/textfinder-example-find.png"></td><td><img alt="" src="./images/textfinder-example-find2.png"></td></tr>
</tbody></table></div>
<a name="setting-up-the-resource-file"></a>
<h4 id="setting-up-the-resource-file">Setting Up The Resource File<a class="plink" href="#setting-up-the-resource-file" title="Direct link to this headline"></a></h4>
<p>The resources required for the example are:</p>
<ul>
<li><code translate="no">textfinder.ui</code> - the user interface file created in <a href="./qtdesigner-manual.htm" translate="no">Qt Designer</a></li>
<li><code translate="no">input.txt</code> - a text file containing some text to be displayed in a <a href="./qtextedit.htm" translate="no">QTextEdit</a></li>
</ul>
<p><code translate="no">textfinder.ui</code> contains all the necessary <a href="./qwidget.htm" translate="no">QWidget</a> objects for the Text Finder. A <a href="./qlineedit.htm" translate="no">QLineEdit</a> is used for the user input, a <a href="./qtextedit.htm" translate="no">QTextEdit</a> is used to display the contents of <code translate="no">input.txt</code>, a <a href="./qlabel.htm" translate="no">QLabel</a> is used to display the text "Keyword", and a <a href="./qpushbutton.htm" translate="no">QPushButton</a> is used for the <b translate="no">Find</b> button. Note that all the widgets have sensible <code translate="no">objectName</code>'s assigned. These are used in code to identify them.</p>
<p>The screenshot below shows the preview obtained in <a href="./qtdesigner-manual.htm" translate="no">Qt Designer</a>.</p>
<p class="centerAlign"><img alt="" src="./images/textfinder-example-userinterface.png"></p><p>In this example, we store both resources in the applicaton's executable by including the <code translate="no">textfinder.qrc</code> file. Alternatively, the files could also be loaded at runtime from the file system, or from an external binary resource <code translate="no">.rcc</code> file. For more information on resource files, see <a href="./resources.htm" translate="no">The Qt Resource System</a>.</p>
<p>The <code translate="no">textfinder.qrc</code> file lists all files that should be included as a resource:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">&lt;!DOCTYPE RCC&gt;&lt;RCC version="1.0"&gt;
&lt;qresource&gt;
    &lt;file&gt;forms/textfinder.ui&lt;/file&gt;
    &lt;file&gt;forms/input.txt&lt;/file&gt;
&lt;/qresource&gt;
&lt;/RCC&gt;</pre></div>
<p>To generate a form at run-time, the example is linked against the <a href="./qtuitools-index.htm" translate="no">Qt Ui Tools</a> library. This is done in the <code translate="no">textfinder.pro</code> file:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">QT += widgets uitools

HEADERS = textfinder.h
SOURCES = textfinder.cpp main.cpp
RESOURCES = textfinder.qrc</pre></div>
<a name="textfinder-class-definition"></a>
<h4 id="textfinder-class-definition">TextFinder Class Definition<a class="plink" href="#textfinder-class-definition" title="Direct link to this headline"></a></h4>
<p>The <code translate="no">TextFinder</code> class contains the main user interface. It declares pointers to the <a href="./qpushbutton.htm" translate="no">QPushButton</a>, <a href="./qtextedit.htm" translate="no">QTextEdit</a> and <a href="./qlineedit.htm" translate="no">QLineEdit</a> elements described above. The <a href="./qlabel.htm" translate="no">QLabel</a> in the user interface is not declared here as we do not need to access it from code.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> TextFinder : <span class="keyword">public</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span>
{
    Q_OBJECT

<span class="keyword">public</span>:
    <span class="keyword">explicit</span> TextFinder(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);

<span class="keyword">private</span> <span class="keyword">slots</span>:
    <span class="type">void</span> on_findButton_clicked();

<span class="keyword">private</span>:
    <span class="type"><a href="./qpushbutton.htm" translate="no">QPushButton</a></span> <span class="operator">*</span>ui_findButton;
    <span class="type"><a href="./qtextedit.htm" translate="no">QTextEdit</a></span> <span class="operator">*</span>ui_textEdit;
    <span class="type"><a href="./qlineedit.htm" translate="no">QLineEdit</a></span> <span class="operator">*</span>ui_lineEdit;
};</pre></div>
<p>The slot <code translate="no">on_findButton_clicked()</code> is a slot named according to the Automatic Connection naming convention required by <code translate="no">uic</code>.</p>
<a name="loading-the-resources"></a>
<h4 id="loading-the-resources">Loading the Resources<a class="plink" href="#loading-the-resources" title="Direct link to this headline"></a></h4>
<p>We use <a href="./qfile.htm" translate="no">QFile</a> to load the data from the program resources at runtime. The code for this is in two method methods on top of <code translate="no">textfinder.cpp</code>: <code translate="no">loadUiFile</code> and <code translate="no">loadTextFile</code>.</p>
<p>The <code translate="no">loadUiFile</code> function loads the user interface file previously created in <a href="./qtdesigner-manual.htm" translate="no">Qt Designer</a>. First, the content of the <code translate="no">textfinder.ui</code> file is loaded from the resource system. Then a <a href="./quiloader.htm" translate="no">QUiLoader</a> instance is created, and the <a href="./quiloader.htm#load" translate="no">QUiLoader::load</a>() function is called, with the first argument being the open file, and the second argument being the pointer of the widget that should be set as the parent. The created <a href="./qwidget.htm" translate="no">QWidget</a> is returned.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">static</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>loadUiFile(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>parent)
{
    <span class="type"><a href="./qfile.htm" translate="no">QFile</a></span> file(<span class="string">":/forms/textfinder.ui"</span>);
    file<span class="operator">.</span>open(<span class="type"><a href="./qiodevice.htm" translate="no">QIODevice</a></span><span class="operator">::</span>ReadOnly);

    <span class="type"><a href="./quiloader.htm" translate="no">QUiLoader</a></span> loader;
    <span class="keyword">return</span> loader<span class="operator">.</span>load(<span class="operator">&amp;</span>file<span class="operator">,</span> parent);
}</pre></div>
<p>In a similar vein, the <code translate="no">loadTextFile</code> function loads <code translate="no">input.txt</code> from the resources. Data is read using <a href="./qtextstream.htm" translate="no">QTextStream</a> into a <a href="./qstring.htm" translate="no">QString</a> with the <a href="./qtextstream.htm#readAll" translate="no">QTextStream::readAll</a>() function. We explicitly set the encoding to <i>UTF-8</i>, because <a href="./qtextstream.htm" translate="no">QTextStream</a> by default uses the current system locale. Finally, the loaded text is returned.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">static</span> <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> loadTextFile()
{
    <span class="type"><a href="./qfile.htm" translate="no">QFile</a></span> inputFile(<span class="string">":/forms/input.txt"</span>);
    inputFile<span class="operator">.</span>open(<span class="type"><a href="./qiodevice.htm" translate="no">QIODevice</a></span><span class="operator">::</span>ReadOnly);
    <span class="type"><a href="./qtextstream.htm" translate="no">QTextStream</a></span> in(<span class="operator">&amp;</span>inputFile);
    in<span class="operator">.</span>setCodec(<span class="string">"UTF-8"</span>);
    <span class="keyword">return</span> in<span class="operator">.</span>readAll();
}</pre></div>
<a name="textfinder-class-implementation"></a>
<h4 id="textfinder-class-implementation">TextFinder Class Implementation<a class="plink" href="#textfinder-class-implementation" title="Direct link to this headline"></a></h4>
<p>The <code translate="no">TextFinder</code> class's constructor does not instantiate any child widgets directly. Instead, it calls the <code translate="no">loadUiFile()</code> function, and then uses <a href="./qobject.htm#findChild" translate="no">QObject::findChild</a>() to locate the created <a href="./qwidget.htm" translate="no">QWidget</a>s by object name.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">TextFinder<span class="operator">::</span>TextFinder(<span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>parent)
    : <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span>(parent)
{
    <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>formWidget <span class="operator">=</span> loadUiFile(<span class="keyword">this</span>);

    ui_findButton <span class="operator">=</span> findChild<span class="operator">&lt;</span><span class="type"><a href="./qpushbutton.htm" translate="no">QPushButton</a></span><span class="operator">*</span><span class="operator">&gt;</span>(<span class="string">"findButton"</span>);
    ui_textEdit <span class="operator">=</span> findChild<span class="operator">&lt;</span><span class="type"><a href="./qtextedit.htm" translate="no">QTextEdit</a></span><span class="operator">*</span><span class="operator">&gt;</span>(<span class="string">"textEdit"</span>);
    ui_lineEdit <span class="operator">=</span> findChild<span class="operator">&lt;</span><span class="type"><a href="./qlineedit.htm" translate="no">QLineEdit</a></span><span class="operator">*</span><span class="operator">&gt;</span>(<span class="string">"lineEdit"</span>);</pre></div>
<p>We then use <a href="./qmetaobject.htm#connectSlotsByName" translate="no">QMetaObject::connectSlotsByName</a>() to enable the automatic calling of the <code translate="no">on_findButton_clicked()</code> slot.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qmetaobject.htm" translate="no">QMetaObject</a></span><span class="operator">::</span>connectSlotsByName(<span class="keyword">this</span>);</pre></div>
<p>The <code translate="no">loadTextFile</code> function is called to get the text to be shown in the <a href="./qtextedit.htm" translate="no">QTextEdit</a>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    ui_textEdit<span class="operator">-</span><span class="operator">&gt;</span>setText(loadTextFile());</pre></div>
<p>The dynamically loaded user interface in <code translate="no">formWidget</code> is now properly set up. We now embed <code translate="no">formWidget</code> through a <code translate="no">QVBoxLayout</code>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qvboxlayout.htm" translate="no">QVBoxLayout</a></span> <span class="operator">*</span>layout <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qvboxlayout.htm" translate="no">QVBoxLayout</a></span>;
    layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(formWidget);
    setLayout(layout);</pre></div>
<p>At the end of the constructor we set a window title.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    setWindowTitle(tr(<span class="string">"Text Finder"</span>));
}</pre></div>
<p>The <code translate="no">on_findButton_clicked()</code> function is a slot that is connected to <code translate="no">ui_findButton</code>'s <code translate="no">clicked()</code> signal. The <code translate="no">searchString</code> is extracted from the <code translate="no">ui_lineEdit</code> and the <code translate="no">document</code> is extracted from <code translate="no">ui_textEdit</code>. If there is an empty <code translate="no">searchString</code>, a <a href="./qmessagebox.htm" translate="no">QMessageBox</a> is used, requesting the user to enter a word. Otherwise, we traverse through the words in <code translate="no">ui_textEdit</code>, and highlight all ocurrences of the <code translate="no">searchString</code>. Two QTextCursor objects are used: One to traverse through the words in <code translate="no">line</code> and another to keep track of the edit blocks.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> TextFinder<span class="operator">::</span>on_findButton_clicked()
{
    <span class="type"><a href="./qstring.htm" translate="no">QString</a></span> searchString <span class="operator">=</span> ui_lineEdit<span class="operator">-</span><span class="operator">&gt;</span>text();
    <span class="type">QTextDocument</span> <span class="operator">*</span>document <span class="operator">=</span> ui_textEdit<span class="operator">-</span><span class="operator">&gt;</span>document();

    bool found <span class="operator">=</span> <span class="keyword">false</span>;

    <span class="comment">// undo previous change (if any)</span>
    document<span class="operator">-</span><span class="operator">&gt;</span>undo();

    <span class="keyword">if</span> (searchString<span class="operator">.</span>isEmpty()) {
        <span class="type"><a href="./qmessagebox.htm" translate="no">QMessageBox</a></span><span class="operator">::</span>information(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">"Empty Search Field"</span>)<span class="operator">,</span>
                                 tr(<span class="string">"The search field is empty. "</span>
                                    <span class="string">"Please enter a word and click Find."</span>));
    } <span class="keyword">else</span> {
        <span class="type">QTextCursor</span> highlightCursor(document);
        <span class="type">QTextCursor</span> cursor(document);

        cursor<span class="operator">.</span>beginEditBlock();

        <span class="type">QTextCharFormat</span> plainFormat(highlightCursor<span class="operator">.</span>charFormat());
        <span class="type">QTextCharFormat</span> colorFormat <span class="operator">=</span> plainFormat;
        colorFormat<span class="operator">.</span>setForeground(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>red);

        <span class="keyword">while</span> (<span class="operator">!</span>highlightCursor<span class="operator">.</span>isNull() <span class="operator">&amp;</span><span class="operator">&amp;</span> <span class="operator">!</span>highlightCursor<span class="operator">.</span>atEnd()) {
            highlightCursor <span class="operator">=</span> document<span class="operator">-</span><span class="operator">&gt;</span>find(searchString<span class="operator">,</span> highlightCursor<span class="operator">,</span>
                                             <span class="type">QTextDocument</span><span class="operator">::</span>FindWholeWords);

            <span class="keyword">if</span> (<span class="operator">!</span>highlightCursor<span class="operator">.</span>isNull()) {
                found <span class="operator">=</span> <span class="keyword">true</span>;
                highlightCursor<span class="operator">.</span>movePosition(<span class="type">QTextCursor</span><span class="operator">::</span>WordRight<span class="operator">,</span>
                                             <span class="type">QTextCursor</span><span class="operator">::</span>KeepAnchor);
                highlightCursor<span class="operator">.</span>mergeCharFormat(colorFormat);
            }
        }

        cursor<span class="operator">.</span>endEditBlock();</pre></div>
<p>The <code translate="no">found</code> flag is used to indicate if the <code translate="no">searchString</code> was found within the contents of <code translate="no">ui_textEdit</code>. If it was not found, a <a href="./qmessagebox.htm" translate="no">QMessageBox</a> is used to inform the user.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">        <span class="keyword">if</span> (found <span class="operator">=</span><span class="operator">=</span> <span class="keyword">false</span>) {
            <span class="type"><a href="./qmessagebox.htm" translate="no">QMessageBox</a></span><span class="operator">::</span>information(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">"Word Not Found"</span>)<span class="operator">,</span>
                                     tr(<span class="string">"Sorry, the word cannot be found."</span>));
        }
    }
}</pre></div>
<a name="main-function"></a>
<h4 id="main-function"><code translate="no">main()</code> Function<a class="plink" href="#main-function" title="Direct link to this headline"></a></h4>
<p>The <code translate="no">main()</code> function instantiates and shows <code translate="no">TextFinder</code>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">int</span> main(<span class="type">int</span> argc<span class="operator">,</span> <span class="type">char</span> <span class="operator">*</span>argv<span class="operator">[</span><span class="operator">]</span>)
{
    <span class="type"><a href="./qapplication.htm" translate="no">QApplication</a></span> app(argc<span class="operator">,</span> argv);

    TextFinder textFinder;
    textFinder<span class="operator">.</span>show();

    <span class="keyword">return</span> app<span class="operator">.</span>exec();
}</pre></div>
<p>There are various approaches to include forms into applications. Using QUILoader is just one of them. See Using a Designer UI File in Your Application for more information on the other approaches available.</p>
<p><a href="https://code.qt.io/cgit/qt/qttools.git/tree/examples/uitools/textfinder?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<p><b>See also </b><a href="./qtdesigner-calculatorbuilder-example.htm" translate="no">Calculator Builder Example</a> and <a href="./qtdesigner-worldtimeclockbuilder-example.htm" translate="no">World Time Clock Builder Example</a>.</p>
<!-- @@@textfinder -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>