<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WorkerScript QML Type</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qml-qtqml-workerscript-workerscript.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtqml-workerscript-qmlmodule.htm" translate="no">QML Types</a></li>
                            <li><a>WorkerScript QML Type</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title" translate="no">WorkerScript QML Type</h1>
<span class="subtitle" translate="no"></span>
<!-- $$$WorkerScript-brief -->
<p>Enables the use of threads in a Qt Quick application. <a href="#details">More...</a></p>
<!-- @@@WorkerScript -->
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> Import Statement:</td><td class="memItemRight bottomAlign"> import QtQml.WorkerScript 2.15</td></tr></tbody></table></div><ul>
<li><a href="./qml-qtqml-workerscript-workerscript-members.htm">List of all members, including inherited members</a></li>
</ul>
<a name="properties"></a>
<h2 id="properties">Properties<a class="plink" href="#properties" title="Direct link to this headline"></a></h2>
<ul>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-workerscript-workerscript.htm#ready-prop" translate="no">ready</a></b></b> : bool</li>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-workerscript-workerscript.htm#source-prop" translate="no">source</a></b></b> : url</li>
</ul>
<a name="signals"></a>
<h2 id="signals">Signals<a class="plink" href="#signals" title="Direct link to this headline"></a></h2>
<ul>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-workerscript-workerscript.htm#message-signal" translate="no">message</a></b></b>(jsobject <i>msg</i>)</li>
</ul>
<a name="methods"></a>
<h2 id="methods">Methods<a class="plink" href="#methods" title="Direct link to this headline"></a></h2>
<ul>
<li class="fn" translate="no"><b><b><a href="./qml-qtqml-workerscript-workerscript.htm#sendMessage-method" translate="no">sendMessage</a></b></b>(jsobject <i>message</i>)</li>
</ul>
<!-- $$$WorkerScript-description -->
<a name="details"></a>
<h2 id="details">Detailed Description<a class="plink" href="#details" title="Direct link to this headline"></a></h2>
<p>Use WorkerScript to run operations in a new thread. This is useful for running operations in the background so that the main GUI thread is not blocked.</p>
<p>Messages can be passed between the new thread and the parent thread using <a href="./qml-qtqml-workerscript-workerscript.htm#sendMessage-method" translate="no">sendMessage()</a> and the <code translate="no">onMessage()</code> handler.</p>
<p>An example:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">import QtQuick 2.0

<span class="type"><a href="./qml-qtquick-rectangle.htm" translate="no">Rectangle</a></span> {
    <span class="name">width</span>: <span class="number">300</span>; <span class="name">height</span>: <span class="number">300</span>

    <span class="type"><a href="./qml-qtquick-text.htm" translate="no">Text</a></span> {
        <span class="name">id</span>: <span class="name">myText</span>
        <span class="name">text</span>: <span class="string">'Click anywhere'</span>
    }

    <span class="type"><a href="./qml-qtqml-workerscript-workerscript.htm" translate="no">WorkerScript</a></span> {
        <span class="name">id</span>: <span class="name">myWorker</span>
        <span class="name">source</span>: <span class="string">"script.mjs"</span>

        <span class="name">onMessage</span>: <span class="name">myText</span>.<span class="name">text</span> <span class="operator">=</span> <span class="name">messageObject</span>.<span class="name">reply</span>
    }

    <span class="type"><a href="./qml-qtquick-mousearea.htm" translate="no">MouseArea</a></span> {
        <span class="name">anchors</span>.fill: <span class="name">parent</span>
        <span class="name">onClicked</span>: <span class="name">myWorker</span>.<span class="name">sendMessage</span>({ 'x': <span class="name">mouse</span>.<span class="name">x</span>, 'y': <span class="name">mouse</span>.<span class="name">y</span> })
    }
}</pre></div>
<p>The above worker script specifies a JavaScript file, "script.mjs", that handles the operations to be performed in the new thread. Here is <code translate="no">script.mjs</code>:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">WorkerScript.onMessage = function(message) {
    // ... long-running operations and calculations are done here
    WorkerScript.sendMessage({ 'reply': 'Mouse is at ' + message.x + ',' + message.y })
}</pre></div>
<p>When the user clicks anywhere within the rectangle, <code translate="no">sendMessage()</code> is called, triggering the <code translate="no">WorkerScript.onMessage()</code> handler in <code translate="no">script.mjs</code>. This in turn sends a reply message that is then received by the <code translate="no">onMessage()</code> handler of <code translate="no">myWorker</code>.</p>
<p>The example uses a script that is an ECMAScript module, because it has the ".mjs" extension. It can use import statements to access functionality from other modules and it is run in JavaScript strict mode.</p>
<p>If a worker script has the extension ".js" instead, then it is considered to contain plain JavaScript statements and it is run in non-strict mode.</p>
<div class="admonition note">
<p><b>Note: </b>Each WorkerScript element will instantiate a separate JavaScript engine to ensure perfect isolation and thread-safety. If the impact of that results in a memory consumption that is too high for your environment, then consider sharing a WorkerScript element.</p>
</div>
<a name="restrictions"></a>
<h4 id="restrictions">Restrictions<a class="plink" href="#restrictions" title="Direct link to this headline"></a></h4>
<p>Since the <code translate="no">WorkerScript.onMessage()</code> function is run in a separate thread, the JavaScript file is evaluated in a context separate from the main QML engine. This means that unlike an ordinary JavaScript file that is imported into QML, the <code translate="no">script.mjs</code> in the above example cannot access the properties, methods or other attributes of the QML item, nor can it access any context properties set on the QML object through <a href="./qqmlcontext.htm" translate="no">QQmlContext</a>.</p>
<p>Additionally, there are restrictions on the types of values that can be passed to and from the worker script. See the <a href="./qml-qtqml-workerscript-workerscript.htm#sendMessage-method" translate="no">sendMessage()</a> documentation for details.</p>
<p>Worker scripts that are plain JavaScript sources can not use <a href="./qtqml-javascript-imports.htm" translate="no">.import</a> syntax. Scripts that are ECMAScript modules can freely use import and export statements.</p>
<p><b>See also </b><a href="./qtquick-threading-example.htm" translate="no">Qt Quick Examples - Threading</a> and <a href="./qtquick-threading-threadedlistmodel-example.htm" translate="no">Threaded ListModel Example</a>.</p>
<!-- @@@WorkerScript -->
<h2>Property Documentation</h2>
<!-- $$$ready -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="ready-prop" valign="top">
<td class="tblQmlPropNode"><p>
<a name="ready-prop"></a><span class="name">ready</span> : <span class="type"><a href="./qml-bool.htm" translate="no">bool</a></span><a class="plink" href="#ready-prop" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>This holds whether the <a href="./qml-qtqml-workerscript-workerscript.htm" translate="no">WorkerScript</a> has been initialized and is ready for receiving messages via <code translate="no">WorkerScript.sendMessage()</code>.</p>
</div></div><!-- @@@ready -->
<br>
<!-- $$$source -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="source-prop" valign="top">
<td class="tblQmlPropNode"><p>
<a name="source-prop"></a><span class="name">source</span> : <span class="type"><a href="./qml-url.htm" translate="no">url</a></span><a class="plink" href="#source-prop" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>This holds the url of the JavaScript file that implements the <code translate="no">WorkerScript.onMessage()</code> handler for threaded operations.</p>
<p>If the file name component of the url ends with ".mjs", then the script is parsed as an ECMAScript module and run in strict mode. Otherwise it is considered to be plain script.</p>
</div></div><!-- @@@source -->
<br>
<h2>Signal Documentation</h2>
<!-- $$$message[overload1]$$$messagejsobject -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="message-signal" valign="top">
<td class="tblQmlFuncNode"><p>
<a name="message-signal"></a><span class="name">message</span>(<span class="type">jsobject</span> <i>msg</i>)<a class="plink" href="#message-signal" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>This signal is emitted when a message <i translate="no">msg</i> is received from a worker script in another thread through a call to <a href="./qml-qtqml-workerscript-workerscript.htm#sendMessage-method" translate="no">sendMessage()</a>.</p>
<p><b>Note: </b>The corresponding handler is <code translate="no">onMessage</code>.</p>
</div></div><!-- @@@message -->
<br>
<h2>Method Documentation</h2>
<!-- $$$sendMessage[overload1]$$$sendMessagejsobject -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tbody><tr class="odd" id="sendMessage-method" valign="top">
<td class="tblQmlFuncNode"><p>
<a name="sendMessage-method"></a><span class="name">sendMessage</span>(<span class="type">jsobject</span> <i>message</i>)<a class="plink" href="#sendMessage-method" title="Direct link to this headline"></a></p></td></tr>
</tbody></table></div></div>
<div class="qmldoc"><p>Sends the given <i translate="no">message</i> to a worker script handler in another thread. The other worker script handler can receive this message through the onMessage() handler.</p>
<p>The <code translate="no">message</code> object may only contain values of the following types:</p>
<ul>
<li>boolean, number, string</li>
<li>JavaScript objects and arrays</li>
<li>ListModel objects (any other type of <a href="./qobject.htm" translate="no">QObject</a>* is not allowed)</li>
</ul>
<p>All objects and arrays are copied to the <code translate="no">message</code>. With the exception of ListModel objects, any modifications by the other thread to an object passed in <code translate="no">message</code> will not be reflected in the original object.</p>
</div></div><!-- @@@sendMessage -->
<br>
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>