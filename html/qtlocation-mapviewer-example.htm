<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Map Viewer (QML) | Qt Location</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtlocation-mapviewer-example.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtlocation-index.htm" translate="no">Qt Location</a></li>
                            <li><a href="./qtlocation-examples.htm" translate="no">Qt Location Examples</a></li>
                            <li><a>Map Viewer (QML)</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">Map Viewer (QML)</h1>
<span class="subtitle"></span>
<!-- $$$mapviewer-brief -->
<p>The Map Viewer example shows how to display and interact with a map, search for an address, and find driving directions.</p>
<!-- @@@mapviewer -->
<!-- $$$mapviewer-description -->
<div class="descr"> <a name="details"></a>
<p class="centerAlign"><img alt="" src="./images/mapviewer.png"></p><p>This is a large example covering many basic uses of maps, positioning, and navigation services in Qt Location. This page is divided into sections covering each of these areas of functionality with snippets from the code.</p>
<a name="running-the-example"></a>
<h4 id="running-the-example">Running the Example<a class="plink" href="#running-the-example" title="Direct link to this headline"></a></h4>
<p>To run the example from <a href="https://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b>Welcome</b> mode and select the example from <b>Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<p>The example can work with any of the available geo services plugins. However, some plugins may require additional <a href="./qml-qtlocation-pluginparameter.htm" translate="no">plugin parameters</a> in order to function correctly. <a href="./qml-qtlocation-pluginparameter.htm" translate="no">Plugin parameters</a> can be passed on the command line using the <code translate="no">--plugin</code> argument, which takes the form:</p>
<div class="pre"><pre class="cpp plain" translate="no">--plugin.&lt;parameter name&gt; &lt;parameter value&gt;</pre></div>
<p>Refer to the documentation for each of the geo services plugins for details on what plugin parameters they support. The default plugin used by this example is <a href="./location-plugin-osm.htm" translate="no">Qt Location Open Street Map Plugin</a>, which does not require any parameters.</p>
<a name="overview"></a>
<h4 id="overview">Overview<a class="plink" href="#overview" title="Direct link to this headline"></a></h4>
<p>QML types shown in this example:</p>
<ul>
<li>Displaying a map<ul>
<li><a href="./qml-qtlocation-map.htm" translate="no">Map</a></li>
<li><a href="./qml-qtlocation-mapgesturearea.htm" translate="no">MapGestureArea</a></li>
<li><a href="./qml-coordinate.htm" translate="no">coordinate</a></li>
</ul>
</li>
<li>Finding an address<ul>
<li><a href="./qml-qtlocation-geocodemodel.htm" translate="no">GeocodeModel</a></li>
<li><a href="./qml-qtlocation-mapitemview.htm" translate="no">MapItemView</a></li>
<li><a href="./qml-qtlocation-mapcircle.htm" translate="no">MapCircle</a></li>
</ul>
</li>
<li>Directions and travel routes<ul>
<li><a href="./qml-qtlocation-routemodel.htm" translate="no">RouteModel</a></li>
<li><a href="./qml-qtlocation-maproute.htm" translate="no">MapRoute</a></li>
</ul>
</li>
</ul>
<a name="displaying-a-map"></a>
<h4 id="displaying-a-map">Displaying a Map<a class="plink" href="#displaying-a-map" title="Direct link to this headline"></a></h4>
<p>Drawing a map on-screen is accomplished using the Map type, as shown below.</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtlocation-map.htm" translate="no">Map</a></span> {
    <span class="name">id</span>: <span class="name">map</span>
    <span class="name">zoomLevel</span>: (<span class="name">maximumZoomLevel</span> <span class="operator">-</span> <span class="name">minimumZoomLevel</span>)<span class="operator">/</span><span class="number">2</span>
    <span class="type">center</span> {
        <span class="comment">// The Qt Company in Oslo</span>
        <span class="name">latitude</span>: <span class="number">59.9485</span>
        <span class="name">longitude</span>: <span class="number">10.7686</span>
    }
}</pre></div>
<p>In this example, we give the map an initial center <a href="./qml-coordinate.htm" translate="no">coordinate</a> with a set latitude and longitude. We also set the initial zoom level to 50% (halfway between the maximum and minimum).</p>
<a name="finding-an-address-geocoding"></a>
<h4 id="finding-an-address-geocoding">Finding an Address (Geocoding)<a class="plink" href="#finding-an-address-geocoding" title="Direct link to this headline"></a></h4>
<p>To locate a certain address or place on the map uses a process called geocoding. In order to perform a geocode operation, we first need to adjust our Map object to be able to receive the result.</p>
<p>Receiving results of geocoding is done through a <a href="./qml-qtlocation-geocodemodel.htm" translate="no">GeocodeModel</a>:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtlocation-geocodemodel.htm" translate="no">GeocodeModel</a></span> {
    <span class="name">id</span>: <span class="name">geocodeModel</span>
    <span class="name">plugin</span>: <span class="name">map</span>.<span class="name">plugin</span>
    <span class="name">onStatusChanged</span>: {
        <span class="keyword">if</span> ((<span class="name">status</span> <span class="operator">==</span> <span class="name">GeocodeModel</span>.<span class="name">Ready</span>) <span class="operator">||</span> (<span class="name">status</span> <span class="operator">==</span> <span class="name">GeocodeModel</span>.<span class="name">Error</span>))
            <span class="name">map</span>.<span class="name">geocodeFinished</span>()
    }
    <span class="name">onLocationsChanged</span>:
    {
        <span class="keyword">if</span> (<span class="name">count</span> <span class="operator">==</span> <span class="number">1</span>) {
            <span class="name">map</span>.<span class="name">center</span>.<span class="name">latitude</span> <span class="operator">=</span> <span class="name">get</span>(<span class="number">0</span>).<span class="name">coordinate</span>.<span class="name">latitude</span>
            <span class="name">map</span>.<span class="name">center</span>.<span class="name">longitude</span> <span class="operator">=</span> <span class="name">get</span>(<span class="number">0</span>).<span class="name">coordinate</span>.<span class="name">longitude</span>
        }
    }
}</pre></div>
<p>To display the contents of the <a href="./qml-qtlocation-geocodemodel.htm" translate="no">GeocodeModel</a> we use a <a href="./qml-qtlocation-mapitemview.htm" translate="no">MapItemView</a>:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtlocation-mapitemview.htm" translate="no">MapItemView</a></span> {
    <span class="name">model</span>: <span class="name">geocodeModel</span>
    <span class="name">delegate</span>: <span class="name">pointDelegate</span>
}</pre></div>
<p><a href="./qml-qtlocation-mapitemview.htm" translate="no">MapItemView</a> uses an object called a "delegate" to act as a template for the items it creates. This can contain any map object desired, but in this case we show a <a href="./qml-qtlocation-mapcircle.htm" translate="no">MapCircle</a>:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtqml-component.htm" translate="no">Component</a></span> {
    <span class="name">id</span>: <span class="name">pointDelegate</span>

    <span class="type"><a href="./qml-qtlocation-mapcircle.htm" translate="no">MapCircle</a></span> {
        <span class="name">id</span>: <span class="name">point</span>
        <span class="name">radius</span>: <span class="number">1000</span>
        <span class="name">color</span>: <span class="string">"#46a2da"</span>
        <span class="name">border</span>.color: <span class="string">"#190a33"</span>
        <span class="name">border</span>.width: <span class="number">2</span>
        <span class="name">smooth</span>: <span class="number">true</span>
        <span class="name">opacity</span>: <span class="number">0.25</span>
        <span class="name">center</span>: <span class="name">locationData</span>.<span class="name">coordinate</span>
    }
}</pre></div>
<p>With these three objects, we have enough to receive Geocode responses and display them on our Map. The final piece is to send the actual Geocode request.</p>
<p>To send a geocode request, first we create an <a href="./qml-qtpositioning-address.htm" translate="no">Address</a> object, and fill it in with the desired parameters.</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtpositioning-address.htm" translate="no">Address</a></span> {
    <span class="name">id</span> :<span class="name">fromAddress</span>
    <span class="name">street</span>: <span class="string">"Sandakerveien 116"</span>
    <span class="name">city</span>: <span class="string">"Oslo"</span>
    <span class="name">country</span>: <span class="string">"Norway"</span>
    <span class="name">state</span> : <span class="string">""</span>
    <span class="name">postalCode</span>: <span class="string">"0484"</span>
}</pre></div>
<p>Then we set "geocodeModel.query" to the filled in <a href="./qml-qtpositioning-address.htm" translate="no">Address</a>, and call update() on the <a href="./qml-qtlocation-geocodemodel.htm" translate="no">GeocodeModel</a>.</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="comment">// send the geocode request</span>
<span class="name">geocodeModel</span>.<span class="name">query</span> <span class="operator">=</span> <span class="name">fromAddress</span>
<span class="name">geocodeModel</span>.<span class="name">update</span>()</pre></div>
<a name="directions-and-travel-routes"></a>
<h4 id="directions-and-travel-routes">Directions and Travel Routes<a class="plink" href="#directions-and-travel-routes" title="Direct link to this headline"></a></h4>
<p>Similar to the <a href="./qml-qtlocation-geocodemodel.htm" translate="no">GeocodeModel</a>, Qt Location also features the <a href="./qml-qtlocation-routemodel.htm" translate="no">RouteModel</a> type, which allows information about routes (for example driving directions) between two or more points, to be received and used with a Map.</p>
<p>Here again, we instantiate the <a href="./qml-qtlocation-routemodel.htm" translate="no">RouteModel</a> as a property of our Map:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtlocation-routemodel.htm" translate="no">RouteModel</a></span> {
    <span class="name">id</span>: <span class="name">routeModel</span>
    <span class="name">plugin</span> : <span class="name">map</span>.<span class="name">plugin</span>
    <span class="name">query</span>:  <span class="name">RouteQuery</span> {
        <span class="name">id</span>: <span class="name">routeQuery</span>
    }
    <span class="name">onStatusChanged</span>: {
        <span class="keyword">if</span> (<span class="name">status</span> <span class="operator">==</span> <span class="name">RouteModel</span>.<span class="name">Ready</span>) {
            <span class="keyword">switch</span> (<span class="name">count</span>) {
            <span class="keyword">case</span> <span class="number">0</span>:
                <span class="comment">// technically not an error</span>
                <span class="name">map</span>.<span class="name">routeError</span>()
                <span class="keyword">break</span>
            <span class="keyword">case</span> <span class="number">1</span>:
                <span class="name">map</span>.<span class="name">showRouteList</span>()
                <span class="keyword">break</span>
            }
        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">status</span> <span class="operator">==</span> <span class="name">RouteModel</span>.<span class="name">Error</span>) {
            <span class="name">map</span>.<span class="name">routeError</span>()
        }
    }
}</pre></div>
<p>To display the contents of a model to the user, we need a view. Once again we will use a <a href="./qml-qtlocation-mapitemview.htm" translate="no">MapItemView</a>, to display the Routes as objects on the Map:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtlocation-mapitemview.htm" translate="no">MapItemView</a></span> {
    <span class="name">model</span>: <span class="name">routeModel</span>
    <span class="name">delegate</span>: <span class="name">routeDelegate</span>
}</pre></div>
<p>To act as a template for the objects we wish the view to create, we create a delegate component:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtqml-component.htm" translate="no">Component</a></span> {
    <span class="name">id</span>: <span class="name">routeDelegate</span>

    <span class="type"><a href="./qml-qtlocation-maproute.htm" translate="no">MapRoute</a></span> {
        <span class="name">id</span>: <span class="name">route</span>
        <span class="name">route</span>: <span class="name">routeData</span>
        <span class="name">line</span>.color: <span class="string">"#46a2da"</span>
        <span class="name">line</span>.width: <span class="number">5</span>
        <span class="name">smooth</span>: <span class="number">true</span>
        <span class="name">opacity</span>: <span class="number">0.8</span>
    }
}</pre></div>
<p>With the model, view and delegate now complete, the only missing component is some kind of control over the model to begin the Route request process. In the simplest case, we can fill out a Route request using two already available <a href="./qml-coordinate.htm" translate="no">coordinates</a>:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">property <span class="type"><a href="./qml-variant.htm" translate="no">variant</a></span> <span class="name">fromCoordinate</span>: <span class="name">QtPositioning</span>.<span class="name">coordinate</span>(<span class="number">59.9483</span>, <span class="number">10.7695</span>)
property <span class="type"><a href="./qml-variant.htm" translate="no">variant</a></span> <span class="name">toCoordinate</span>: <span class="name">QtPositioning</span>.<span class="name">coordinate</span>(<span class="number">59.9645</span>, <span class="number">10.671</span>)</pre></div>
<p>In the next snippet, we show how to set up the request object and instruct the model to update. We also instruct the map to center on the start coordinate for our routing request.</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="comment">// clear away any old data in the query</span>
<span class="name">routeQuery</span>.<span class="name">clearWaypoints</span>();

<span class="comment">// add the start and end coords as waypoints on the route</span>
<span class="name">routeQuery</span>.<span class="name">addWaypoint</span>(<span class="name">startCoordinate</span>)
<span class="name">routeQuery</span>.<span class="name">addWaypoint</span>(<span class="name">endCoordinate</span>)
<span class="name">routeQuery</span>.<span class="name">travelModes</span> <span class="operator">=</span> <span class="name">RouteQuery</span>.<span class="name">CarTravel</span>
<span class="name">routeQuery</span>.<span class="name">routeOptimizations</span> <span class="operator">=</span> <span class="name">RouteQuery</span>.<span class="name">FastestRoute</span>

<span class="name">routeModel</span>.<span class="name">update</span>();

<span class="comment">// center the map on the start coord</span>
<span class="name">map</span>.<span class="name">center</span> <span class="operator">=</span> <span class="name">startCoordinate</span>;</pre></div>
<p>This is all that is required to display a Route on the Map. However, it is also useful to be able to retrieve the written directions and explanation of the travel route. In the example, these are displayed in a <a href="./qml-qtquick-listview.htm" translate="no">ListView</a> element. To create this content, we use a standard <a href="./qtquick-modelviewsdata-modelview.htm#models" translate="no">ListModel</a> and <a href="./qml-qtquick-listview.htm" translate="no">ListView</a> pair. The data in the <a href="./qtquick-modelviewsdata-modelview.htm#models" translate="no">ListModel</a> is built from the routeModel's output:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="type"><a href="./qml-qtquick-listview.htm" translate="no">ListView</a></span> {
    <span class="name">interactive</span>: <span class="number">true</span>
    <span class="name">model</span>: <span class="name">ListModel</span> { <span class="name">id</span>: <span class="name">routeInfoModel</span> }
    <span class="name">header</span>: <span class="name">RouteListHeader</span> {}
    <span class="name">delegate</span>:  <span class="name">RouteListDelegate</span>{
        <span class="name">routeIndex</span>.text: <span class="name">index</span> <span class="operator">+</span> <span class="number">1</span>
        <span class="name">routeInstruction</span>.text: <span class="name">instruction</span>
        <span class="name">routeDistance</span>.text: <span class="name">distance</span>
    }
}</pre></div>
<p>Inside the <a href="./qml-qtlocation-routemodel.htm" translate="no">RouteModel</a>, as you can see above, we add an <a href="./qml-qtlocation-routemodel.htm#status-prop" translate="no">onStatusChanged</a> handler, which calls the <code translate="no">showRouteList()</code> which updates the <code translate="no">routeInfoModel</code>:</p>
<div class="pre"><pre class="qml prettyprint" translate="no"><span class="name">routeInfoModel</span>.<span class="name">clear</span>()
<span class="keyword">if</span> (<span class="name">routeModel</span>.<span class="name">count</span> <span class="operator">&gt;</span> <span class="number">0</span>) {
    <span class="keyword">for</span> (var i = 0; <span class="name">i</span> <span class="operator">&lt;</span> <span class="name">routeModel</span>.<span class="name">get</span>(<span class="number">0</span>).<span class="name">segments</span>.<span class="name">length</span>; i++) {
        <span class="name">routeInfoModel</span>.<span class="name">append</span>({
            "instruction": <span class="name">routeModel</span>.<span class="name">get</span>(<span class="number">0</span>).<span class="name">segments</span>[<span class="name">i</span>].<span class="name">maneuver</span>.<span class="name">instructionText</span>,
             "distance": <span class="name">Helper</span>.<span class="name">formatDistance</span>(<span class="name">routeModel</span>.<span class="name">get</span>(<span class="number">0</span>).<span class="name">segments</span>[<span class="name">i</span>].<span class="name">maneuver</span>.<span class="name">distanceToNextInstruction</span>)
        });
    }
}</pre></div>
<p><a href="https://code.qt.io/cgit/qt/qtlocation.git/tree/examples/location/mapviewer?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@mapviewer -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>