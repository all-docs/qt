<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Basic Graphics Layouts Example | Qt Widgets</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtwidgets-graphicsview-basicgraphicslayouts-example.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtwidgets-index.htm" translate="no">Qt Widgets</a></li>
                            <li><a>Basic Graphics Layouts Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">Basic Graphics Layouts Example</h1>
<span class="subtitle"></span>
<!-- $$$graphicsview/basicgraphicslayouts-brief -->
<p>Demonstrates how to create basic graphics layout.</p>
<!-- @@@graphicsview/basicgraphicslayouts -->
<!-- $$$graphicsview/basicgraphicslayouts-description -->
<div class="descr"> <a name="details"></a>
<p>The Basic Graphics Layouts example shows how to use the layout classes in <a href="./qgraphicsview.htm" translate="no">QGraphicsView</a>: <a href="./qgraphicslinearlayout.htm" translate="no">QGraphicsLinearLayout</a> and <a href="./qgraphicsgridlayout.htm" translate="no">QGraphicsGridLayout</a>. In addition to that it shows how to write your own custom layout item.</p>
<p class="centerAlign"><img alt="Screenshot of the Basic Layouts Example" src="./images/basicgraphicslayouts-example.png"></p><a name="window-class-definition"></a>
<h4 id="window-class-definition">Window Class Definition<a class="plink" href="#window-class-definition" title="Direct link to this headline"></a></h4>
<p>The <code translate="no">Window</code> class is a subclass of <a href="./graphicsview.htm#qgraphicswidget" translate="no">QGraphicsWidget</a>. It has a constructor with a <a href="./graphicsview.htm#qgraphicswidget" translate="no">QGraphicsWidget</a> <i translate="no">parent</i> as its parameter.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> Window : <span class="keyword">public</span> <span class="type"><a href="./qgraphicswidget.htm" translate="no">QGraphicsWidget</a></span>
{
    Q_OBJECT
<span class="keyword">public</span>:
    Window(<span class="type"><a href="./qgraphicswidget.htm" translate="no">QGraphicsWidget</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);

};</pre></div>
<a name="window-class-implementation"></a>
<h4 id="window-class-implementation">Window Class Implementation<a class="plink" href="#window-class-implementation" title="Direct link to this headline"></a></h4>
<p>The constructor of <code translate="no">Window</code> instantiates a <a href="./qgraphicslinearlayout.htm" translate="no">QGraphicsLinearLayout</a> object, <code translate="no">windowLayout</code>, with vertical orientation. We instantiate another <a href="./qgraphicslinearlayout.htm" translate="no">QGraphicsLinearLayout</a> object, <code translate="no">linear</code>, whose parent is <code translate="no">windowLayout</code>. Next, we create a <code translate="no">LayoutItem</code> object, <code translate="no">item</code> and add it to <code translate="no">linear</code> with the <a href="./qgraphicslinearlayout.htm#addItem" translate="no">addItem()</a> function. We also provide <code translate="no">item</code> with a <a href="./qgraphicslinearlayout.htm#setStretchFactor" translate="no">stretchFactor</a>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qgraphicslinearlayout.htm" translate="no">QGraphicsLinearLayout</a></span> <span class="operator">*</span>windowLayout <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qgraphicslinearlayout.htm" translate="no">QGraphicsLinearLayout</a></span>(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>Vertical);
    <span class="type"><a href="./qgraphicslinearlayout.htm" translate="no">QGraphicsLinearLayout</a></span> <span class="operator">*</span>linear <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qgraphicslinearlayout.htm" translate="no">QGraphicsLinearLayout</a></span>(windowLayout);
    LayoutItem <span class="operator">*</span>item <span class="operator">=</span> <span class="keyword">new</span> LayoutItem;
    linear<span class="operator">-</span><span class="operator">&gt;</span>addItem(item);
    linear<span class="operator">-</span><span class="operator">&gt;</span>setStretchFactor(item<span class="operator">,</span> <span class="number">1</span>);</pre></div>
<p>We repeat the process:</p>
<ul>
<li>create a new <code translate="no">LayoutItem</code>,</li>
<li>add the item <code translate="no">linear</code>, and</li>
<li>provide a stretch factor.</li>
</ul>
<div class="pre"><pre class="cpp prettyprint" translate="no">    item <span class="operator">=</span> <span class="keyword">new</span> LayoutItem;
    linear<span class="operator">-</span><span class="operator">&gt;</span>addItem(item);
    linear<span class="operator">-</span><span class="operator">&gt;</span>setStretchFactor(item<span class="operator">,</span> <span class="number">3</span>);
    windowLayout<span class="operator">-</span><span class="operator">&gt;</span>addItem(linear);</pre></div>
<p>We then add <code translate="no">linear</code> to <code translate="no">windowLayout</code>, nesting two <a href="./qgraphicslinearlayout.htm" translate="no">QGraphicsLinearLayout</a> objects. Apart from the <a href="./qgraphicslinearlayout.htm" translate="no">QGraphicsLinearLayout</a>, we also use a <a href="./qgraphicsgridlayout.htm" translate="no">QGraphicsGridLayout</a> object, <code translate="no">grid</code>, which is a 4x3 grid with some cells spanning to other rows.</p>
<p>We create seven <code translate="no">LayoutItem</code> objects and place them into <code translate="no">grid</code> with the <a href="./qgraphicsgridlayout.htm#addItem" translate="no">addItem()</a> function as shown in the code snippet below:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qgraphicsgridlayout.htm" translate="no">QGraphicsGridLayout</a></span> <span class="operator">*</span>grid <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="./qgraphicsgridlayout.htm" translate="no">QGraphicsGridLayout</a></span>(windowLayout);
    item <span class="operator">=</span> <span class="keyword">new</span> LayoutItem;
    grid<span class="operator">-</span><span class="operator">&gt;</span>addItem(item<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">4</span><span class="operator">,</span> <span class="number">1</span>);
    item <span class="operator">=</span> <span class="keyword">new</span> LayoutItem;
    item<span class="operator">-</span><span class="operator">&gt;</span>setMaximumHeight(item<span class="operator">-</span><span class="operator">&gt;</span>minimumHeight());
    grid<span class="operator">-</span><span class="operator">&gt;</span>addItem(item<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>AlignVCenter);
    item <span class="operator">=</span> <span class="keyword">new</span> LayoutItem;
    item<span class="operator">-</span><span class="operator">&gt;</span>setMaximumHeight(item<span class="operator">-</span><span class="operator">&gt;</span>minimumHeight());
    grid<span class="operator">-</span><span class="operator">&gt;</span>addItem(item<span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>AlignVCenter);
    item <span class="operator">=</span> <span class="keyword">new</span> LayoutItem;
    grid<span class="operator">-</span><span class="operator">&gt;</span>addItem(item<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">2</span>);
    item <span class="operator">=</span> <span class="keyword">new</span> LayoutItem;
    grid<span class="operator">-</span><span class="operator">&gt;</span>addItem(item<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">2</span>);
    item <span class="operator">=</span> <span class="keyword">new</span> LayoutItem;
    grid<span class="operator">-</span><span class="operator">&gt;</span>addItem(item<span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">2</span>);
    item <span class="operator">=</span> <span class="keyword">new</span> LayoutItem;
    grid<span class="operator">-</span><span class="operator">&gt;</span>addItem(item<span class="operator">,</span> <span class="number">3</span><span class="operator">,</span> <span class="number">2</span>);
    windowLayout<span class="operator">-</span><span class="operator">&gt;</span>addItem(grid);</pre></div>
<p>The first item we add to <code translate="no">grid</code> is placed in the top left cell, spanning four rows. The next two items are placed in the second column, and they span two rows. Each item's <a href="./qgraphicslayoutitem.htm#maximumHeight" translate="no">maximumHeight()</a> and <a href="./qgraphicslayoutitem.htm#minimumHeight" translate="no">minimumHeight()</a> are set to be equal so that they do not expand vertically. As a result, these items will not fit vertically in their cells. So, we specify that they should be vertically aligned in the center of the cell using <a href="./qt.htm#AlignmentFlag-enum" translate="no">Qt::AlignVCenter</a>.</p>
<p>Finally, <code translate="no">grid</code> itself is added to <code translate="no">windowLayout</code>. Unlike <a href="./qgridlayout.htm#addItem" translate="no">QGridLayout::addItem</a>(), <a href="./qgraphicsgridlayout.htm#addItem" translate="no">QGraphicsGridLayout::addItem</a>() requires a row and a column for its argument, specifying which cell the item should be positioned in. Also, if the <code translate="no">rowSpan</code> and <code translate="no">columnSpan</code> arguments are omitted, they will default to 1.</p>
<p>Note that we do not specify a parent for each <code translate="no">LayoutItem</code> that we construct, as all these items will be added to <code translate="no">windowLayout</code>. When we add an item to a layout, it will be automatically reparented to the widget on which the layout is installed.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    setLayout(windowLayout);
    setWindowTitle(tr(<span class="string">"Basic Graphics Layouts Example"</span>));</pre></div>
<p>Now that we have set up <code translate="no">grid</code> and added it to <code translate="no">windowLayout</code>, we install <code translate="no">windowLayout</code> onto the window object using <a href="./qgraphicswidget.htm#setLayout" translate="no">QGraphicsWidget::setLayout</a>() and we set the window title.</p>
<a name="layoutitem-class-definition"></a>
<h4 id="layoutitem-class-definition">LayoutItem Class Definition<a class="plink" href="#layoutitem-class-definition" title="Direct link to this headline"></a></h4>
<p>The <code translate="no">LayoutItem</code> class is a subclass of <a href="./qgraphicslayoutitem.htm" translate="no">QGraphicsLayoutItem</a> and <a href="./qgraphicsitem.htm" translate="no">QGraphicsItem</a>. It has a constructor, a destructor, and some required reimplementations. Since it inherits <a href="./qgraphicslayoutitem.htm" translate="no">QGraphicsLayoutItem</a> it must reimplement {<a href="./qgraphicslayoutitem.htm#setGeometry" translate="no">QGraphicsLayoutItem::setGeometry</a>()}{setGeometry()} and {<a href="./qgraphicslayoutitem.htm#sizeHint" translate="no">QGraphicsLayoutItem::sizeHint</a>()}{sizeHint()}. In addition to that it inherits <a href="./qgraphicsitem.htm" translate="no">QGraphicsItem</a>, so it must reimplement {<a href="./qgraphicsitem.htm#boundingRect" translate="no">QGraphicsItem::boundingRect</a>()}{boundingRect()} and {<a href="./qgraphicsitem.htm#paint" translate="no">QGraphicsItem::paint</a>()}{paint()}.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="keyword">class</span> LayoutItem : <span class="keyword">public</span> <span class="type"><a href="./qgraphicslayoutitem.htm" translate="no">QGraphicsLayoutItem</a></span><span class="operator">,</span> <span class="keyword">public</span> <span class="type"><a href="./qgraphicsitem.htm" translate="no">QGraphicsItem</a></span>
{
<span class="keyword">public</span>:
    LayoutItem(<span class="type"><a href="./qgraphicsitem.htm" translate="no">QGraphicsItem</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);

    <span class="comment">// Inherited from QGraphicsLayoutItem</span>
    <span class="type">void</span> setGeometry(<span class="keyword">const</span> <span class="type"><a href="./qrectf.htm" translate="no">QRectF</a></span> <span class="operator">&amp;</span>geom) override;
    <span class="type"><a href="./qsizef.htm" translate="no">QSizeF</a></span> sizeHint(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>SizeHint which<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qsizef.htm" translate="no">QSizeF</a></span> <span class="operator">&amp;</span>constraint <span class="operator">=</span> <span class="type"><a href="./qsizef.htm" translate="no">QSizeF</a></span>()) <span class="keyword">const</span> override;

    <span class="comment">// Inherited from QGraphicsItem</span>
    <span class="type"><a href="./qrectf.htm" translate="no">QRectF</a></span> boundingRect() <span class="keyword">const</span> override;
    <span class="type">void</span> paint(<span class="type"><a href="./qpainter.htm" translate="no">QPainter</a></span> <span class="operator">*</span>painter<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qstyleoptiongraphicsitem.htm" translate="no">QStyleOptionGraphicsItem</a></span> <span class="operator">*</span>option<span class="operator">,</span> <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget <span class="operator">=</span> nullptr) override;

<span class="keyword">private</span>:
    <span class="type"><a href="./qpixmap.htm" translate="no">QPixmap</a></span> m_pix;
};</pre></div>
<p>The <code translate="no">LayoutItem</code> class also has a private instance of <a href="./qpixmap.htm" translate="no">QPixmap</a>, <code translate="no">m_pix</code>.</p>
<a name="layoutitem-class-implementation"></a>
<h4 id="layoutitem-class-implementation">LayoutItem Class Implementation<a class="plink" href="#layoutitem-class-implementation" title="Direct link to this headline"></a></h4>
<p>In <code translate="no">LayoutItem</code>'s constructor, <code translate="no">m_pix</code> is instantiated and the <code translate="no">block.png</code> image is loaded into it.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">LayoutItem<span class="operator">::</span>LayoutItem(<span class="type"><a href="./qgraphicsitem.htm" translate="no">QGraphicsItem</a></span> <span class="operator">*</span>parent)
    : <span class="type"><a href="./qgraphicslayoutitem.htm" translate="no">QGraphicsLayoutItem</a></span>()<span class="operator">,</span> <span class="type"><a href="./qgraphicsitem.htm" translate="no">QGraphicsItem</a></span>(parent)<span class="operator">,</span>
      m_pix(<span class="type"><a href="./qpixmap.htm" translate="no">QPixmap</a></span>(QLatin1String(<span class="string">":/images/block.png"</span>)))
{
    setGraphicsItem(<span class="keyword">this</span>);
}</pre></div>
<p>We use the <a href="./qtglobal.htm#Q_UNUSED" translate="no">Q_UNUSED</a>() macro to prevent the compiler from generating warnings regarding unused parameters.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> LayoutItem<span class="operator">::</span>paint(<span class="type"><a href="./qpainter.htm" translate="no">QPainter</a></span> <span class="operator">*</span>painter<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qstyleoptiongraphicsitem.htm" translate="no">QStyleOptionGraphicsItem</a></span> <span class="operator">*</span>option<span class="operator">,</span>
                       <span class="type"><a href="./qwidget.htm" translate="no">QWidget</a></span> <span class="operator">*</span>widget)
{
    Q_UNUSED(widget);
    Q_UNUSED(option);

    <span class="type"><a href="./qrectf.htm" translate="no">QRectF</a></span> frame(<span class="type"><a href="./qpointf.htm" translate="no">QPointF</a></span>(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span>)<span class="operator">,</span> geometry()<span class="operator">.</span>size());
    <span class="keyword">const</span> <span class="type"><a href="./qsize.htm" translate="no">QSize</a></span> pmSize <span class="operator">=</span> m_pix<span class="operator">.</span>size();
    <span class="type"><a href="./qgradient.htm#QGradientStops-typedef" translate="no">QGradientStops</a></span> stops;</pre></div>
<p>The idea behind the <code translate="no">paint()</code> function is to paint the background rect then paint a rect around the pixmap.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="comment">// paint a background rect (with gradient)</span>
    <span class="type"><a href="./qlineargradient.htm" translate="no">QLinearGradient</a></span> gradient(frame<span class="operator">.</span>topLeft()<span class="operator">,</span> frame<span class="operator">.</span>topLeft() <span class="operator">+</span> <span class="type"><a href="./qpointf.htm" translate="no">QPointF</a></span>(<span class="number">200</span><span class="operator">,</span><span class="number">200</span>));
    stops <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qgradient.htm#QGradientStop-typedef" translate="no">QGradientStop</a></span>(<span class="number">0.0</span><span class="operator">,</span> <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span>(<span class="number">60</span><span class="operator">,</span> <span class="number">60</span><span class="operator">,</span>  <span class="number">60</span>));
    stops <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qgradient.htm#QGradientStop-typedef" translate="no">QGradientStop</a></span>(frame<span class="operator">.</span>height() <span class="operator">/</span> <span class="number">2</span> <span class="operator">/</span> frame<span class="operator">.</span>height()<span class="operator">,</span> <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span>(<span class="number">102</span><span class="operator">,</span> <span class="number">176</span><span class="operator">,</span> <span class="number">54</span>));

    <span class="comment">//stops &lt;&lt; QGradientStop(((frame.height() + h)/2 )/frame.height(), QColor(157, 195,  55));</span>
    stops <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qgradient.htm#QGradientStop-typedef" translate="no">QGradientStop</a></span>(<span class="number">1.0</span><span class="operator">,</span> <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span>(<span class="number">215</span><span class="operator">,</span> <span class="number">215</span><span class="operator">,</span> <span class="number">215</span>));
    gradient<span class="operator">.</span>setStops(stops);
    painter<span class="operator">-</span><span class="operator">&gt;</span>setBrush(<span class="type"><a href="./qbrush.htm" translate="no">QBrush</a></span>(gradient));
    painter<span class="operator">-</span><span class="operator">&gt;</span>drawRoundedRect(frame<span class="operator">,</span> <span class="number">10.0</span><span class="operator">,</span> <span class="number">10.0</span>);

    <span class="comment">// paint a rect around the pixmap (with gradient)</span>
    <span class="type"><a href="./qpointf.htm" translate="no">QPointF</a></span> pixpos <span class="operator">=</span> frame<span class="operator">.</span>center() <span class="operator">-</span> (<span class="type"><a href="./qpointf.htm" translate="no">QPointF</a></span>(pmSize<span class="operator">.</span>width()<span class="operator">,</span> pmSize<span class="operator">.</span>height()) <span class="operator">/</span> <span class="number">2</span>);
    <span class="type"><a href="./qrectf.htm" translate="no">QRectF</a></span> innerFrame(pixpos<span class="operator">,</span> pmSize);
    innerFrame<span class="operator">.</span>adjust(<span class="operator">-</span><span class="number">4</span><span class="operator">,</span> <span class="operator">-</span><span class="number">4</span><span class="operator">,</span> <span class="number">4</span><span class="operator">,</span> <span class="number">4</span>);
    gradient<span class="operator">.</span>setStart(innerFrame<span class="operator">.</span>topLeft());
    gradient<span class="operator">.</span>setFinalStop(innerFrame<span class="operator">.</span>bottomRight());
    stops<span class="operator">.</span>clear();
    stops <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qgradient.htm#QGradientStop-typedef" translate="no">QGradientStop</a></span>(<span class="number">0.0</span><span class="operator">,</span> <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span>(<span class="number">215</span><span class="operator">,</span> <span class="number">255</span><span class="operator">,</span> <span class="number">200</span>));
    stops <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qgradient.htm#QGradientStop-typedef" translate="no">QGradientStop</a></span>(<span class="number">0.5</span><span class="operator">,</span> <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span>(<span class="number">102</span><span class="operator">,</span> <span class="number">176</span><span class="operator">,</span> <span class="number">54</span>));
    stops <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="./qgradient.htm#QGradientStop-typedef" translate="no">QGradientStop</a></span>(<span class="number">1.0</span><span class="operator">,</span> <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span>(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span>  <span class="number">0</span>));
    gradient<span class="operator">.</span>setStops(stops);
    painter<span class="operator">-</span><span class="operator">&gt;</span>setBrush(<span class="type"><a href="./qbrush.htm" translate="no">QBrush</a></span>(gradient));
    painter<span class="operator">-</span><span class="operator">&gt;</span>drawRoundedRect(innerFrame<span class="operator">,</span> <span class="number">10.0</span><span class="operator">,</span> <span class="number">10.0</span>);
    painter<span class="operator">-</span><span class="operator">&gt;</span>drawPixmap(pixpos<span class="operator">,</span> m_pix);
}</pre></div>
<p>The reimplementation of <a href="./qgraphicsitem.htm#boundingRect" translate="no">boundingRect()</a> will set the top left corner at (0,0), and the size of it will be the size of the layout items <a href="./qgraphicslayoutitem.htm#geometry" translate="no">geometry()</a>. This is the area that we paint within.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qrectf.htm" translate="no">QRectF</a></span> LayoutItem<span class="operator">::</span>boundingRect() <span class="keyword">const</span>
{
    <span class="keyword">return</span> <span class="type"><a href="./qrectf.htm" translate="no">QRectF</a></span>(<span class="type"><a href="./qpointf.htm" translate="no">QPointF</a></span>(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span>)<span class="operator">,</span> geometry()<span class="operator">.</span>size());
}</pre></div>
<p>The reimplementation of <a href="./qgraphicslayoutitem.htm#setGeometry" translate="no">setGeometry()</a> simply calls its baseclass implementation. However, since this will change the boundingRect we must also call <a href="./qgraphicsitem.htm#prepareGeometryChange" translate="no">prepareGeometryChange()</a>. Finally, we move the item according to <code translate="no">geom.topLeft()</code>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type">void</span> LayoutItem<span class="operator">::</span>setGeometry(<span class="keyword">const</span> <span class="type"><a href="./qrectf.htm" translate="no">QRectF</a></span> <span class="operator">&amp;</span>geom)
{
    prepareGeometryChange();
    <span class="type"><a href="./qgraphicslayoutitem.htm" translate="no">QGraphicsLayoutItem</a></span><span class="operator">::</span>setGeometry(geom);
    setPos(geom<span class="operator">.</span>topLeft());
}</pre></div>
<p>Since we don't want the size of the item to be smaller than the pixmap, we must make sure that we return a size hint that is larger than <code translate="no">m_pix</code>. We also add some extra space around for borders that we will paint later. Alternatively, you could scale the pixmap to prevent the item from becoming smaller than the pixmap. The preferred size is the same as the minimum size hint, while we set maximum to be a large value</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qsizef.htm" translate="no">QSizeF</a></span> LayoutItem<span class="operator">::</span>sizeHint(<span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>SizeHint which<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="./qsizef.htm" translate="no">QSizeF</a></span> <span class="operator">&amp;</span>constraint) <span class="keyword">const</span>
{
    <span class="keyword">switch</span> (which) {
    <span class="keyword">case</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>MinimumSize:
    <span class="keyword">case</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>PreferredSize:
        <span class="comment">// Do not allow a size smaller than the pixmap with two frames around it.</span>
        <span class="keyword">return</span> m_pix<span class="operator">.</span>size() <span class="operator">+</span> <span class="type"><a href="./qsize.htm" translate="no">QSize</a></span>(<span class="number">12</span><span class="operator">,</span> <span class="number">12</span>);
    <span class="keyword">case</span> <span class="type"><a href="./qt.htm" translate="no">Qt</a></span><span class="operator">::</span>MaximumSize:
        <span class="keyword">return</span> <span class="type"><a href="./qsizef.htm" translate="no">QSizeF</a></span>(<span class="number">1000</span><span class="operator">,</span><span class="number">1000</span>);
    <span class="keyword">default</span>:
        <span class="keyword">break</span>;
    }
    <span class="keyword">return</span> constraint;
}</pre></div>
<p><a href="https://code.qt.io/cgit/qt/qtbase.git/tree/examples/widgets/graphicsview/basicgraphicslayouts?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@graphicsview/basicgraphicslayouts -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>