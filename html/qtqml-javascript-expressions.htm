<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JavaScript Expressions in QML Documents | Qt QML</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtqml-javascript-expressions.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtqml-index.htm" translate="no">Qt QML</a></li>
                            <li><a>JavaScript Expressions in QML Documents</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">JavaScript Expressions in QML Documents</h1>
<span class="subtitle"></span>
<!-- $$$qtqml-javascript-expressions.html-description -->
<div class="descr"> <a name="details"></a>
<p>The <a href="./qtqml-javascript-hostenvironment.htm" translate="no">JavaScript Host Environment</a> provided by QML can run valid standard JavaScript constructs such as conditional operators, arrays, variable setting, and loops. In addition to the standard JavaScript properties, the <a href="./qtqml-javascript-qmlglobalobject.htm" translate="no">QML Global Object</a> includes a number of helper methods that simplify building UIs and interacting with the QML environment.</p>
<p>The JavaScript environment provided by QML is stricter than that in a web browser. For example, in QML you cannot add to, or modify, members of the JavaScript global object. In regular JavaScript, it is possible to do this accidentally by using a variable without declaring it. In QML this will throw an exception, so all local variables must be explicitly declared. See <a href="./qtqml-javascript-hostenvironment.htm#javascript-environment-restrictions" translate="no">JavaScript Environment Restrictions</a> for a complete description of the restrictions on JavaScript code executed from QML.</p>
<p>Various parts of <a href="./qtqml-documents-topic.htm" translate="no">QML documents</a> can contain JavaScript code:</p>
<ol class="1" type="1"><li>The body of <a href="./qtqml-syntax-propertybinding.htm" translate="no">property bindings</a>. These JavaScript expressions describe relationships between QML object <a href="./qtqml-syntax-objectattributes.htm#property-attributes" translate="no">properties</a>. When <i>dependencies</i> of a property change, the property is automatically updated too, according to the specified relationship.</li>
<li>The body of <a href="./qtqml-syntax-objectattributes.htm#signal-attributes" translate="no">Signal handlers</a>. These JavaScript statements are automatically evaluated whenever a QML object emits the associated signal.</li>
<li>The definition of <a href="./qtqml-syntax-objectattributes.htm#method-attributes" translate="no">custom methods</a>. JavaScript functions that are defined within the body of a QML object become methods of that object.</li>
<li>Standalone <a href="./qtqml-javascript-imports.htm" translate="no">JavaScript resource (.js) files</a>. These files are actually separate from QML documents, but they can be imported into QML documents. Functions and variables that are defined within the imported files can be used in property bindings, signal handlers, and custom methods.</li>
</ol>
<a name="javascript-in-property-bindings"></a>
<h2 id="javascript-in-property-bindings">JavaScript in property bindings<a class="plink" href="#javascript-in-property-bindings" title="Direct link to this headline"></a></h2>
<p>In the following example, the <code translate="no">color</code> property of <a href="./qml-qtquick-rectangle.htm" translate="no">Rectangle</a> depends on the <code translate="no">pressed</code> property of <a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a>. This relationship is described using a conditional expression:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">import QtQuick 2.12

<span class="type"><a href="./qml-qtquick-rectangle.htm" translate="no">Rectangle</a></span> {
    <span class="name">id</span>: <span class="name">colorbutton</span>
    <span class="name">width</span>: <span class="number">200</span>; <span class="name">height</span>: <span class="number">80</span>;

    <span class="name">color</span>: <span class="name">inputHandler</span>.<span class="name">pressed</span> ? <span class="string">"steelblue"</span> : <span class="string">"lightsteelblue"</span>

    <span class="type"><a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a></span> {
        <span class="name">id</span>: <span class="name">inputHandler</span>
    }
}</pre></div>
<p>In fact, any JavaScript expression (no matter how complex) may be used in a property binding definition, as long as the result of the expression is a value whose type can be assigned to the property. This includes side effects. However, complex bindings and side effects are discouraged because they can reduce the performance, readability, and maintainability of the code.</p>
<p>There are two ways to define a property binding: the most common one is shown in the example earlier, in a <a href="./qtqml-syntax-objectattributes.htm#value-assignment-on-initialization" translate="no">property initialization</a>. The second (and much rarer) way is to assign the property a function returned from the <a href="./qml-qtqml-qt.htm#binding-method" translate="no">Qt.binding()</a> function, from within imperative JavaScript code, as shown below:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">import QtQuick 2.12

<span class="type"><a href="./qml-qtquick-rectangle.htm" translate="no">Rectangle</a></span> {
    <span class="name">id</span>: <span class="name">colorbutton</span>
    <span class="name">width</span>: <span class="number">200</span>; <span class="name">height</span>: <span class="number">80</span>;

    <span class="name">color</span>: <span class="string">"red"</span>

    <span class="type"><a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a></span> {
        <span class="name">id</span>: <span class="name">inputHandler</span>
    }

    <span class="name">Component</span>.onCompleted: {
        <span class="name">color</span> <span class="operator">=</span> <span class="name">Qt</span>.<span class="name">binding</span>(<span class="keyword">function</span>() { <span class="keyword">return</span> <span class="name">inputHandler</span>.<span class="name">pressed</span> ? <span class="string">"steelblue"</span> : <span class="string">"lightsteelblue"</span> });
    }
}</pre></div>
<p>See the <a href="./qtqml-syntax-propertybinding.htm" translate="no">property bindings</a> documentation for more information about how to define property bindings, and see the documentation about <a href="./qtqml-syntax-propertybinding.htm#qml-javascript-assignment" translate="no">Property Assignment versus Property Binding</a> for information about how bindings differ from value assignments.</p>
<a name="javascript-in-signal-handlers"></a>
<h2 id="javascript-in-signal-handlers">JavaScript in signal handlers<a class="plink" href="#javascript-in-signal-handlers" title="Direct link to this headline"></a></h2>
<p>QML object types can emit signals in reaction to certain events occurring. Those signals can be handled by signal handler functions, which can be defined by clients to implement custom program logic.</p>
<p>Suppose that a button represented by a Rectangle type has a <a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a> and a Text label. The <a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a> emits its <a href="./qml-qtquick-taphandler.htm#tapped-signal" translate="no">tapped</a> signal when the user presses the button. The clients can react to the signal in the <code translate="no">onTapped</code> handler using JavaScript expressions. The QML engine executes these JavaScript expressions defined in the handler as required. Typically, a signal handler is bound to JavaScript expressions to initiate other events or to assign property values.</p>
<div class="pre"><pre class="qml prettyprint" translate="no">import QtQuick 2.12

<span class="type"><a href="./qml-qtquick-rectangle.htm" translate="no">Rectangle</a></span> {
    <span class="name">id</span>: <span class="name">button</span>
    <span class="name">width</span>: <span class="number">200</span>; <span class="name">height</span>: <span class="number">80</span>; <span class="name">color</span>: <span class="string">"lightsteelblue"</span>

    <span class="type"><a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a></span> {
        <span class="name">id</span>: <span class="name">inputHandler</span>
        <span class="name">onTapped</span>: {
            <span class="comment">// arbitrary JavaScript expression</span>
            <span class="name">console</span>.<span class="name">log</span>(<span class="string">"Tapped!"</span>)
        }
    }

    <span class="type"><a href="./qml-qtquick-text.htm" translate="no">Text</a></span> {
        <span class="name">id</span>: <span class="name">label</span>
        <span class="name">anchors</span>.centerIn: <span class="name">parent</span>
        <span class="name">text</span>: <span class="name">inputHandler</span>.<span class="name">pressed</span> ? <span class="string">"Pressed!"</span> : <span class="string">"Press here!"</span>
    }
}</pre></div>
<p>For more details about signals and signal handlers, refer to the following topics:</p>
<ul>
<li><a href="./qtqml-syntax-signals.htm" translate="no">Signal and Handler Event System</a></li>
<li><a href="./qtqml-syntax-objectattributes.htm" translate="no">QML Object Attributes</a></li>
</ul>
<a name="javascript-in-standalone-functions"></a>
<h2 id="javascript-in-standalone-functions">JavaScript in standalone functions<a class="plink" href="#javascript-in-standalone-functions" title="Direct link to this headline"></a></h2>
<p>Program logic can also be defined in JavaScript functions. These functions can be defined inline in QML documents (as custom methods) or externally in imported JavaScript files.</p>
<a name="javascript-in-custom-methods"></a>
<h3 id="javascript-in-custom-methods">JavaScript in custom methods<a class="plink" href="#javascript-in-custom-methods" title="Direct link to this headline"></a></h3>
<p>Custom methods can be defined in QML documents and may be called from signal handlers, property bindings, or functions in other QML objects. Such methods are often referred to as <i>inline JavaScript functions</i> because their implementation is included in the QML object type definition (QML document), instead of in an external JavaScript file.</p>
<p>An example of an inline custom method is as follows:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">import QtQuick 2.12

<span class="type"><a href="./qml-qtquick-item.htm" translate="no">Item</a></span> {
    <span class="keyword">function </span><span class="name">fibonacci</span>(n){
        var arr = [<span class="number">0</span>, <span class="number">1</span>];
        <span class="keyword">for</span> (var i = 2; <span class="name">i</span> <span class="operator">&lt;</span> <span class="name">n</span> <span class="operator">+</span> <span class="number">1</span>; i++)
            <span class="name">arr</span>.<span class="name">push</span>(<span class="name">arr</span>[<span class="name">i</span> <span class="operator">-</span> <span class="number">2</span>] <span class="operator">+</span> <span class="name">arr</span>[<span class="name">i</span> <span class="operator">-</span><span class="number">1</span>]);

        <span class="keyword">return</span> <span class="name">arr</span>;
    }
    <span class="type"><a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a></span> {
        <span class="name">onTapped</span>: <span class="name">console</span>.<span class="name">log</span>(<span class="name">fibonacci</span>(<span class="number">10</span>))
    }
}</pre></div>
<p>The fibonacci function is run whenever the <a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a> emits a <code translate="no">tapped</code> signal.</p>
<div class="admonition note">
<p><b>Note: </b>The custom methods defined inline in a QML document are exposed to other objects, and therefore inline functions on the root object in a QML component can be invoked by callers outside the component. If this is not desired, the method can be added to a non-root object or, preferably, written in an external JavaScript file.</p>
</div>
<p>See the <a href="./qtqml-syntax-objectattributes.htm" translate="no">QML Object Attributes</a> documentation for more information on defining custom methods in QML using JavaScript.</p>
<a name="functions-defined-in-a-javascript-file"></a>
<h3 id="functions-defined-in-a-javascript-file">Functions defined in a JavaScript file<a class="plink" href="#functions-defined-in-a-javascript-file" title="Direct link to this headline"></a></h3>
<p>Non-trivial program logic is best separated into a separate JavaScript file. This file can be imported into QML using an <code translate="no">import</code> statement, like the QML <a href="./qtqml-modules-topic.htm" translate="no">modules</a>.</p>
<p>For example, the <code translate="no">fibonacci()</code> method in the earlier example could be moved into an external file named <code translate="no">fib.js</code>, and accessed like this:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">import QtQuick 2.12
import "fib.js" as MathFunctions

<span class="type"><a href="./qml-qtquick-item.htm" translate="no">Item</a></span> {
    <span class="type"><a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a></span> {
        <span class="name">onTapped</span>: <span class="name">console</span>.<span class="name">log</span>(<span class="name">MathFunctions</span>.<span class="name">fibonacci</span>(<span class="number">10</span>))
    }
}</pre></div>
<p>For more information about loading external JavaScript files into QML, read the section about <a href="./qtqml-javascript-imports.htm" translate="no">Importing JavaScript Resources in QML</a>.</p>
<a name="connecting-signals-to-javascript-functions"></a>
<h3 id="connecting-signals-to-javascript-functions">Connecting signals to JavaScript functions<a class="plink" href="#connecting-signals-to-javascript-functions" title="Direct link to this headline"></a></h3>
<p>QML object types that emit signals also provide default signal handlers for their signals, as described in the <a href="./qtqml-javascript-expressions.htm#javascript-in-signal-handlers" translate="no">previous</a> section. Sometimes, however, a client wants to trigger a function defined in a QML object when another QML object emits a signal. Such scenarios can be handled by a signal connection.</p>
<p>A signal emitted by a QML object may be connected to a JavaScript function by calling the signal's <code translate="no">connect()</code> method and passing the JavaScript function as an argument. For example, the following code connects the <a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a>'s <code translate="no">tapped</code> signal to the <code translate="no">jsFunction()</code> in <code translate="no">script.js</code>:</p>
<div class="table"><table class="generic">
<tbody><tr class="odd" valign="top"><td><div class="pre"><pre class="qml prettyprint" translate="no">import QtQuick 2.12
import "script.js" as MyScript

<span class="type"><a href="./qml-qtquick-item.htm" translate="no">Item</a></span> {
    <span class="name">id</span>: <span class="name">item</span>
    <span class="name">width</span>: <span class="number">200</span>; <span class="name">height</span>: <span class="number">200</span>

    <span class="type"><a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a></span> {
        <span class="name">id</span>: <span class="name">inputHandler</span>
    }

    <span class="name">Component</span>.onCompleted: {
        <span class="name">inputHandler</span>.<span class="name">tapped</span>.<span class="name">connect</span>(<span class="name">MyScript</span>.<span class="name">jsFunction</span>)
    }
}</pre></div>
</td><td><div class="pre"><pre class="js prettyprint"><span class="comment">// script.js</span>

<span class="keyword">function </span><span class="name">jsFunction</span>() {
    <span class="name">console</span>.<span class="name">log</span>(<span class="string">"Called JavaScript function!"</span>)
}</pre></div>
</td></tr>
</tbody></table></div>
<p>The <code translate="no">jsFunction()</code> is called whenever the <a href="./qml-qtquick-taphandler.htm" translate="no">TapHandler</a>'s <code translate="no">tapped</code> signal is emitted.</p>
<p>See <a href="./qtqml-syntax-signals.htm" translate="no">Connecting Signals to Methods and Signals</a> for more information.</p>
<a name="javascript-in-application-startup-code"></a>
<h2 id="javascript-in-application-startup-code">JavaScript in application startup code<a class="plink" href="#javascript-in-application-startup-code" title="Direct link to this headline"></a></h2>
<p>It is occasionally necessary to run some imperative code at application (or component instance) startup. While it is tempting to just include the startup script as <i>global code</i> in an external script file, this can have severe limitations as the QML environment may not have been fully established. For example, some objects might not have been created or some <a href="./qtqml-syntax-propertybinding.htm" translate="no">property bindings</a> may not have been established. See <a href="./qtqml-javascript-hostenvironment.htm#javascript-environment-restrictions" translate="no">JavaScript Environment Restrictions</a> for the exact limitations of global script code.</p>
<p>A QML object emits the <code translate="no">Component.completed</code> <a href="./qtqml-syntax-signals.htm#attached-signal-handlers" translate="no">attached signal</a> when its instantiation is complete. The JavaScript code in the corresponding <code translate="no">Component.onCompleted</code> handler runs after the object is instantiated. Thus, the best place to write application startup code is in the <code translate="no">Component.onCompleted</code> handler of the top-level object, because this object emits <code translate="no">Component.completed</code> when the QML environment is fully established.</p>
<p>For example:</p>
<div class="pre"><pre class="qml prettyprint" translate="no">import QtQuick 2.0

<span class="type"><a href="./qml-qtquick-rectangle.htm" translate="no">Rectangle</a></span> {
    <span class="keyword">function </span><span class="name">startupFunction</span>() {
        <span class="comment">// ... startup code</span>
    }

    <span class="name">Component</span>.onCompleted: <span class="name">startupFunction</span>();
}</pre></div>
<p>Any object in a QML file - including nested objects and nested QML component instances - can use this attached property. If there is more than one <code translate="no">onCompleted()</code> handler to execute at startup, they are run sequentially in an undefined order.</p>
<p>Likewise, every <code translate="no">Component</code> emits a <a href="./qml-qtqml-component.htm#destruction-signal" translate="no">destruction()</a> signal just before being destroyed.</p>
</div>
<!-- @@@qtqml-javascript-expressions.html -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>