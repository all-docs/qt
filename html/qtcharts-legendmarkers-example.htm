<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LegendMarkers Example | Qt Charts</title>
<link rel="canonical" href="https://doc.qt.io/qt-6/qtcharts-legendmarkers-example.html">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtcharts-index.htm" translate="no">Qt Charts</a></li>
                            <li><a href="./qtcharts-examples.htm" translate="no">Qt Charts Examples</a></li>
                            <li class="last"><a>LegendMarkers Example</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title">LegendMarkers Example</h1>
<span class="subtitle"></span>
<!-- $$$legendmarkers-brief -->
<p>The example shows how to make use of legend markers.</p>
<!-- @@@legendmarkers -->
<!-- $$$legendmarkers-description -->
<div class="descr"> <a name="details"></a>
<p>In this example we create an application which uses the <a href="./qlegendmarker.htm" translate="no">QLegendMarker</a> clicked signal to show/hide the corresponding series in a chart. The connect marker button connects a clicked signal from all markers in a legend to the handleMarkerClicked slot.</p>
<p class="centerAlign"><img alt="" src="./images/examples_legendmarkers.png"></p><a name="running-the-example"></a>
<h4 id="running-the-example">Running the Example<a class="plink" href="#running-the-example" title="Direct link to this headline"></a></h4>
<p>To run the example from <a href="http://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b>Welcome</b> mode and select the example from <b>Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<a name="using-legend-markers"></a>
<h4 id="using-legend-markers">Using Legend Markers<a class="plink" href="#using-legend-markers" title="Direct link to this headline"></a></h4>
<p>Our application has buttons for adding or removing a series in a chart and a button to connect or disconnect the legend markers clicked signal to our handler. In the image above we have connected the markers and clicked on one of them.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="comment">// Connect all markers to handler</span>
    <span class="keyword">const</span> <span class="keyword">auto</span> markers <span class="operator">=</span> m_chart<span class="operator">-</span><span class="operator">&gt;</span>legend()<span class="operator">-</span><span class="operator">&gt;</span>markers();
    <span class="keyword">for</span> (<span class="type"><a href="./qlegendmarker.htm" translate="no">QLegendMarker</a></span> <span class="operator">*</span>marker : markers) {
        <span class="comment">// Disconnect possible existing connection to avoid multiple connections</span>
        <span class="type"><a href="./qobject.htm" translate="no">QObject</a></span><span class="operator">::</span>disconnect(marker<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qlegendmarker.htm" translate="no">QLegendMarker</a></span><span class="operator">::</span>clicked<span class="operator">,</span>
                            <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWidget<span class="operator">::</span>handleMarkerClicked);
        <span class="type"><a href="./qobject.htm" translate="no">QObject</a></span><span class="operator">::</span>connect(marker<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qlegendmarker.htm" translate="no">QLegendMarker</a></span><span class="operator">::</span>clicked<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWidget<span class="operator">::</span>handleMarkerClicked);
    }</pre></div>
<p>Here we connect the markers in the legend to our handler. To avoid connecting the same marker more than once, we first disconnect it.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="keyword">const</span> <span class="keyword">auto</span> markers <span class="operator">=</span> m_chart<span class="operator">-</span><span class="operator">&gt;</span>legend()<span class="operator">-</span><span class="operator">&gt;</span>markers();
    <span class="keyword">for</span> (<span class="type"><a href="./qlegendmarker.htm" translate="no">QLegendMarker</a></span> <span class="operator">*</span>marker : markers) {
        <span class="type"><a href="./qobject.htm" translate="no">QObject</a></span><span class="operator">::</span>disconnect(marker<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="./qlegendmarker.htm" translate="no">QLegendMarker</a></span><span class="operator">::</span>clicked<span class="operator">,</span>
                            <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWidget<span class="operator">::</span>handleMarkerClicked);
    }</pre></div>
<p>Here we disconnect all markers from our handler.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="type"><a href="./qlegendmarker.htm" translate="no">QLegendMarker</a></span><span class="operator">*</span> marker <span class="operator">=</span> qobject_cast<span class="operator">&lt;</span><span class="type"><a href="./qlegendmarker.htm" translate="no">QLegendMarker</a></span><span class="operator">*</span><span class="operator">&gt;</span> (sender());
    Q_ASSERT(marker);</pre></div>
<p>In our handler we first cast the sender of the event to the <a href="./qlegendmarker.htm" translate="no">QLegendMarker</a>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">    <span class="keyword">switch</span> (marker<span class="operator">-</span><span class="operator">&gt;</span>type())</pre></div>
<p>Then we check the type of the marker. This is required if we want to access the detailed methods of the marker and cast it to the correct type. If all we need is the pointer to <a href="./qabstractseries.htm" translate="no">QAbstractSeries</a>, the casting isn't necessary. In case of a pie or bar series, we may need the pointer to a related <a href="./qpieslice.htm" translate="no">QPieSlice</a> or <a href="./qbarset.htm" translate="no">QBarSet</a>.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">        <span class="comment">// Toggle visibility of series</span>
        marker<span class="operator">-</span><span class="operator">&gt;</span>series()<span class="operator">-</span><span class="operator">&gt;</span>setVisible(<span class="operator">!</span>marker<span class="operator">-</span><span class="operator">&gt;</span>series()<span class="operator">-</span><span class="operator">&gt;</span>isVisible());

        <span class="comment">// Turn legend marker back to visible, since hiding series also hides the marker</span>
        <span class="comment">// and we don't want it to happen now.</span>
        marker<span class="operator">-</span><span class="operator">&gt;</span>setVisible(<span class="keyword">true</span>);</pre></div>
<p>We want to toggle the visibility of the series, when the marker is clicked. To do so, we get the pointer to a related series from the marker and toggle its visibility. Since the legend marker follows the visibility of the series by default, we also set the marked back to visible. If we don't do so, the marker will be invisible in the legend and we can't click on it anymore.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">        <span class="comment">// Dim the marker, if series is not visible</span>
        <span class="type"><a href="./qtglobal.htm#qreal-typedef" translate="no">qreal</a></span> alpha <span class="operator">=</span> <span class="number">1.0</span>;

        <span class="keyword">if</span> (<span class="operator">!</span>marker<span class="operator">-</span><span class="operator">&gt;</span>series()<span class="operator">-</span><span class="operator">&gt;</span>isVisible())
            alpha <span class="operator">=</span> <span class="number">0.5</span>;

        <span class="type"><a href="./qcolor.htm" translate="no">QColor</a></span> color;
        <span class="type"><a href="./qbrush.htm" translate="no">QBrush</a></span> brush <span class="operator">=</span> marker<span class="operator">-</span><span class="operator">&gt;</span>labelBrush();
        color <span class="operator">=</span> brush<span class="operator">.</span>color();
        color<span class="operator">.</span>setAlphaF(alpha);
        brush<span class="operator">.</span>setColor(color);
        marker<span class="operator">-</span><span class="operator">&gt;</span>setLabelBrush(brush);

        brush <span class="operator">=</span> marker<span class="operator">-</span><span class="operator">&gt;</span>brush();
        color <span class="operator">=</span> brush<span class="operator">.</span>color();
        color<span class="operator">.</span>setAlphaF(alpha);
        brush<span class="operator">.</span>setColor(color);
        marker<span class="operator">-</span><span class="operator">&gt;</span>setBrush(brush);

        <span class="type"><a href="./qpen.htm" translate="no">QPen</a></span> pen <span class="operator">=</span> marker<span class="operator">-</span><span class="operator">&gt;</span>pen();
        color <span class="operator">=</span> pen<span class="operator">.</span>color();
        color<span class="operator">.</span>setAlphaF(alpha);
        pen<span class="operator">.</span>setColor(color);
        marker<span class="operator">-</span><span class="operator">&gt;</span>setPen(pen);</pre></div>
<p>Instead of making the marker invisible when the series is hidden, we dim the color of the marker. Here we do it by modifying the color of the laberBrush.</p>
<p><a href="https://code.qt.io/cgit/qt/qtcharts.git/tree/examples/charts/legendmarkers?h=5.15" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@legendmarkers -->
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>