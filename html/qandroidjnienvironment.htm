<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QAndroidJniEnvironment | Qt Android Extras</title>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <!-- Google Tag Manager -->
    
  <!-- End Google Tag Manager -->
  
  
</head>
<body class="qt-design-system" style="background:var(--content-bg-color)" onload="prettyPrint()">

<div data-global-resource-path="qt-design-system/components/b-sidebar.html">
    <div class="b-sidebar b-sidebar--full-width">
        
        <div class="b-sidebar__content">
            <div class="b-sidebar__topbar" data-margin-bottom="sm">
                <div class="b-topbar">
                                        <div class="b-topbar__breadcrump" translate="no">
                        <ul class="c-breadcrump">
                            <li><a href="./index.htm" translate="no">Qt 5.15</a></li>
                            <li><a href="./qtandroidextras-index.htm" translate="no">Qt Android Extras</a></li>
                            <li><a href="./qtandroidextras-module.htm" translate="no">C++ Classes</a></li>
                            <li><a>QAndroidJniEnvironment</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="b-sidebar__content__wrapper">
                <article class="b-sidebar__content__left">
                    <div class="context mainContent" style="margin: 0;padding: 0; background: 0;">
                    

<div class="context">
<h1 class="title" translate="no">QAndroidJniEnvironment Class</h1>
<!-- $$$QAndroidJniEnvironment-brief -->
<p>The QAndroidJniEnvironment provides access to the JNI Environment. <a href="#details">More...</a></p>
<!-- @@@QAndroidJniEnvironment -->
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign"> <span class="preprocessor">#include &lt;QAndroidJniEnvironment&gt;</span>
</td></tr><tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> QT += androidextras</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 5.2</td></tr></tbody></table></div><p>This class was introduced in Qt 5.2.</p>
<ul>
<li><a href="./qandroidjnienvironment-members.htm">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h2 id="public-functions">Public Functions<a class="plink" href="#public-functions" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="./qandroidjnienvironment.htm#QAndroidJniEnvironment" translate="no">QAndroidJniEnvironment</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="./qandroidjnienvironment.htm#dtor.QAndroidJniEnvironment" translate="no">~QAndroidJniEnvironment</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> jclass </td><td class="memItemRight bottomAlign"><b><a href="./qandroidjnienvironment.htm#findClass" translate="no">findClass</a></b>(const char *<i>className</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> JNIEnv *</td><td class="memItemRight bottomAlign"><b><a href="./qandroidjnienvironment.htm#operator-JNIEnv--2a" translate="no">operator JNIEnv *</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> JNIEnv *</td><td class="memItemRight bottomAlign"><b><a href="./qandroidjnienvironment.htm#operator--gt" translate="no">operator-&gt;</a></b>()</td></tr>
</tbody></table></div>
<a name="static-public-members"></a>
<h2 id="static-public-members">Static Public Members<a class="plink" href="#static-public-members" title="Direct link to this headline"></a></h2>
<div class="table"><table class="alignedsummary" translate="no">
<tbody><tr><td class="memItemLeft rightAlign topAlign"> JavaVM *</td><td class="memItemRight bottomAlign"><b><a href="./qandroidjnienvironment.htm#javaVM" translate="no">javaVM</a></b>()</td></tr>
</tbody></table></div>
<a name="details"></a>
<!-- $$$QAndroidJniEnvironment-description -->
<div class="descr">
<h2 id="details">Detailed Description<a class="plink" href="#details" title="Direct link to this headline"></a></h2>
</div>
<!-- @@@QAndroidJniEnvironment -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QAndroidJniEnvironment[overload1]$$$QAndroidJniEnvironment -->
<h3 class="fn" id="QAndroidJniEnvironment" translate="no"><a name="QAndroidJniEnvironment"></a>QAndroidJniEnvironment::<span class="name">QAndroidJniEnvironment</span>()<a class="plink" href="#QAndroidJniEnvironment" title="Direct link to this headline"></a></h3>
<p>Constructs a new QAndroidJniEnvironment object and attach the current thread to the Java VM.</p>
<div class="pre"><pre class="cpp prettyprint" translate="no">bool exceptionCheck()
{
    <span class="comment">/*
      The QAndroidJniEnvironment attaches the current thread to the JavaVM on
      creation and detach when it goes out of scope.
     */</span>
    <span class="type">QAndroidJniEnvironment</span> qjniEnv;
    <span class="keyword">return</span> qjniEnv<span class="operator">-</span><span class="operator">&gt;</span>ExceptionCheck();
}</pre></div>
<!-- @@@QAndroidJniEnvironment -->
<!-- $$$~QAndroidJniEnvironment[overload1]$$$~QAndroidJniEnvironment -->
<h3 class="fn" id="dtor.QAndroidJniEnvironment" translate="no"><a name="dtor.QAndroidJniEnvironment"></a>QAndroidJniEnvironment::<span class="name">~QAndroidJniEnvironment</span>()<a class="plink" href="#dtor.QAndroidJniEnvironment" title="Direct link to this headline"></a></h3>
<p>Detaches the current thread from the Java VM and destroys the <a href="./qandroidjnienvironment.htm" translate="no">QAndroidJniEnvironment</a> object.</p>
<!-- @@@~QAndroidJniEnvironment -->
<!-- $$$findClass[overload1]$$$findClassconstchar* -->
<h3 class="fn" id="findClass" translate="no"><a name="findClass"></a><span class="type">jclass</span> QAndroidJniEnvironment::<span class="name">findClass</span>(const <span class="type">char</span> *<i>className</i>)<a class="plink" href="#findClass" title="Direct link to this headline"></a></h3>
<p>Searches for <i translate="no">className</i> using all available class loaders. Qt on Android uses a custom class loader to load all the .jar files and it must be used to find any classes that are created by that class loader because these classes are not visible in the default class loader.</p>
<p>Returns the class pointer or null if is not found.</p>
<p>A use case for this function is searching for a custom class then calling its memeber method. The following code snippet create an instance of the class <code translate="no">CustomClass</code> and then calls <code translate="no">printFromJava()</code> method:</p>
<div class="pre"><pre class="cpp prettyprint" translate="no"><span class="type"><a href="./qandroidjnienvironment.htm#QAndroidJniEnvironment" translate="no">QAndroidJniEnvironment</a></span> env;
jclass javaClass <span class="operator">=</span> env<span class="operator">.</span>findClass(<span class="string">"org/qtproject/example/qtandroidextras/CustomClass"</span>);
<span class="type"><a href="./qandroidjniobject.htm" translate="no">QAndroidJniObject</a></span> classObject(javaClass);

<span class="type"><a href="./qandroidjniobject.htm" translate="no">QAndroidJniObject</a></span> javaMessage <span class="operator">=</span> <span class="type"><a href="./qandroidjniobject.htm" translate="no">QAndroidJniObject</a></span><span class="operator">::</span>fromString(<span class="string">"findClass example"</span>);
classObject<span class="operator">.</span>callMethod<span class="operator">&lt;</span><span class="type">void</span><span class="operator">&gt;</span>(<span class="string">"printFromJava"</span><span class="operator">,</span>
                             <span class="string">"(Ljava/lang/String;)V"</span><span class="operator">,</span>
                             javaMessage<span class="operator">.</span>object<span class="operator">&lt;</span>jstring<span class="operator">&gt;</span>());</pre></div>
<p>This function was introduced in Qt 5.12.</p>
<!-- @@@findClass -->
<!-- $$$javaVM[overload1]$$$javaVM -->
<h3 class="fn" id="javaVM" translate="no"><a name="javaVM"></a><code translate="no">[static] </code><span class="type">JavaVM</span> *QAndroidJniEnvironment::<span class="name">javaVM</span>()<a class="plink" href="#javaVM" title="Direct link to this headline"></a></h3>
<p>Returns the Java VM interface.</p>
<!-- @@@javaVM -->
<!-- $$$operator JNIEnv *[overload1]$$$operator JNIEnv * -->
<h3 class="fn" id="operator-JNIEnv--2a" translate="no"><a name="operator-JNIEnv--2a"></a><span class="type">JNIEnv</span> *QAndroidJniEnvironment::<span class="name">operator JNIEnv *</span>() const<a class="plink" href="#operator-JNIEnv--2a" title="Direct link to this headline"></a></h3>
<p>Returns the JNI Environment pointer.</p>
<!-- @@@operator JNIEnv * -->
<!-- $$$operator->[overload1]$$$operator-> -->
<h3 class="fn" id="operator--gt" translate="no"><a name="operator--gt"></a><span class="type">JNIEnv</span> *QAndroidJniEnvironment::<span class="name">operator-&gt;</span>()<a class="plink" href="#operator--gt" title="Direct link to this headline"></a></h3>
<p>Provides access to the <a href="./qandroidjnienvironment.htm" translate="no">QAndroidJniEnvironment</a>'s JNIEnv pointer.</p>
<!-- @@@operator-> -->
</div>
</div>
<p class="copy-notice">
<acronym title="Copyright">Â©</acronym> 2025 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.     The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.     Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>

                    </div>
                </article>
                
            </div>
        </div>
    </div>
</div>
</body></html>